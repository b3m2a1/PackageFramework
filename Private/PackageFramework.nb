(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 12.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[    201235,       4892]
NotebookOptionsPosition[    172665,       4392]
NotebookOutlinePosition[    177412,       4515]
CellTagsIndexPosition[    177369,       4512]
WindowTitle->EasyIDE: PackageFramework
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell["PackageFramework", "Title",ExpressionUUID->"4873b0fe-2c4c-405e-836d-2603f6a304cd"],

Cell["\<\
A framework for extending the built-in BeginPackage/EndPackage-style package \
mechanism.
Provides developer utilities so that packages may be developed with less \
effort and more features.\
\>", "Text",ExpressionUUID->"55498e2e-3ccb-4a39-b974-22e5135649a4"],

Cell["\<\
This single package file allows for bootstrapping of the system, providing \
the capabilities necessary to do the core loading, but leaving out many \
utilities like auto-completion, exception handling, etc.\
\>", "Text",ExpressionUUID->"4c85805c-b95f-4694-910d-75e2881c5ff3"],

Cell[BoxData[
 RowBox[{"BeginPackage", "[", "\"\<PackageFramework`\>\"", "]"}]], "Code",Expr\
essionUUID->"fda02f29-63f2-4fd5-8d8c-7d8d7a770a94"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"LoadPackage", "::", "usage"}], "=", "\n", "\t", 
   "\"\<LoadPackage[pkg] loads a PackageFrameworkPackage\>\""}], 
  ";"}]], "Code",ExpressionUUID->"8d498b83-27b8-4a91-81d3-0774a9eaac8d"],

Cell[CellGroupData[{

Cell["Package", "Subsubsection",ExpressionUUID->"e7cde1f8-0a5b-4ee1-a666-a4c2e96ab484"],

Cell["\<\
Stuff specific to the operation of the package and not related to LoadPackage \
or any of the other functionality\
\>", "Text",ExpressionUUID->"1b316b9a-0d17-4c86-aaad-139ea441fd1e"],

Cell[BoxData[
 RowBox[{
  RowBox[{"BeginPackage", "[", "\"\<`Package`\>\"", "]"}], ";"}]], "Code",Expr\
essionUUID->"e03f2129-9a59-40c7-bcf7-e07bf9cb0050"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"PackageFrameworkPackage", "::", "usage"}], "=", "\n", "  ", 
   "\"\<PackageFrameworkPackage[ops] represents a package and provides \
methods on this package\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"$PackageFrameworkPackages", "::", "usage"}], "=", "\n", "  ", 
   "\"\<$PackageFrameworkPackages is a manager symbol so that can avoid a \
reload if unnecessary\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"$CurrentPackage", "::", "usage"}], "=", 
   "\"\<The current package as configured by the loader\>\""}], 
  ";"}]}], "Code",ExpressionUUID->"fac03062-2d1c-41ea-a5d1-f97bd3cc3cc6"],

Cell[BoxData[
 RowBox[{
  RowBox[{"EndPackage", "[", "]"}], ";"}]], "Code",ExpressionUUID->"497778b5-0f63-4959-b8e7-77edbd05ea35"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Properties", "Subsubsection",ExpressionUUID->"ca68b11c-d671-4fc1-b0d0-92c5abfbe921"],

Cell["\<\
There are some aspects of the design of this framework that require a level \
of mutability that the language wouldn't naturally provide.

To circumvent this issue we can bind a set of property setting and getting \
mechanisms on the unique PackageFrameworkPackage object that a given context \
will have bound to it (in $PackageFrameworkPackages). By doing this we're \
able to get a nice balance of mutability and immutability\
\>", "Text",ExpressionUUID->"20b03197-1ef5-47a0-acc9-4c9872591ecf"],

Cell[BoxData[
 RowBox[{"BeginPackage", "[", "\"\<`Object`\>\"", "]"}]], "Code",ExpressionUUID->"f7c5f092-e3ae-486f-86d0-8496d9b5a1c2"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"ResolvePackageFrameworkPackage", "::", "usage"}], "=", 
   "\"\<Resolves to the unique package object if needed\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackageCreateCurrentPackageOptionInterface", "::", "usage"}], "=",
    "\n", "  ", 
   "\"\<Implementation function that lets a symbol become a hook into a given \
attribute of a package\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"BindPackageMethod", "::", "usage"}], "=", "\n", "  ", 
   "\"\<Adds a method on the general PackageFrameworkPackage interface that \
makes it possible to call\\\n into packages\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackageFrameworkConfig", "::", "usage"}], "=", 
   "\"\<Discovers the config settings for a given package / directory\>\""}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackageFrameworkPackageQ", "::", "usage"}], "=", 
   "\"\<Tests whether the object is an initialized package for not\>\""}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackageFrameworkPackageOption", "::", "usage"}], "=", 
   "\"\<Gets an option value for a package\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackageFrameworkPackageOptionValue", "::", "usage"}], "=", 
   "\"\<Gets an option value for a package\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackageFrameworkPackageMutate", "::", "usage"}], "=", 
   "\"\<The mutation handler for PackageFrameworkPackage objects\>\""}], 
  ";"}]}], "Code",ExpressionUUID->"15e3dee1-9fd6-496f-99ff-2b9d61b5e332"],

Cell[BoxData[
 RowBox[{"EndPackage", "[", "]"}]], "Code",ExpressionUUID->"3efb266f-78e1-415e-9e74-5aaf505b5790"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Data", "Subsubsection",ExpressionUUID->"c9693e13-ee8a-494b-adff-3fe870b33033"],

Cell[BoxData[
 RowBox[{"BeginPackage", "[", "\"\<`Data`\>\"", "]"}]], "Code",ExpressionUUID->"eee9e0c0-b47e-4ae9-8870-2491b6b1dfaa"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"PackageName", "::", "usage"}], "=", 
   "\"\<PackageName[pkg] Pulls the name out of pkg\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackageContexts", "::", "usage"}], "=", 
   "\"\<PackageContexts[pkg] returns the set of Contexts used by the \
package\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackageSymbols", "::", "usage"}], "=", 
   "\"\<PackageSymbols[pkg] returns the symbols provided by the \
package\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackageRoot", "::", "usage"}], "=", 
   "\"\<PackageRoot[pkg] returns the root directory for the package\n\
PackageRoot[pkg, ctype] returns the root directory for the content type ctype\
\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackageFileNames", "::", "usage"}], "=", 
   "\"\<PackageFileNames[pkg, pat] returns the files in the package matching \
pat\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackageFilePath", "::", "usage"}], "=", 
   "\"\<PackageFilePath[pkg, path] returns the file path using PackageRoot as \
the root\>\""}], ";"}]}], "Code",ExpressionUUID->"0856ec17-b2c7-4052-986a-\
940089d57ae4"],

Cell[BoxData[
 RowBox[{"EndPackage", "[", "]"}]], "Code",ExpressionUUID->"034815ca-1c56-47d5-bb74-90c5ac3c7d25"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Loading", "Subsubsection",ExpressionUUID->"e0451589-d49a-4cd8-8d17-e8f58c6254c3"],

Cell[BoxData[
 RowBox[{"BeginPackage", "[", "\"\<`Loading`\>\"", "]"}]], "Code",ExpressionUU\
ID->"35758797-fb4c-479f-9134-14809a2ca206"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"PackageFileContexts", "::", "usage"}], "=", 
   "\"\<PackageFileContexts[pkg] The contexts for the files in pkg\>\""}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackageDeclaredPackages", "::", "usage"}], "=", 
   "\"\<PackageDeclaredPackages[pkg] the set of packages found and \\\n\
declared via the autoloader for pkg\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackageLoadedPackages", "::", "usage"}], "=", 
   "\"\<PackageLoadedPackages[pkg] the set of already loaded packages\>\""}], 
  ";"}]}], "Code",ExpressionUUID->"c1a91870-36d7-4e63-abab-9b97b8c32472"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"PackageExecute", "::", "usage"}], "=", 
   "\"\<Executes something with the package contexts exposed\>\""}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackageAutoloadPackage", "::", "usage"}], "=", 
   "\"\<Loads a package via PackageExecute\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackageLoadDeclare", "::", "usage"}], "=", 
   "\"\<Declares a package\>\""}], ";"}]}], "Code",ExpressionUUID->"004115c7-\
6e02-45bc-855a-62c62a6999c6"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"PackageFrameworkPackageLoad", "::", "usage"}], "=", 
   "\"\<Calls LoadDeclare on a package\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackageFrameworkPackageGet", "::", "usage"}], "=", "\n", "  ", 
   "\"\<Loads a specific subpackage file using Get with the appropriate \
directory structure\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackageFrameworkPackageNeeds", "::", "usage"}], "=", "\n", "  ", 
   "\"\<Loads a specific subpackage file if it hasn't already been \
loaded\>\""}], ";"}]}], "Code",ExpressionUUID->"bd2609dc-3ac6-4879-a901-\
4fafc5a27b91"],

Cell[BoxData[
 RowBox[{
  RowBox[{"EndPackage", "[", "]"}], ";"}]], "Code",ExpressionUUID->"7a5e0a45-ccef-4d12-9539-9d31acc5949b"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Dependencies", "Subsubsection",ExpressionUUID->"fae96db5-9e07-48eb-a7e1-2425fc830b43"],

Cell["\<\
We'll include a sub-sample of the dependency management functions we want to \
provide overall. This will be the bare-bones interface that we can use to \
bootstrap the full version of the paclet from this single loader file.\
\>", "Text",ExpressionUUID->"3a3da476-b53e-4fc4-ab5c-309a65329083"],

Cell[BoxData[
 RowBox[{"BeginPackage", "[", "\"\<`Dependencies`\>\"", "]"}]], "Code",Express\
ionUUID->"dd9363b2-4dca-48c4-a52e-a8a0836dffee"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"PackageCheckPacletDependency", "::", "usage"}], "=", "\"\<\>\""}],
   ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackageInstallPacletDependency", "::", "usage"}], "=", 
   "\"\<\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackageLoadPacletDependency", "::", "usage"}], "=", "\"\<\>\""}], 
  ";"}]}], "Code",ExpressionUUID->"aa6e2256-9263-492f-a91e-11aa298430a0"],

Cell[BoxData[
 RowBox[{"EndPackage", "[", "]"}]], "Code",ExpressionUUID->"9d85f93b-b2f8-4fef-9896-1740cf863b7f"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Private", "Section",ExpressionUUID->"357766f4-df49-4302-8629-71cf7a6d85c6"],

Cell[BoxData[
 RowBox[{
  RowBox[{"Begin", "[", "\"\<`Private`\>\"", "]"}], ";"}]], "Code",ExpressionU\
UID->"6ea43b62-1568-4d99-aca1-fe6e059fe5b3"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"$PackageFrameworkVersion", "::", "doc"}], "=", 
   "\"\<\nDunno if I'll ever use this, but this should either be \
standalone-version or paclet-version \\\nwhere version is semantically \
versioned.\n\nThe idea will be to allow for more dynamic loading of the \
PackageFramework (potentially), maybe using \\\nsome helper function\n\>\""}],
   ";"}], "\n", 
 RowBox[{
  RowBox[{"$PackageFrameworkVersion", "=", "\"\<standalone-0.0.0\>\""}], 
  ";"}]}], "Code",ExpressionUUID->"0fc63076-9824-4587-90db-e2654468252e"],

Cell[CellGroupData[{

Cell["Package Objects / Mutation", "Subsection",ExpressionUUID->"d4cd0f98-5465-49ad-bfcc-9252965d6d2f"],

Cell[CellGroupData[{

Cell["$PackageFrameworkPackages", "Subsubsection",ExpressionUUID->"4257eaf3-d4be-4387-95b2-8d010666a19c"],

Cell[BoxData[
 RowBox[{
  RowBox[{"If", "[", 
   RowBox[{
    RowBox[{"!", 
     RowBox[{"ValueQ", "[", "$PackageFrameworkPackages", "]"}]}], ",", "\n", 
    "  ", 
    RowBox[{"$PackageFrameworkPackages", " ", "=", " ", 
     RowBox[{"<|", "|>"}]}]}], "\n", "  ", "]"}], ";"}]], "Code",ExpressionUUI\
D->"11139848-7457-458a-9e35-810a44e0e76c"]
}, Open  ]],

Cell[CellGroupData[{

Cell["ResolvePackageFrameworkPackage", "Subsubsection",ExpressionUUID->"7b3e9cc4-da78-4632-acbd-a19fb1909553"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ResolvePackageFrameworkPackage", "[", "loc_", "]"}], ":=", "\n", 
  "  ", 
  RowBox[{"Lookup", "[", 
   RowBox[{"$PackageFrameworkPackages", ",", " ", "loc", ",", " ", "None"}], 
   "]"}]}]], "Code",ExpressionUUID->"90a21325-9b20-49b2-8c31-481a39fd5298"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PackageFrameworkConfig", "Subsubsection",ExpressionUUID->"4d501c8d-90e7-4787-8e56-d0e6d4ce6f45"],

Cell[BoxData[
 RowBox[{
  RowBox[{"$PacletInfoFileNames", "=", 
   RowBox[{"{", "\n", "  ", 
    RowBox[{"\"\<PacletInfo.wl\>\"", ",", " ", "\"\<PacletInfo.m\>\""}], "\n",
     "  ", "}"}]}], ";"}]], "Code",ExpressionUUID->"f8e10b77-77d2-457a-a844-\
2567ffa2e5ed"],

Cell[BoxData[
 RowBox[{
  RowBox[{"$LegacyInfoFileNames", "=", 
   RowBox[{"{", "\n", "  ", 
    RowBox[{
    "\"\<LoadInfo.m\>\"", ",", " ", "\"\<LoadInfo.wl\>\"", ",", "\n", "  ", 
     "\"\<BundleInfo.m\>\"", ",", " ", "\"\<BundleInfo.wl\>\""}], "\n", "  ", 
    "}"}]}], ";"}]], "Code",ExpressionUUID->"883a6048-4615-464a-889e-\
e25078f29da1"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"PackageFrameworkConfig", "::", "doc"}], "=", 
   "\"\<\n\tMakes it possible to support the legacy design from when this was \
all part of BTools\nand I expected a Config folder at the root of every \
package\n\nThe new design attempts to unify my two major use cases: \n\t1) \
making new packages with my standard layout and which will auto-context for \
you\n\t2) hooking into existing packages for extension and introspection\n\
\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{"PackageFrameworkConfig", "[", 
   RowBox[{"ops_", ",", " ", "paclet_", ",", " ", "rootDirectory_"}], "]"}], ":=",
   "\n", "  ", 
  RowBox[{"Module", "[", "\n", "    ", 
   RowBox[{
    RowBox[{"{", "\n", "      ", 
     RowBox[{
      RowBox[{"pacletData", " ", "=", " ", "paclet"}], ",", " ", "\n", 
      "      ", 
      RowBox[{"legacySettings", " ", "=", " ", 
       RowBox[{"{", "}"}]}], ",", "\n", "      ", "legacyConfigFiles", ",", 
      "\n", "      ", "extensionData"}], "\n", "      ", "}"}], ",", "\n", 
    "     ", 
    RowBox[{
     RowBox[{"Switch", "[", 
      RowBox[{
      "pacletData", ",", "\n", "       ", "None", ",", "\n", "         ", 
       RowBox[{"(*", " ", 
        RowBox[{
        "proceed", " ", "to", " ", "try", " ", "to", " ", "find", " ", "the", 
         " ", "missing", " ", 
         RowBox[{"PacletInfo", ".", "m"}], " ", "or", " ", 
         RowBox[{"PacletInfo", ".", "wl"}], " ", "file"}], " ", "*)"}], "\n", 
       "         ", 
       RowBox[{"pacletData", " ", "=", " ", "\n", "           ", 
        RowBox[{"Catch", "[", "\n", "             ", 
         RowBox[{
          RowBox[{"Do", "[", "\n", "               ", 
           RowBox[{
            RowBox[{"If", "[", 
             RowBox[{
              RowBox[{"FileExistsQ", "[", 
               RowBox[{"FileNameJoin", "@", 
                RowBox[{"{", 
                 RowBox[{"rootDirectory", ",", " ", "p"}], "}"}]}], "]"}], 
              ",", "\n", "                 ", 
              RowBox[{"Throw", "[", "\n", "                   ", 
               RowBox[{"Association", "@@", 
                RowBox[{
                "PacletManager`CreatePaclet", "@", "\n", 
                 "                     ", 
                 RowBox[{"FileNameJoin", "@", 
                  RowBox[{"{", 
                   RowBox[{"rootDirectory", ",", " ", "p"}], "}"}]}]}]}], 
               "\n", "                   ", "]"}]}], "\n", 
             "                 ", "]"}], ",", "\n", "               ", 
            RowBox[{"{", 
             RowBox[{"p", ",", " ", "$PacletInfoFileNames"}], "}"}]}], "\n", 
           "               ", "]"}], ";", "\n", "             ", 
          RowBox[{"<|", "|>"}]}], "\n", "             ", "]"}]}], ",", "\n", 
       "       ", 
       RowBox[{"_PacletManager`Paclet", "|", "_System`PacletObject"}], ",", 
       "\n", "         ", 
       RowBox[{"pacletData", " ", "=", " ", 
        RowBox[{"Association", "@@", "pacletData"}]}]}], "\n", "       ", 
      "]"}], ";", "\n", "    ", 
     RowBox[{"extensionData", "=", "\n", "      ", 
      RowBox[{"Association", "@", "\n", "        ", 
       RowBox[{"Replace", "[", "\n", "          ", 
        RowBox[{
         RowBox[{"Lookup", "[", 
          RowBox[{"pacletData", ",", " ", "\"\<Extensions\>\"", ",", " ", 
           RowBox[{"{", "}"}]}], "]"}], ",", "\n", "          ", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"key_String", ",", " ", "o___"}], "}"}], ":>", "\n", 
          "            ", 
          RowBox[{"(", 
           RowBox[{"key", "->", 
            RowBox[{"Association", "@", 
             RowBox[{"Flatten", "@", 
              RowBox[{"{", "o", "}"}]}]}]}], ")"}]}], ",", "\n", "          ",
          "1"}], "\n", "          ", "]"}]}]}], ";", "\n", "    ", 
     RowBox[{"legacyConfigFiles", "=", "\n", "      ", 
      RowBox[{"FileNames", "[", "\n", "        ", 
       RowBox[{
        RowBox[{"Alternatives", "@@", "$LegacyInfoFileNames"}], ",", " ", 
        "\n", "        ", 
        RowBox[{"{", "\n", "          ", 
         RowBox[{
          RowBox[{"FileNameJoin", "@", 
           RowBox[{"{", 
            RowBox[{"rootDirectory", ",", " ", "\"\<Config\>\""}], "}"}]}], 
          ",", "\n", "          ", 
          RowBox[{"FileNameJoin", "@", 
           RowBox[{"{", 
            RowBox[{"rootDirectory", ",", " ", "\"\<Private\>\""}], "}"}]}], 
          ",", "\n", "          ", 
          RowBox[{"FileNameJoin", "@", 
           RowBox[{"{", 
            RowBox[{
            "rootDirectory", ",", " ", "\"\<Private\>\"", ",", " ", 
             "\"\<Config\>\""}], "}"}]}]}], "\n", "          ", "}"}]}], "\n",
        "        ", "]"}]}], ";", "\n", "    ", 
     RowBox[{"legacySettings", "=", "\n", "      ", 
      RowBox[{"Flatten", "@", 
       RowBox[{"Map", "[", "\n", "        ", 
        RowBox[{
         RowBox[{
          RowBox[{"Replace", "[", "\n", "          ", 
           RowBox[{
            RowBox[{"Quiet", "[", "\n", "            ", 
             RowBox[{
              RowBox[{"Import", "@", "#"}], ",", "\n", "            ", 
              RowBox[{"{", "\n", "              ", 
               RowBox[{
                RowBox[{"Import", "::", "nffil"}], ",", "\n", 
                "              ", 
                RowBox[{"Import", "::", "chtype"}]}], "\n", "              ", 
               "}"}]}], "\n", "            ", "]"}], ",", "\n", "          ", 
            
            RowBox[{
             RowBox[{"Except", "[", 
              RowBox[{"KeyValuePattern", "[", 
               RowBox[{"{", "}"}], "]"}], "]"}], ":>", "\n", "            ", 
             RowBox[{"{", "}"}]}]}], "\n", "          ", "]"}], "&"}], ",", 
         "\n", "       ", "legacyConfigFiles"}], "\n", "       ", "]"}]}]}], 
     ";", "\n", "    ", 
     RowBox[{
      RowBox[{"Join", "[", "\n", "       ", 
       RowBox[{
        RowBox[{"<|", "\n", "         ", 
         RowBox[{
          RowBox[{"\"\<Name\>\"", "->", 
           RowBox[{"Lookup", "[", 
            RowBox[{"pacletData", ",", " ", "\"\<Name\>\""}], "]"}]}], ",", 
          "\n", "         ", 
          RowBox[{"\"\<Location\>\"", "->", 
           RowBox[{"Lookup", "[", 
            RowBox[{"pacletData", ",", " ", "\"\<Location\>\""}], "]"}]}], 
          ",", "\n", "         ", 
          RowBox[{"\"\<Context\>\"", "->", 
           RowBox[{"Replace", "[", "\n", "           ", 
            RowBox[{
             RowBox[{"Lookup", "[", 
              RowBox[{
               RowBox[{"Lookup", "[", 
                RowBox[{"pacletData", ",", " ", "\"\<Kernel\>\"", ",", " ", 
                 RowBox[{"<|", "|>"}]}], "]"}], ",", " ", "\"\<Context\>\""}],
               "]"}], ",", "\n", "           ", 
             RowBox[{"{", "\n", "             ", 
              RowBox[{
               RowBox[{"m_Missing", ":>", 
                RowBox[{"{", 
                 RowBox[{
                  RowBox[{"FileBaseName", "@", "rootDirectory"}], "<>", 
                  "\"\<`\>\""}], "}"}]}], ",", "\n", "             ", 
               RowBox[{"e_", ":>", 
                RowBox[{"Flatten", "@", 
                 RowBox[{"{", "e", "}"}]}]}]}], "\n", "             ", 
              "}"}]}], "\n", "           ", "]"}]}]}], "\n", "         ", 
         "|>"}], ",", "\n", "       ", 
        RowBox[{"Lookup", "[", 
         RowBox[{
         "extensionData", ",", " ", "\"\<PackageFramework\>\"", ",", " ", 
          RowBox[{"<|", "|>"}]}], "]"}]}], "\n", "       ", "]"}], "//", 
      RowBox[{
       RowBox[{"Merge", "[", "\n", "       ", 
        RowBox[{
         RowBox[{"Flatten", "@", 
          RowBox[{"{", "\n", "         ", 
           RowBox[{
           "ops", ",", "\n", "         ", "#", ",", "\n", "         ", 
            "legacySettings", ",", "\n", "         ", 
            RowBox[{"Options", "[", "PackageFrameworkPackage", "]"}]}], "\n", 
           "         ", "}"}]}], ",", "\n", "       ", 
         RowBox[{"Replace", "[", 
          RowBox[{"{", "\n", "         ", 
           RowBox[{
            RowBox[{
             RowBox[{"r", ":", 
              RowBox[{"{", 
               RowBox[{
                RowBox[{"(", 
                 RowBox[{
                  RowBox[{"_", "?", "OptionQ"}], "|", "_Association"}], ")"}],
                 ".."}], "}"}]}], ":>", 
             RowBox[{"Merge", "[", 
              RowBox[{"r", ",", " ", "First"}], "]"}]}], ",", "\n", 
            "         ", 
            RowBox[{
             RowBox[{"{", 
              RowBox[{"e_", ",", " ", "___"}], "}"}], ":>", "e"}]}], "\n", 
           "         ", "}"}], "]"}]}], "\n", "       ", "]"}], "&"}]}]}]}], 
   "\n", "    ", "]"}]}]}], "Code",ExpressionUUID->"ce4cd9e4-7c1a-4c8b-908a-\
ddc9681cc628"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PackageFrameworkPackage", "Subsubsection",ExpressionUUID->"db0d25d5-4737-4c15-bbd2-8986c70d951c"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"PackageFrameworkPackage", "::", "doc"}], "=", 
   "\"\<\nCan be initialized directly from an association, from a paclet, or \
from a directory\n\nSupports the following keys:\n  Name: Package name\n  \
Location: Package location\n  Context: Root context(s) to use and from which \
to derive subcontexts\n  PackageRoot: where to find packages (defaults to \
top-level Package directory)\n  ResourceRoot: where to find resources \
(defaults to top-level Resource directory)\n  ExtraContexts: a set of extra \
contexts to expose once loading is done\n  ContextMap: a mapping from \
standard context paths to custom ones\n  Mode: the loading mechanism \
(Dependency or Primary) for the package\n  DecoloredPackages: the list of \
packages that should be hidden from the FE\n  PackageScope: the list of \
packages that should be package scoped and not exposable\n  PreloadPackages: \
the list of packages that should be loaded when the package is loaded\n  \
Dependencies: the list of dependencies (with suboptions) for the package\n  \
PackageContexts: the list of contexts that should be available when loading\n \
 RemovePaths: the set of paths to be removed from the bundled package\n  \
RemovePatterns: the set of path patterns to be remove from the bundled \
package\n\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"Options", "[", "PackageFrameworkPackage", "]"}], "=", "\n", "  ", 
   
   RowBox[{"{", "\n", "    ", 
    RowBox[{
     RowBox[{"\"\<Name\>\"", "->", "Automatic"}], ",", "\n", "    ", 
     RowBox[{"\"\<Location\>\"", "->", "Automatic"}], ",", "\n", "    ", 
     RowBox[{"\"\<Context\>\"", "->", "Automatic"}], ",", "\n", "    ", 
     RowBox[{"\"\<PackageRoot\>\"", "->", "\"\<Packages\>\""}], ",", "\n", 
     "    ", 
     RowBox[{"\"\<ResourceRoot\>\"", "->", "\"\<Resources\>\""}], ",", "\n", 
     "    ", 
     RowBox[{"\"\<DependenciesRoot\>\"", "->", "\"\<Dependencies\>\""}], ",", 
     "\n", "    ", 
     RowBox[{"\"\<ExtraContexts\>\"", "->", 
      RowBox[{"{", "}"}]}], ",", "\n", "    ", 
     RowBox[{"\"\<ContextMap\>\"", "->", 
      RowBox[{"{", "}"}]}], ",", "\n", "    ", 
     RowBox[{"\"\<LoadingMode\>\"", "->", "Automatic"}], ",", "\n", "    ", 
     RowBox[{"\"\<DecoloredPackages\>\"", "->", 
      RowBox[{"{", "}"}]}], ",", "\n", "    ", 
     RowBox[{"\"\<PackageScope\>\"", "->", 
      RowBox[{"{", "}"}]}], ",", "\n", "    ", 
     RowBox[{"\"\<PreloadPackages\>\"", "->", 
      RowBox[{"{", "}"}]}], ",", "\n", "    ", 
     RowBox[{"\"\<Dependencies\>\"", "->", 
      RowBox[{"{", "}"}]}], ",", "\n", "    ", 
     RowBox[{"\"\<RemovePaths\>\"", " ", "->", " ", 
      RowBox[{"{", 
       RowBox[{
       "\"\<Private\>\"", ",", " ", "\"\<project\>\"", ",", " ", 
        "\"\<GitHub\>\"", ",", " ", "\"\<.git\>\""}], "}"}]}], ",", " ", "\n",
      "    ", 
     RowBox[{"\"\<RemovePatterns\>\"", " ", "->", " ", 
      RowBox[{"{", "\n", "       ", 
       RowBox[{
       "\"\<Packages/*.nb\>\"", ",", " ", "\n", "       ", 
        "\"\<Packages/*/*.nb\>\"", ",", " ", "\n", "       ", 
        "\"\<Packages/*/*/*.nb\>\"", ",", " ", "\n", "       ", 
        "\"\<.DS_Store\>\""}], "\n", "       ", "}"}]}]}], "\n", "    ", 
    "}"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackageFrameworkPackage", "[", "\n", "  ", 
    RowBox[{
     RowBox[{"pac", ":", 
      RowBox[{"_PacletManager`Paclet", "|", "_System`PacletObject"}]}], ",", 
     "\n", "  ", 
     RowBox[{"ops", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "\n", "  ", "]"}], ":=", "\n",
    "  ", 
   RowBox[{"With", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"pkg", "=", 
       RowBox[{"ConstructPackageFrameworkPackage", "[", 
        RowBox[{"pac", ",", " ", "ops"}], "]"}]}], "}"}], ",", "\n", "    ", 
     RowBox[{"pkg", "/;", 
      RowBox[{"pkg", "=!=", "$Failed"}]}]}], "\n", "    ", "]"}]}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackageFrameworkPackage", "[", "\n", "  ", 
    RowBox[{
     RowBox[{"loc", ":", 
      RowBox[{"_String", "?", "DirectoryQ"}]}], ",", "\n", "  ", 
     RowBox[{"ops", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "\n", "  ", "]"}], ":=", "\n",
    "  ", 
   RowBox[{"With", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"pkg", "=", 
       RowBox[{"ConstructPackageFrameworkPackage", "[", 
        RowBox[{"loc", ",", " ", "ops"}], "]"}]}], "}"}], ",", "\n", "    ", 
     RowBox[{"pkg", "/;", 
      RowBox[{"pkg", "=!=", "$Failed"}]}]}], "\n", "    ", "]"}]}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackageFrameworkPackage", "[", "\n", "  ", 
    RowBox[{"ops", ":", 
     RowBox[{"OptionsPattern", "[", "]"}]}], "\n", "  ", "]"}], ":=", "\n", 
   "  ", 
   RowBox[{"With", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"pkg", "=", 
       RowBox[{"ConstructPackageFrameworkPackage", "[", "ops", "]"}]}], "}"}],
      ",", "\n", "    ", 
     RowBox[{"pkg", "/;", 
      RowBox[{"pkg", "=!=", "$Failed"}]}]}], "\n", "    ", "]"}]}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackageFrameworkPackage", "[", "a_Association", "]"}], "?", 
   RowBox[{"(", "\n", "  ", 
    RowBox[{"Function", "[", 
     RowBox[{"Null", ",", " ", 
      RowBox[{"Not", "@", 
       RowBox[{"System`Private`ValidQ", "[", 
        RowBox[{"Unevaluated", "[", "#", "]"}], "]"}]}], ",", " ", 
      "HoldFirst"}], "]"}], "\n", "  ", ")"}]}], ":=", "\n", "  ", 
  RowBox[{"With", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"pkg", "=", 
      RowBox[{"ConstructPackageFrameworkPackage", "@", "a"}]}], "}"}], ",", 
    "\n", "    ", 
    RowBox[{"pkg", "/;", 
     RowBox[{"pkg", "=!=", "$Failed"}]}]}], "\n", "    ", "]"}]}]}], "Code",Ex\
pressionUUID->"15908c8e-beea-4274-bbdb-fde393ee1107"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Formatting", "Subsubsection",ExpressionUUID->"7371f3ed-d1f9-4992-8a5e-4e685cf2f0f5"],

Cell[BoxData[
 RowBox[{
  RowBox[{"MakeBoxes", "[", 
   RowBox[{
    RowBox[{"p", ":", 
     RowBox[{
      RowBox[{"PackageFrameworkPackage", "[", "a_", "]"}], "?", 
      "PackageFrameworkPackageQ"}]}], ",", " ", "StandardForm"}], "]"}], ":=",
   "\n", "  ", 
  RowBox[{"BoxForm`ArrangeSummaryBox", "[", "\n", "    ", 
   RowBox[{
   "PackageFrameworkPackage", ",", "\n", "    ", "p", ",", "\n", "    ", 
    "None", ",", "\n", "    ", 
    RowBox[{"{", "\n", "      ", 
     RowBox[{"BoxForm`MakeSummaryItem", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"\"\<Name: \>\"", ",", " ", 
         RowBox[{"a", "[", "\"\<Name\>\"", "]"}]}], "}"}], ",", " ", 
       "StandardForm"}], "]"}], "\n", "      ", "}"}], ",", "\n", "    ", 
    RowBox[{"{", " ", "\n", "      ", 
     RowBox[{
      RowBox[{"BoxForm`MakeSummaryItem", "[", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{"\"\<Context: \>\"", ",", " ", 
          RowBox[{"a", "[", "\"\<Context\>\"", "]"}]}], "}"}], ",", " ", 
        "StandardForm"}], "]"}], ",", "\n", "      ", 
      RowBox[{"BoxForm`MakeSummaryItem", "[", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{"\"\<Location: \>\"", ",", " ", 
          RowBox[{"a", "[", "\"\<Location\>\"", "]"}]}], "}"}], ",", " ", 
        "StandardForm"}], "]"}]}], "\n", "      ", "}"}], ",", "\n", "    ", 
    "StandardForm"}], "\n", "    ", "]"}]}]], "Code",ExpressionUUID->\
"f7249d4a-2dfe-4b83-876c-697b120d6e6d"]
}, Open  ]],

Cell[CellGroupData[{

Cell["ConstructPackageFrameworkPackage", "Subsubsection",ExpressionUUID->"8c82e917-2440-4e73-a41c-e8ec8cc57dbb"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"ConstructPackageFrameworkPackage", "[", "\n", "  ", 
    RowBox[{
     RowBox[{"pkg", ":", 
      RowBox[{"_PacletManager`Paclet", "|", "_System`PacletObject"}]}], ",", 
     "\n", "  ", 
     RowBox[{"ops", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "\n", "  ", "]"}], ":=", "\n",
    "  ", 
   RowBox[{"With", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"loc", "=", 
       RowBox[{"pkg", "[", "\"\<Location\>\"", "]"}]}], "}"}], ",", "\n", 
     "    ", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"StringQ", "@", "loc"}], "&&", 
        RowBox[{"DirectoryQ", "@", "loc"}]}], ",", "\n", "      ", 
       RowBox[{"Replace", "[", "\n", "        ", 
        RowBox[{
         RowBox[{"ResolvePackageFrameworkPackage", "[", "]"}], ",", "\n", 
         "        ", 
         RowBox[{"None", ":>", "\n", "          ", 
          RowBox[{
          "ConstructPackageFrameworkPackage", "[", "\n", "            ", 
           RowBox[{
            RowBox[{"PackageFrameworkConfig", "[", 
             RowBox[{
              RowBox[{"{", "ops", "}"}], ",", " ", "pkg", ",", " ", "loc"}], 
             "]"}], ",", "\n", "            ", "False"}], "\n", 
           "            ", "]"}]}]}], "\n", "        ", "]"}], ",", "\n", 
       "      ", "$Failed"}], "\n", "      ", "]"}]}], "\n", "    ", "]"}]}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"ConstructPackageFrameworkPackage", "[", "\n", "  ", 
    RowBox[{
     RowBox[{"loc", ":", 
      RowBox[{"_String", "?", "DirectoryQ"}]}], ",", "\n", "  ", 
     RowBox[{"ops", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "\n", "  ", "]"}], ":=", "\n",
    "  ", 
   RowBox[{"Replace", "[", "\n", "    ", 
    RowBox[{
     RowBox[{"ResolvePackageFrameworkPackage", "[", "loc", "]"}], ",", "\n", 
     "    ", 
     RowBox[{"None", ":>", "\n", "      ", 
      RowBox[{"ConstructPackageFrameworkPackage", "[", "\n", "        ", 
       RowBox[{
        RowBox[{"PackageFrameworkConfig", "[", 
         RowBox[{
          RowBox[{"{", "ops", "}"}], ",", " ", "None", ",", " ", "loc"}], 
         "]"}], ",", "\n", "        ", "False"}], "\n", "        ", "]"}]}]}],
     "\n", "    ", "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"ConstructPackageFrameworkPackage", "[", "\n", "  ", 
    RowBox[{"ops", ":", 
     RowBox[{"OptionsPattern", "[", "]"}]}], "\n", "  ", "]"}], ":=", "\n", 
   "  ", 
   RowBox[{"With", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"loc", "=", 
       RowBox[{"OptionValue", "[", "\"\<Location\>\"", "]"}]}], "}"}], ",", 
     "\n", "    ", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"StringQ", "[", "loc", "]"}], "&&", 
        RowBox[{"DirectoryQ", "[", "loc", "]"}]}], ",", "\n", "      ", 
       RowBox[{"Replace", "[", "\n", "        ", 
        RowBox[{
         RowBox[{"ResolvePackageFrameworkPackage", "[", "loc", "]"}], ",", 
         "\n", "        ", 
         RowBox[{"None", ":>", "\n", "          ", 
          RowBox[{
          "ConstructPackageFrameworkPackage", "[", "\n", "            ", 
           RowBox[{
            RowBox[{"PackageFrameworkConfig", "[", 
             RowBox[{
              RowBox[{"{", "ops", "}"}], ",", " ", "None", ",", " ", "loc"}], 
             "]"}], ",", "\n", "            ", "False"}], "\n", 
           "            ", "]"}]}]}], "\n", "        ", "]"}], ",", "\n", 
       "      ", "$Failed"}], "\n", "      ", "]"}]}], "\n", "    ", "]"}]}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{"ConstructPackageFrameworkPackage", "[", 
   RowBox[{"a_Association", ",", " ", 
    RowBox[{"validate_:", "True"}]}], "]"}], ":=", "\n", "  ", 
  RowBox[{"If", "[", 
   RowBox[{"validate", ",", "\n", "    ", 
    RowBox[{"With", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"loc", "=", 
        RowBox[{"a", "[", "\"\<Location\>\"", "]"}]}], "}"}], ",", "\n", 
      "      ", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"StringQ", "[", "loc", "]"}], "&&", 
         RowBox[{"DirectoryQ", "[", "loc", "]"}]}], ",", "\n", "        ", 
        RowBox[{"Replace", "[", "\n", "          ", 
         RowBox[{
          RowBox[{"ResolvePackageFrameworkPackage", "[", "loc", "]"}], ",", 
          "\n", "          ", 
          RowBox[{"None", ":>", "\n", "            ", 
           RowBox[{"With", "[", 
            RowBox[{
             RowBox[{"{", 
              RowBox[{"config", "=", 
               RowBox[{"PackageFrameworkConfig", "[", 
                RowBox[{
                 RowBox[{"Normal", "[", "a", "]"}], ",", " ", "None", ",", 
                 " ", "loc"}], "]"}]}], "}"}], ",", "\n", "              ", 
             RowBox[{"ConstructPackageFrameworkPackage", "[", 
              RowBox[{"a", ",", " ", "False"}], "]"}]}], "\n", 
            "              ", "]"}]}]}], "\n", "          ", "]"}], ",", "\n",
         "        ", "$Failed"}], "\n", "        ", "]"}]}], "\n", "      ", 
     "]"}], ",", "\n", "   ", 
    RowBox[{"System`Private`SetValid", "@", 
     RowBox[{"Unevaluated", "@", 
      RowBox[{"PackageFrameworkPackage", "[", "a", "]"}]}]}]}], "\n", "   ", 
   "]"}]}]}], "Code",ExpressionUUID->"9f00fcdb-43cd-48a2-bfa4-2a0d104b7c4b"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PackageFrameworkPackageQ", "Subsubsection",ExpressionUUID->"1b7a138a-e4a8-4bd0-adb4-c9bd86d64685"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"PackageFrameworkPackageQ", "[", 
   RowBox[{"p", ":", 
    RowBox[{"PackageFrameworkPackage", "[", 
     RowBox[{"_Association", "?", "AssociationQ"}], "]"}]}], "]"}], ":=", 
  "\n", "  ", 
  RowBox[{"System`Private`ValidQ", "[", "p", "]"}]}], "\n", 
 RowBox[{
  RowBox[{"PackageFrameworkPackageQ", "[", "_", "]"}], ":=", 
  "False"}]}], "Code",ExpressionUUID->"c9291ec7-e00e-42fa-8cc8-8848c51219f2"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PropertyValue / SetProperty / RemoveProperty / PropertyList", \
"Subsubsection",ExpressionUUID->"a895b34f-b8b8-4b96-b3d1-b6e9ea39826e"],

Cell[BoxData[
 RowBox[{
  RowBox[{"If", "[", 
   RowBox[{
    RowBox[{"!", 
     RowBox[{"ValueQ", "@", "$PackagePropertyStore"}]}], ",", "\n", "  ", 
    RowBox[{
     RowBox[{"$PackagePropertyStore", " ", "=", " ", 
      RowBox[{
      "Language`NewExpressionStore", "[", "\"\<<PackageProperties>\>\"", 
       "]"}]}], ";"}]}], "\n", "  ", "]"}], ";"}]], "Code",ExpressionUUID->\
"e6f49356-42b6-47a7-9ee1-fc14ef97f197"],

Cell[CellGroupData[{

Cell["PPSPropContainsQ", "Subsubsubsubsection",ExpressionUUID->"9e80db1d-02a5-4a4c-b318-93da8bed6bba"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"PPSPropContainsQ", "[", "x_", "]"}], ":=", "\n", "\t", 
   RowBox[{"$PackagePropertyStore", "@", 
    RowBox[{"\"\<containsQ\>\"", "[", "x", "]"}]}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PPSPropContainsQ", "[", 
    RowBox[{"x_", ",", " ", "p_"}], "]"}], ":=", "\n", "\t", 
   RowBox[{"$PackagePropertyStore", "@", 
    RowBox[{"\"\<containsQ\>\"", "[", 
     RowBox[{"x", ",", " ", "p"}], "]"}]}]}], ";"}]}], "Code",ExpressionUUID->\
"bd5e1c81-9623-4e54-9297-6c8bd0d24869"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PPSPropGet", "Subsubsubsubsection",ExpressionUUID->"2bda8823-f279-4253-9bda-99140880fbdb"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"PPSPropGet", "[", 
    RowBox[{"x_", ",", " ", "p_String"}], "]"}], ":=", "\n", "\t", 
   RowBox[{"$PackagePropertyStore", "@", 
    RowBox[{"\"\<get\>\"", "[", 
     RowBox[{"x", ",", " ", "p"}], "]"}]}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PPSPropGet", "[", 
    RowBox[{"x_", ",", " ", 
     RowBox[{"{", "p_String", "}"}]}], "]"}], ":=", "\n", "  ", 
   RowBox[{"PPSPropGet", "[", 
    RowBox[{"x", ",", " ", "p"}], "]"}]}], ";"}]}], "Code",ExpressionUUID->\
"c0d7a9e0-9850-4384-aefa-13590b6e6833"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PPSPropSet", "Subsubsubsubsection",ExpressionUUID->"3d701d52-057e-4391-8bd1-4bc269f8f30c"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"PPSPropSet", "[", 
    RowBox[{"x_", ",", " ", "p_", ",", " ", "v_"}], "]"}], ":=", "\n", "\t", 
   RowBox[{"$PackagePropertyStore", "@", 
    RowBox[{"\"\<put\>\"", "[", 
     RowBox[{"x", ",", " ", "p", " ", ",", "v"}], "]"}]}]}], ";"}]], "Code",Ex\
pressionUUID->"18e5dde2-ea41-4404-87de-53188569ec9e"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PPSPropRemove", "Subsubsubsubsection",ExpressionUUID->"58ee9ebb-ace0-43d5-a928-05625e28d4bb"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"PPSPropRemove", "[", "x_", "]"}], ":=", "\n", "\t", 
   RowBox[{"$PackagePropertyStore", "@", 
    RowBox[{"\"\<remove\>\"", "[", "x", "]"}]}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PPSPropRemove", "[", 
    RowBox[{"x_", ",", " ", "p_"}], "]"}], ":=", "\n", "\t", 
   RowBox[{"$PackagePropertyStore", "@", 
    RowBox[{"\"\<remove\>\"", "[", 
     RowBox[{"x", ",", " ", "p"}], "]"}]}]}], ";"}]}], "Code",ExpressionUUID->\
"257f0e49-787e-4ce9-8b09-02c694930d3d"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PPSPropKeys", "Subsubsubsubsection",ExpressionUUID->"06c9c807-79ff-41eb-844a-7dc1dd77d4e7"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"PPSPropKeys", "[", "]"}], ":=", "\n", "\t", 
   RowBox[{"$PackagePropertyStore", "@", 
    RowBox[{"\"\<getKeys\>\"", "[", "]"}]}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PPSPropKeys", "[", "x_", "]"}], ":=", "\n", "\t", 
   RowBox[{"$PackagePropertyStore", "@", 
    RowBox[{"\"\<getKeys\>\"", "[", "x", "]"}]}]}], ";"}]}], "Code",Expression\
UUID->"d7cc08ed-31f7-4053-be81-fde8e76fdf0c"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PPSPropList", "Subsubsubsubsection",ExpressionUUID->"e887755f-e50d-4790-8ca2-0043a7ae817d"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"PPSPropList", "[", "]"}], ":=", "\n", "\t", 
   RowBox[{"$PackagePropertyStore", "@", 
    RowBox[{"\"\<listTable\>\"", "[", "]"}]}]}], ";"}]], "Code",ExpressionUUID\
->"8942df7d-b9cc-43be-a8a1-ae6597c6d803"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PPSCopyProperties", "Subsubsubsubsection",ExpressionUUID->"acd7cb7a-bb64-40b2-9ed7-5ef30d9603e2"],

Cell[BoxData[
 RowBox[{
  RowBox[{"PPSCopyProperties", "[", 
   RowBox[{"a_", ",", " ", "b_"}], "]"}], ":=", "\n", "  ", 
  RowBox[{"Do", "[", 
   RowBox[{
    RowBox[{"PPSPropSet", "[", 
     RowBox[{"b", ",", " ", 
      RowBox[{"PPSPropGet", "[", 
       RowBox[{"a", ",", " ", "k"}], "]"}]}], "]"}], ",", " ", 
    RowBox[{"{", 
     RowBox[{"k", ",", " ", 
      RowBox[{"PPSPropKeys", "[", "a", "]"}]}], "}"}]}], "]"}]}]], "Code",Expr\
essionUUID->"b1d3ed39-459a-46a3-960a-4983153c4c35"]
}, Open  ]],

Cell[CellGroupData[{

Cell["SetProperty", "Subsubsubsubsection",ExpressionUUID->"bca5139d-53cc-4b75-8c0b-fb8457598d75"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"$$hold", "~", "SetAttributes", "~", "HoldAllComplete"}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackageFrameworkPackageSetProperty", "[", 
    RowBox[{"pkg_", ",", " ", 
     RowBox[{"p_", "->", "v_"}]}], "]"}], ":=", "\n", "  ", 
   RowBox[{"PPSPropSet", "[", 
    RowBox[{"pkg", ",", " ", "p", ",", " ", "v"}], "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackageFrameworkPackageSetProperty", "[", 
    RowBox[{"pkg_", ",", " ", 
     RowBox[{"p_", ":>", "v_"}]}], "]"}], ":=", "\n", "  ", 
   RowBox[{"PPSPropSet", "[", 
    RowBox[{"pkg", ",", " ", 
     RowBox[{"p", "->", 
      RowBox[{"$$hold", "[", "v", "]"}]}]}], "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackageFrameworkPackageSetProperty", "[", 
    RowBox[{"pkg_", ",", " ", 
     RowBox[{
      RowBox[{"{", "p_String", "}"}], "->", "v_"}]}], "]"}], ":=", "\n", "  ", 
   RowBox[{"PPSPropSet", "[", 
    RowBox[{"pkg", ",", " ", "p", ",", " ", "v"}], "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackageFrameworkPackageSetProperty", "[", 
    RowBox[{"pkg_", ",", " ", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"p_String", ",", " ", "r__"}], "}"}], "->", "v_"}]}], "]"}], ":=",
    "\n", "  ", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"a", "=", 
       RowBox[{"PPSPropGet", "[", 
        RowBox[{"pkg", ",", " ", "p"}], "]"}]}], "}"}], ",", "\n", "    ", 
     RowBox[{
      RowBox[{
       RowBox[{"a", "[", 
        RowBox[{"[", "r", "]"}], "]"}], "=", "v"}], ";", "\n", "    ", 
      RowBox[{"PackageFrameworkPackageSetProperty", "[", 
       RowBox[{"pkg", ",", " ", 
        RowBox[{"p", "->", "a"}]}], "]"}], ";"}]}], "\n", "    ", "]"}]}], 
  ";"}]}], "Code",ExpressionUUID->"ae65c47d-1ea9-4fd7-aaa0-d2169e498e07"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"PackageFrameworkPackage", "/:", "\n", "  ", 
   RowBox[{"SetProperty", "[", 
    RowBox[{"pkg_PackageFrameworkPackage", ",", " ", 
     RowBox[{"p_", "->", "v_"}]}], "]"}], ":=", "\n", "\t  ", 
   RowBox[{"PPSPropSet", "[", 
    RowBox[{"pkg", ",", " ", "p", ",", " ", "v"}], "]"}]}], ";"}], "\n", 
 RowBox[{"PackageFrameworkPackage", "/:", "\n", "  ", 
  RowBox[{"SetProperty", "[", 
   RowBox[{"pkg_PackageFrameworkPackage", ",", " ", 
    RowBox[{"p_", ":>", "v_"}]}], "]"}], ":=", "\n", "\t  ", 
  RowBox[{"PPSPropSet", "[", 
   RowBox[{"pkg", ",", " ", "p", ",", " ", "v"}], "]"}]}]}], "Code",Expression\
UUID->"47114398-b0c1-48ef-b31c-8a226ea610b3"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PropertyValue", "Subsubsubsubsection",ExpressionUUID->"6bca32c4-ac85-420d-a045-2bf2cfd51f2c"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"PackageFrameworkPackagePropertyValue", "[", 
    RowBox[{"pkg_", ",", " ", "p_"}], "]"}], ":=", "\n", "  ", 
   RowBox[{"Replace", "[", "\n", "  \t  ", 
    RowBox[{
     RowBox[{"PPSPropGet", "[", 
      RowBox[{"pkg", ",", " ", "p"}], "]"}], ",", "\n", "  \t\t", 
     RowBox[{"{", "\n", "  \t\t\t", 
      RowBox[{
       RowBox[{"Null", ":>", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"!", 
           RowBox[{"PPSPropContainsQ", "[", 
            RowBox[{"pkg", ",", " ", "p"}], "]"}]}], ",", " ", 
          RowBox[{"Missing", "[", 
           RowBox[{"\"\<PropertyAbsent\>\"", ",", " ", "p"}], "]"}], ",", " ",
           "Null"}], "]"}]}], ",", "\n", "  \t\t\t", 
       RowBox[{
        RowBox[{"$$hold", "[", "v_", "]"}], ":>", "v"}]}], "\n", "  \t\t\t", 
      "}"}]}], "\n", "  \t\t", "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackageFrameworkPackagePropertyValue", "[", 
    RowBox[{"pkg_", ",", " ", 
     RowBox[{"{", "p_String", "}"}]}], "]"}], ":=", "\n", "  ", 
   RowBox[{"PackageFrameworkPackagePropertyValue", "[", 
    RowBox[{"pkg", ",", " ", "p"}], "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{"PackageFrameworkPackagePropertyValue", "[", 
   RowBox[{"pkg_", ",", " ", 
    RowBox[{"{", 
     RowBox[{"p_String", ",", " ", "r__"}], "}"}]}], "]"}], ":=", "\n", "  ", 
  
  RowBox[{"With", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"a", "=", 
      RowBox[{"PackageFrameworkPackagePropertyValue", "[", 
       RowBox[{"pkg", ",", " ", "p"}], "]"}]}], "}"}], ",", "\n", "    ", 
    RowBox[{"If", "[", 
     RowBox[{
      RowBox[{"a", "=!=", 
       RowBox[{"Missing", "[", 
        RowBox[{"\"\<PropertyAbsent\>\"", ",", " ", "p"}], "]"}]}], ",", "\n",
       "      ", 
      RowBox[{"a", "[", 
       RowBox[{"[", "r", "]"}], "]"}], ",", "\n", "      ", "a"}], "\n", 
     "      ", "]"}]}], "\n", "    ", "]"}]}]}], "Code",ExpressionUUID->\
"e3ff511b-a560-4eed-997e-b4eadf0f0dd1"],

Cell[BoxData[
 RowBox[{"PackageFrameworkPackage", "/:", "\n", "  ", 
  RowBox[{"PropertyValue", "[", 
   RowBox[{"pkg_PackageFrameworkPackage", ",", " ", "p_"}], "]"}], ":=", "\n",
   "  \t", 
  RowBox[{"PackageFrameworkPackagePropertyValue", "[", 
   RowBox[{"pkg", ",", " ", "p"}], "]"}]}]], "Code",ExpressionUUID->"d9a58647-\
3f0b-4c7e-9615-df8ad6a4ceae"]
}, Open  ]],

Cell[CellGroupData[{

Cell["RemoveProperty", "Subsubsubsubsection",ExpressionUUID->"41ef5c12-49db-47b5-9f87-831e90877895"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"PackageFrameworkPackageRemoveProperty", "[", 
    RowBox[{"pkg_PackageFrameworkPackage", ",", " ", "p_"}], "]"}], ":=", 
   "\n", "  ", 
   RowBox[{"Replace", "[", "\n", "    ", 
    RowBox[{
     RowBox[{"PPSPropRemove", "[", 
      RowBox[{"pkg", ",", " ", "p"}], "]"}], ",", "\n", "    ", 
     RowBox[{"{", "\n", "      ", 
      RowBox[{
       RowBox[{"$$hold", "[", "v_", "]"}], ":>", "v"}], "\n", "      ", 
      "}"}]}], "\n", "    ", "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{"PackageFrameworkPackageRemoveProperty", "[", 
   RowBox[{"pkg_PackageFrameworkPackage", ",", " ", 
    RowBox[{"{", 
     RowBox[{"p_String", ",", " ", "___"}], "}"}]}], "]"}], ":=", "\n", "  ", 
  
  RowBox[{"PackageFrameworkPackageRemoveProperty", "[", 
   RowBox[{"pkg", ",", " ", "p"}], "]"}]}]}], "Code",ExpressionUUID->\
"4918c062-877b-4278-b131-e006e77ce6f2"],

Cell[BoxData[
 RowBox[{
  RowBox[{"PackageFrameworkPackage", "/:", "\n", "  ", 
   RowBox[{"RemoveProperty", "[", 
    RowBox[{"pkg_PackageFrameworkPackage", ",", " ", "p_"}], "]"}], ":=", 
   "\n", "    ", 
   RowBox[{"PackageFrameworkPackageRemoveProperty", "[", 
    RowBox[{"pkg", ",", " ", "p"}], "]"}]}], ";"}]], "Code",ExpressionUUID->\
"f4d9b1ea-06ac-458d-a94c-bb6e3fefd31f"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PropertyList", "Subsubsubsubsection",ExpressionUUID->"dd213e71-a812-4a59-b16b-59c6eb834ade"],

Cell[BoxData[
 RowBox[{
  RowBox[{"PackageFrameworkPackagePropertyList", "[", "pkg_", "]"}], ":=", 
  "\n", "  ", 
  RowBox[{"Replace", "[", 
   RowBox[{
    RowBox[{"PPSPropKeys", "[", "pkg", "]"}], ",", " ", 
    RowBox[{"Null", "->", 
     RowBox[{"Missing", "[", 
      RowBox[{"\"\<PackageAbsent\>\"", ",", " ", "pkg"}], "]"}]}]}], 
   "]"}]}]], "Code",ExpressionUUID->"5c8a31e8-f02d-4230-a8fa-242e32b286c3"],

Cell[BoxData[
 RowBox[{
  RowBox[{"PackageFrameworkPackage", "/:", "\n", "  ", 
   RowBox[{"PropertyList", "[", "pkg_PackageFrameworkPackage", "]"}], ":=", 
   "\n", "    ", 
   RowBox[{"PackageFrameworkPackagePropertyList", "[", "pkg", "]"}]}], 
  ";"}]], "Code",ExpressionUUID->"22f49ed2-303f-494e-a58d-d83edc52bc9d"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["PackageFrameworkPackageOptionValue", "Subsubsection",ExpressionUUID->"241444e4-28fc-4cdf-b61c-3d3e638d17e4"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"PackageFrameworkPackageOptionValue", "[", "\n", "  ", 
    RowBox[{
     RowBox[{"pkg", ":", 
      RowBox[{
       RowBox[{"PackageFrameworkPackage", "[", "a_Association", "]"}], "?", 
       "PackageFrameworkPackageQ"}]}], ",", " ", "\n", "  ", 
     RowBox[{"keys", ":", "__String"}]}], "\n", "  ", "]"}], ":=", "\n", "  ", 
   RowBox[{"Fold", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"Lookup", "[", 
       RowBox[{"#", ",", " ", "#2", ",", " ", 
        RowBox[{"Return", "[", 
         RowBox[{
          RowBox[{"Missing", "[", 
           RowBox[{"\"\<KeyAbsent\>\"", ",", " ", "#2"}], "]"}], ",", " ", 
          "Fold"}], "]"}]}], "]"}], "&"}], ",", " ", "a", ",", " ", 
     RowBox[{"{", "keys", "}"}]}], "]"}]}], ";"}]], "Code",ExpressionUUID->\
"d3a6f2fc-e26c-4de1-9af8-f04622c8456b"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PackageFrameworkPackageSetOptions", "Subsubsection",ExpressionUUID->"7c0682cb-f1c0-426d-8715-4185e9be9c57"],

Cell[BoxData[
 RowBox[{
  RowBox[{"PackageFrameworkPackageSetOptions", "[", "\n", "  ", 
   RowBox[{
    RowBox[{"pkg", ":", 
     RowBox[{
      RowBox[{"PackageFrameworkPackage", "[", "a_Association", "]"}], "?", 
      "PackageFrameworkPackageQ"}]}], ",", " ", "\n", "  ", 
    RowBox[{"ops", ":", 
     RowBox[{"(", "\n", "    ", 
      RowBox[{
       RowBox[{
        RowBox[{"(", 
         RowBox[{"Rule", "|", "RuleDelayed"}], ")"}], "[", 
        RowBox[{
         RowBox[{"_String", "|", 
          RowBox[{"{", "__String", "}"}]}], ",", " ", "_"}], "]"}], "|", "\n",
        "    ", 
       RowBox[{"{", "\n", "      ", 
        RowBox[{
         RowBox[{
          RowBox[{"(", 
           RowBox[{"Rule", "|", "RuleDelayed"}], ")"}], "[", 
          RowBox[{
           RowBox[{"_String", "|", 
            RowBox[{"{", "__String", "}"}]}], ",", " ", "_"}], "]"}], ".."}], 
        "\n", "      ", "}"}]}], "\n", "    ", ")"}]}]}], "\n", "  ", "]"}], ":=",
   "\n", "  ", 
  RowBox[{"With", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"aa", "=", 
      RowBox[{"ReplacePart", "[", 
       RowBox[{"a", ",", " ", "ops"}], "]"}]}], "}"}], ",", "\n", "    ", 
    RowBox[{"With", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"new", "=", 
        RowBox[{"System`Private`SetValid", "@", 
         RowBox[{"Unevaluated", "@", 
          RowBox[{"PackageFrameworkPackage", "[", "aa", "]"}]}]}]}], "}"}], 
      ",", "\n", "      ", 
      RowBox[{
       RowBox[{"PPSCopyProperties", "[", 
        RowBox[{"pkg", ",", " ", "new"}], "]"}], ";", "\n", "      ", 
       "new"}]}], "\n", "      ", "]"}]}], "\n", "    ", "]"}]}]], "Code",Expr\
essionUUID->"3f5c007d-f512-4a74-af61-031a9bdc70d4"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"p_PackageFrameworkPackage", "?", "PackageFrameworkPackageQ"}], 
    "[", 
    RowBox[{"keys", ":", "__String"}], "]"}], ":=", "\n", "  ", 
   RowBox[{"PackageFrameworkPackageOptionValue", "[", 
    RowBox[{"p", ",", " ", "keys"}], "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"p_PackageFrameworkPackage", "?", "PackageFrameworkPackageQ"}], 
    "[", 
    RowBox[{"keys", ":", "__String"}], "]"}], ":=", "\n", "  ", 
   RowBox[{"PackageFrameworkPackageOptionValue", "[", 
    RowBox[{"p", ",", " ", "keys"}], "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{"PackageFrameworkPackage", "/:", "\n", "  ", 
   RowBox[{"(", 
    RowBox[{"Set", "[", 
     RowBox[{
      RowBox[{
       RowBox[{
       "pkg_PackageFrameworkPackage", "?", "PackageFrameworkPackageQ"}], "[", 
       
       RowBox[{"keys", ":", "__String"}], "]"}], ",", " ", "value_"}], "]"}], 
    ")"}], ":=", "\n", "    ", 
   RowBox[{"PackageFrameworkPackageSetOptions", "[", 
    RowBox[{"pkg", ",", " ", 
     RowBox[{
      RowBox[{"{", "keys", "}"}], "->", "value"}]}], "]"}]}], ";"}]}], "Code",\
ExpressionUUID->"174c6069-4152-4088-b2c4-feb082d2ab69"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PackageFrameworkPackageMutate", "Subsubsection",ExpressionUUID->"0c2d4030-8597-4c2e-ad9f-bb76560cb301"],

Cell[BoxData[{
 RowBox[{"PackageFrameworkPackageMutate", "//", "ClearAll"}], "\n", 
 RowBox[{"PackageFrameworkPackageMutate", "~", "SetAttributes", "~", 
  "HoldAllComplete"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackageFrameworkPackageMutate", "[", "\n", "  ", 
    RowBox[{
     RowBox[{
      RowBox[{"s_Symbol", "?", "PackageFrameworkPackageQ"}], "[", 
      RowBox[{"keys", ":", "__String"}], "]"}], "=", "value_"}], "\n", "  ", 
    "]"}], ":=", "\n", "  ", 
   RowBox[{"(", 
    RowBox[{"s", "=", 
     RowBox[{"PackageFrameworkPackageSetOptions", "[", 
      RowBox[{"s", ",", " ", 
       RowBox[{
        RowBox[{"{", "keys", "}"}], "->", "value"}]}], "]"}]}], ")"}]}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{"PackageFrameworkPackageMutate", "[", "___", "]"}], ":=", 
  "Language`MutationFallthrough"}]}], "Code",ExpressionUUID->"25c63487-a9f7-\
4866-b166-75439bf89066"]
}, Open  ]],

Cell[CellGroupData[{

Cell["CreatePackageSymbolInterface", "Subsubsection",ExpressionUUID->"95727a02-534b-4239-af29-5d272786be68"],

Cell["\<\
The name of the method is stupidly long, of course, but the basic idea is to \
make it possible to work really easily with the $CurrentPackage since that's \
the only one we'll ever really care about at any given moment in time

We'll provide an accessor method that can be bound dynamically to the value \
of the symbol so that it can be applied to $CurrentPackage and then we'll \
also provide a normal setter-interface that will have to work through \
SetProperty and friends...I think. Or I guess that could be a default too.\
\>", "Text",ExpressionUUID->"0af2edad-3d97-46fa-8c50-f0d2639d09c8"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"SetAttributes", "[", 
   RowBox[{"CreatePackageSymbolInterface", ",", " ", "HoldFirst"}], "]"}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"CreatePackageSymbolInterface", "::", "doc"}], "=", 
   "\"\<\nBinds the PropertyValue/SetProperty interface to the specified \
symbol and uses the specified string \\\nas the key.\n\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"CreatePackageSymbolInterface", "[", "\n", "  ", 
    RowBox[{
    "symbol_", ",", " ", "\n", "  ", "setting_String", ",", "\n", "  ", 
     RowBox[{"accessor_:", "None"}], ",", "\n", "  ", 
     RowBox[{"setter_:", "None"}]}], "\n", "  ", "]"}], ":=", 
   RowBox[{"(", "\n", "  ", 
    RowBox[{
     RowBox[{"Unprotect", "[", 
      RowBox[{"Unevaluated", "@", "symbol"}], "]"}], ";", "\n", "  ", 
     RowBox[{"ClearAll", "[", 
      RowBox[{"Unevaluated", "@", "symbol"}], "]"}], ";", "\n", "  ", 
     RowBox[{"With", "[", "\n", "    ", 
      RowBox[{
       RowBox[{"{", "\n", "      ", 
        RowBox[{
         RowBox[{"a", " ", "=", " ", 
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{"accessor", " ", "===", " ", "None"}], ",", " ", 
            "PropertyValue", ",", " ", "accessor"}], "]"}]}], ",", "\n", 
         "      ", 
         RowBox[{"s", " ", "=", " ", 
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{"setter", " ", "===", " ", "None"}], ",", " ", 
            "SetProperty", ",", " ", "setter"}], "]"}]}]}], "\n", "      ", 
        "}"}], ",", "\n", "    ", 
       RowBox[{
        RowBox[{"symbol", " ", ":=", " ", 
         RowBox[{"a", "[", 
          RowBox[{"$CurrentPackage", ",", " ", "setting"}], "]"}]}], ";", 
        "\n", "    ", 
        RowBox[{"symbol", " ", "/:", " ", 
         RowBox[{"Set", "[", 
          RowBox[{"symbol", ",", " ", "value_"}], "]"}], ":=", "\n", "      ", 
         RowBox[{"s", "[", 
          RowBox[{"$CurrentPackage", ",", " ", 
           RowBox[{"setting", "->", "value"}]}], "]"}]}], ";", "\n", "    ", 
        RowBox[{"symbol", " ", "/:", " ", 
         RowBox[{"Set", "[", 
          RowBox[{
           RowBox[{"symbol", "[", "k__", "]"}], ",", " ", "value_"}], "]"}], ":=",
          "\n", "      ", 
         RowBox[{"s", "[", 
          RowBox[{"$CurrentPackage", ",", " ", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"setting", ",", " ", "k"}], "}"}], "->", "value"}]}], 
          "]"}]}], ";", "\n", "    ", 
        RowBox[{"symbol", " ", "/:", " ", 
         RowBox[{"AppendTo", "[", 
          RowBox[{"symbol", ",", " ", "value_"}], "]"}], ":=", "\n", "      ", 
         RowBox[{"s", "[", 
          RowBox[{"$CurrentPackage", ",", " ", 
           RowBox[{"setting", "->", 
            RowBox[{"Append", "[", 
             RowBox[{
              RowBox[{"a", "[", "$CurrentPackage", "]"}], ",", " ", "value"}],
              "]"}]}]}], "]"}]}], ";", "\n", "    ", 
        RowBox[{"symbol", " ", "/:", " ", 
         RowBox[{"AssociateTo", "[", 
          RowBox[{"symbol", ",", " ", 
           RowBox[{"key_", "->", "value_"}]}], "]"}], ":=", "\n", "      ", 
         RowBox[{"s", "[", 
          RowBox[{"$CurrentPackage", ",", " ", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"setting", ",", " ", "key"}], "}"}], "->", "value"}]}], 
          "]"}]}], ";"}]}], "\n", "    ", "]"}], ";", "\n", "  ", 
     RowBox[{"Protect", "[", "symbol", "]"}], ";"}], "\n", "  ", ")"}]}], 
  ";"}]}], "Code",ExpressionUUID->"dd09f829-6bd2-42aa-9f21-e74746cd65fd"]
}, Open  ]],

Cell[CellGroupData[{

Cell["BindPackageMethod", "Subsubsection",ExpressionUUID->"cedc9130-8dee-4599-a78d-ba5b346a781b"],

Cell["\<\
Just makes it so that the PackageFrameworkPackage can make use of down-value \
type methods. We might want to add to it later, but for the moment it makes \
it very clean and clear to work with\
\>", "Text",ExpressionUUID->"07d330bf-f761-4a5e-8521-38e5fd653f0c"],

Cell[BoxData[
 RowBox[{
  RowBox[{"BindPackageMethod", "[", 
   RowBox[{"name_", ",", " ", "method_"}], "]"}], ":=", "\n", "  ", 
  RowBox[{"(", "\n", "    ", 
   RowBox[{
    RowBox[{
     RowBox[{"(", 
      RowBox[{"pkg", ":", 
       RowBox[{
       "_PackageFrameworkPackage", "?", "PackageFrameworkPackageQ"}]}], ")"}],
      "@", 
     RowBox[{"name", "[", "args___", "]"}]}], ":=", 
    RowBox[{"method", "[", 
     RowBox[{"pkg", ",", " ", "args"}], "]"}]}], "\n", "    ", 
   ")"}]}]], "Code",ExpressionUUID->"c6d51440-06ce-4850-ae25-fae674914e89"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Load Package", "Subsection",ExpressionUUID->"3608f823-eec3-42e1-b5dc-6262037d0ecc"],

Cell[CellGroupData[{

Cell["LoadPackage", "Subsubsection",ExpressionUUID->"63920248-86bc-422e-aba1-622650e5f25a"],

Cell["\<\
This is the heart of the system. Everything in this part of the package is \
basically in service to this method.\
\>", "Text",ExpressionUUID->"50a98d42-4977-4590-9396-811b24df5e59"],

Cell["\<\
Things like symbol coloring and autocompletions can come in the full version \
of the package. The redux version will leave them out.\
\>", "Text",ExpressionUUID->"3daa71bf-356c-4526-8bdf-d06d1e7ffde7"],

Cell[BoxData[{
 RowBox[{"ClearAll", "[", "LoadPackage", "]"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"LoadPackage", "::", "doc"}], "=", "\"\<\n\n\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"LoadPackage", "::", "npkg"}], "=", 
   "\"\<`` is not a valid package\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"Options", "[", "LoadPackage", "]"}], ":=", "\n", "  ", 
   RowBox[{"{", "\n", "    ", 
    RowBox[{
     RowBox[{"\"\<Reload\>\"", "->", "False"}], ",", "\n", "    ", 
     RowBox[{"\"\<PreloadHandler\>\"", "->", "None"}], ",", "\n", "    ", 
     RowBox[{"\"\<PostloadHandler\>\"", "->", "None"}], ",", "\n", "    ", 
     RowBox[{"\"\<Hook\>\"", "->", "None"}]}], "\n", "    ", "}"}]}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"LoadPackage", "[", "\n", "  ", 
    RowBox[{"pkg_PackageFrameworkPackage", ",", " ", "\n", "  ", 
     RowBox[{"parent", ":", 
      RowBox[{"_PackageFrameworkPackage", "|", "Automatic", "|", "None"}], 
      ":", "None"}], ",", "\n", "  ", 
     RowBox[{"ops", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "\n", "  ", "]"}], ":=", "\n",
    "  ", 
   RowBox[{"With", "[", "\n", "    ", 
    RowBox[{
     RowBox[{"{", "\n", "      ", 
      RowBox[{
       RowBox[{"$Name", "=", 
        RowBox[{"PackageName", "[", "pkg", "]"}]}], ",", "\n", "      ", 
       RowBox[{"pre", "=", 
        RowBox[{"OptionValue", "[", "\"\<PreloadHandler\>\"", "]"}]}], ",", 
       "\n", "      ", 
       RowBox[{"post", "=", 
        RowBox[{"OptionValue", "[", "\"\<PostloadHandler\>\"", "]"}]}], ",", 
       "\n", "      ", 
       RowBox[{"hook", "=", 
        RowBox[{"OptionValue", "[", "\"\<Hook\>\"", "]"}]}], ",", "\n", 
       "      ", 
       RowBox[{"reload", "=", 
        RowBox[{"TrueQ", "@", 
         RowBox[{"OptionValue", "[", "\"\<Reload\>\"", "]"}]}]}]}], "\n", 
      "      ", "}"}], ",", "\n", "    ", 
     RowBox[{"Block", "[", "\n", "      ", 
      RowBox[{
       RowBox[{"{", "\n", "        ", 
        RowBox[{
         RowBox[{"$PackageLoadStack", " ", "=", " ", "\n", "          ", 
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{"!", 
             RowBox[{"ListQ", "@", "$PackageLoadStack"}]}], ",", " ", 
            RowBox[{"{", "}"}], ",", " ", 
            RowBox[{"{", 
             RowBox[{"pkg", ",", " ", "$PackageLoadStack"}], "}"}]}], "]"}]}],
          ",", "\n", "        ", 
         RowBox[{"$ParentPackage", "=", "\n", "          ", 
          RowBox[{"Replace", "[", "\n", "            ", 
           RowBox[{"parent", ",", "\n", "            ", 
            RowBox[{"Automatic", ":>", "\n", "              ", 
             RowBox[{"If", "[", 
              RowBox[{
               RowBox[{
                RowBox[{"PackageLoadingMode", "[", "pkg", "]"}], "===", 
                "\"\<Dependency\>\""}], ",", " ", "\n", "                ", 
               "$CurrentPackage", ",", " ", "\n", "                ", 
               "None"}], "\n", "                ", "]"}]}]}], "\n", 
           "            ", "]"}]}], ",", "\n", "        ", 
         RowBox[{"$CurrentPackage", "=", "pkg"}], ",", "\n", "        ", 
         "$ParentContext", ",", "\n", "        ", "$PackageContext", ",", 
         "\n", "        ", "$PackageFrameworkSubcontext", ",", "\n", 
         "        ", 
         RowBox[{"$DependencyLoad", "=", 
          RowBox[{
           RowBox[{"PackageLoadingMode", "[", "pkg", "]"}], "===", 
           "\"\<Dependency\>\""}]}]}], "\n", "        ", "}"}], ",", "\n", 
       "      ", 
       RowBox[{"(*", " ", 
        RowBox[{
        "this", " ", "has", " ", "to", " ", "be", " ", "set", " ", "first"}], 
        " ", "*)"}], "\n", "      ", 
       RowBox[{
        RowBox[{"$ParentContext", " ", "=", " ", "\n", "        ", 
         RowBox[{
          RowBox[{"Replace", "[", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"l_", ",", " ", "___"}], "}"}], ":>", "l"}], "]"}], "@", 
          "\n", "          ", 
          RowBox[{"Replace", "[", 
           RowBox[{"$ParentPackage", ",", " ", "\n", "            ", 
            RowBox[{"{", "\n", "              ", 
             RowBox[{
              RowBox[{"None", "->", "\"\<\>\""}], ",", "\n", "              ", 
              RowBox[{"e_", ":>", 
               RowBox[{"PackageContext", "[", 
                RowBox[{"e", ",", " ", "$ParentContext"}], "]"}]}]}], "\n", 
             "              ", "}"}]}], "\n", "            ", "]"}]}]}], ";", 
        "\n", "      ", 
        RowBox[{"$PackageContext", " ", "=", "\n", "        ", 
         RowBox[{"PackageContext", "[", 
          RowBox[{"pkg", ",", " ", "$ParentContext"}], "]"}]}], ";", "\n", 
        "      ", 
        RowBox[{"$PackageFrameworkSubcontext", " ", "=", "\n", "        ", 
         RowBox[{
         "$PackageContext", " ", "<>", " ", "\"\<PackageScope`\>\""}]}], ";", 
        "\n", "      ", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"reload", " ", "||", " ", 
           RowBox[{"!", 
            RowBox[{"KeyExistsQ", "[", 
             RowBox[{
             "$PackageFrameworkPackages", ",", " ", "$PackageContext"}], 
             "]"}]}]}], ",", "\n", "      ", "\n", "        ", 
          RowBox[{
           RowBox[{
            RowBox[{
            "$PackageFrameworkPackages", "[", "$PackageContext", "]"}], "=", 
            "$CurrentPackage"}], ";", "\n", "        ", 
           RowBox[{"SetProperty", "[", 
            RowBox[{"$CurrentPackage", ",", " ", "\n", "          ", 
             RowBox[{"\"\<TopLevelLoad\>\"", "->", "\n", "            ", 
              RowBox[{"If", "[", 
               RowBox[{
               "$DependencyLoad", ",", "\n", "              ", "False", ",", 
                "\n", "              ", 
                RowBox[{"MemberQ", "[", 
                 RowBox[{"$ContextPath", ",", " ", "\"\<Global`\>\""}], 
                 "]"}]}], "\n", "              ", "]"}]}]}], "\n", 
            "          ", "]"}], ";", "\n", "        ", 
           RowBox[{"SetProperty", "[", 
            RowBox[{"pkg", ",", " ", 
             RowBox[{"(*", " ", 
              RowBox[{
               RowBox[{
                RowBox[{
                "should", " ", "I", " ", "use", " ", "the", " ", "current", 
                 " ", "version", " ", "of", " ", "PackageContexts", " ", 
                 "here"}], "..."}], "?"}], " ", "*)"}], "\n", "          ", 
             RowBox[{"\"\<Contexts\>\"", "->", 
              RowBox[{"{", 
               RowBox[{
               "$PackageContext", ",", " ", "$PackageFrameworkSubcontext"}], 
               "}"}]}]}], "\n", "          ", "]"}], ";", "\n", "        ", 
           RowBox[{"SetProperty", "[", 
            RowBox[{"pkg", ",", "\n", "          ", 
             RowBox[{"\"\<ParentContext\>\"", "->", "$ParentContext"}]}], 
            "\n", "          ", "]"}], ";", "\n", "          ", "\n", 
           "        ", 
           RowBox[{
            RowBox[{"Replace", "[", 
             RowBox[{"hook", ",", " ", 
              RowBox[{"None", "->", 
               RowBox[{"(", 
                RowBox[{"#2", "&"}], ")"}]}]}], "]"}], "[", "\n", 
            "          ", 
            RowBox[{"pkg", ",", "\n", "          ", 
             RowBox[{
             "Internal`WithLocalSettings", "[", "\n", "            ", 
              RowBox[{
               RowBox[{
                RowBox[{"BeginPackage", "[", "$PackageContext", "]"}], ";", 
                "\n", "            ", 
                RowBox[{"PrependTo", "[", 
                 RowBox[{
                 "$ContextPath", ",", " ", "$PackageFrameworkSubcontext"}], 
                 "]"}], ";", "\n", "            ", 
                RowBox[{"pre", "[", "pkg", "]"}]}], ",", "\n", "            ",
                "\n", "            ", 
               RowBox[{
                RowBox[{"PackageConfigurePackageHelpers", "[", "pkg", "]"}], 
                ";", "\n", "            ", 
                RowBox[{"PackageFrameworkPackageLoad", "[", "pkg", "]"}], ";",
                 "\n", "            ", 
                RowBox[{"PackageCompleteLoadProcess", "[", "pkg", "]"}]}], 
               ",", "\n", "            ", "\n", "            ", 
               RowBox[{
                RowBox[{"post", "[", "pkg", "]"}], ";", "\n", "            ", 
                
                RowBox[{"EndPackage", "[", "]"}], ";"}]}], "\n", 
              "            ", "]"}]}], "\n", "          ", "]"}]}]}], "\n", 
         "        ", "]"}]}]}], "\n", "      ", "]"}]}], "\n", "    ", 
    "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"LoadPackage", "[", 
    RowBox[{
     RowBox[{"d_String", "?", "DirectoryQ"}], ",", " ", 
     RowBox[{"ops", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "]"}], ":=", "\n", "  ", 
   RowBox[{"With", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"p", "=", 
       RowBox[{"PackageFrameworkPackage", "[", "d", "]"}]}], "}"}], ",", "\n",
      "    ", 
     RowBox[{
      RowBox[{"LoadPackage", "[", "\n", "      ", 
       RowBox[{"p", ",", " ", "\n", "      ", "ops"}], "\n", "      ", "]"}], 
      "/;", 
      RowBox[{"PackageFrameworkPackageQ", "[", "p", "]"}]}]}], "\n", "    ", 
    "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"LoadPackage", "[", "\n", "  ", 
    RowBox[{"ops", ":", 
     RowBox[{"OptionsPattern", "[", "]"}]}], "\n", "  ", "]"}], ":=", "\n", 
   "  ", 
   RowBox[{"With", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"d", "=", 
       RowBox[{"DirectoryName", "@", "$InputFileName"}]}], "}"}], ",", "\n", 
     "    ", 
     RowBox[{
      RowBox[{"With", "[", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{"p", "=", 
          RowBox[{"PackageFrameworkPackage", "[", "d", "]"}]}], "}"}], ",", 
        "\n", "      ", 
        RowBox[{
         RowBox[{"LoadPackage", "[", "\n", "        ", 
          RowBox[{"p", ",", " ", "\n", "        ", "ops"}], "\n", "        ", 
          "]"}], "/;", 
         RowBox[{"PackageFrameworkPackageQ", "[", "p", "]"}]}]}], "\n", 
       "      ", "]"}], "/;", 
      RowBox[{
       RowBox[{"StringLength", "[", "d", "]"}], ">", "0"}]}]}], "\n", "    ", 
    "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"LoadPackage", "[", 
     RowBox[{"a_", ",", " ", "___"}], "]"}], "/;", 
    RowBox[{"(", 
     RowBox[{"Message", "[", 
      RowBox[{
       RowBox[{"LoadPackage", "::", "npkg"}], ",", " ", "a"}], "]"}], ")"}]}],
    ":=", "Null"}], ";"}]}], "Code",ExpressionUUID->"9d4fd02d-4056-468a-9286-\
3a9ca05aae4f"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Context / File Management", "Subsection",ExpressionUUID->"663a262e-2ee9-4681-b0b6-60e2fec84de8"],

Cell[CellGroupData[{

Cell["PackageName", "Subsubsection",ExpressionUUID->"46b0dd82-f1a8-4ff0-8c33-c3a2a2212ffc"],

Cell[BoxData[
 RowBox[{"BindPackageMethod", "[", 
  RowBox[{"\"\<Name\>\"", ",", " ", "PackageName"}], "]"}]], "Code",Expression\
UUID->"9cf82531-e7c5-4c07-9ab4-14f8ed189292"],

Cell[BoxData[{
 RowBox[{"PackageName", "//", "Clear"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackageName", "[", "pkg_PackageFrameworkPackage", "]"}], ":=", 
   "\n", "  ", 
   RowBox[{"pkg", "[", "\"\<Name\>\"", "]"}]}], ";"}]}], "Code",ExpressionUUID\
->"ebae7247-7a64-4368-9884-d41f04966b19"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PackageRootContext", "Subsubsection",ExpressionUUID->"504f790c-b2b7-4003-b1f4-11a27c782702"],

Cell[BoxData[{
 RowBox[{"PackageRootContext", "//", "Clear"}], "\n", 
 RowBox[{
  RowBox[{"PackageRootContext", "[", "pkg_PackageFrameworkPackage", "]"}], ":=",
   "\n", "  ", 
  RowBox[{"Replace", "[", 
   RowBox[{
    RowBox[{"PackageFrameworkPackageOptionValue", "[", 
     RowBox[{"pkg", ",", " ", "\"\<Context\>\""}], "]"}], ",", " ", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"p_", ",", " ", "___"}], "}"}], ":>", "p"}]}], "]"}]}]}], "Code",\
ExpressionUUID->"bb35a9f5-27a2-4a33-a89c-d03e8b3ddf2a"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PackageContext", "Subsubsection",ExpressionUUID->"9529be6e-22ff-4e8a-bcc2-d7232657ef3a"],

Cell[BoxData[
 RowBox[{"BindPackageMethod", "[", 
  RowBox[{"\"\<Context\>\"", ",", " ", "PackageContext"}], "]"}]], "Code",Expr\
essionUUID->"456b1da3-32d3-4557-98d6-4b9d16f92f69"],

Cell[BoxData[{
 RowBox[{"PackageContext", "//", "Clear"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackageContext", "[", 
    RowBox[{"pkg_PackageFrameworkPackage", ",", " ", "root_String"}], "]"}], ":=",
    "\n", "  ", 
   RowBox[{"root", "<>", 
    RowBox[{"PackageRootContext", "[", "pkg", "]"}]}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{"PackageContext", "[", 
   RowBox[{"pkg_PackageFrameworkPackage", ",", " ", 
    RowBox[{"Optional", "[", 
     RowBox[{"Automatic", ",", " ", "Automatic"}], "]"}]}], "]"}], ":=", "\n",
   "  ", 
  RowBox[{"PackageContext", "[", 
   RowBox[{"pkg", ",", " ", 
    RowBox[{"PropertyValue", "[", 
     RowBox[{"pkg", ",", " ", "\"\<ParentContext\>\""}], "]"}]}], 
   "]"}]}]}], "Code",ExpressionUUID->"1d4f6b15-00d4-4200-8438-a5801541d7f4"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PackageContexts", "Subsubsection",ExpressionUUID->"14d65746-2ab2-4afe-ae8a-990b9d240457"],

Cell[BoxData[
 RowBox[{"BindPackageMethod", "[", 
  RowBox[{"\"\<Contexts\>\"", ",", " ", "PackageContexts"}], "]"}]], "Code",Ex\
pressionUUID->"00c2d3ad-b029-41ad-a8e0-f17c94282776"],

Cell[BoxData[
 RowBox[{"(*", 
  RowBox[{
   RowBox[{"CreatePackageSymbolInterface", "[", 
    RowBox[{"$PackageContexts", ",", " ", "\"\<Contexts\>\"", ",", " ", 
     RowBox[{
      RowBox[{"PackageContexts", "[", "#", "]"}], "&"}]}], "]"}], ";"}], 
  "*)"}]], "Code",ExpressionUUID->"950ba1c7-4460-48c1-adf2-bfce7790eb11"],

Cell[BoxData[
 RowBox[{
  RowBox[{"PackageContexts", "[", "pkg_", "]"}], ":=", "\n", "  ", 
  RowBox[{"Replace", "[", "\n", "    ", 
   RowBox[{
    RowBox[{"PropertyValue", "[", 
     RowBox[{"pkg", ",", " ", "\"\<Contexts\>\""}], "]"}], ",", "\n", "    ", 
    
    RowBox[{"_Missing", ":>", 
     RowBox[{"(", 
      RowBox[{"SetProperty", "[", 
       RowBox[{"pkg", ",", " ", 
        RowBox[{"\"\<Contexts\>\"", "->", 
         RowBox[{"{", "}"}]}]}], "]"}], ")"}]}]}], "\n", "    ", 
   "]"}]}]], "Code",ExpressionUUID->"bb88eb8a-2e7b-4680-8c21-96be19bce2b8"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PackageAddContexts", "Subsubsection",ExpressionUUID->"918c8e5c-125d-4c84-abde-c97675355e96"],

Cell[BoxData[
 RowBox[{
  RowBox[{"PackageAddContexts", "[", 
   RowBox[{"pkg_", ",", " ", "conts_"}], "]"}], ":=", "\n", "  ", 
  RowBox[{"SetProperty", "[", 
   RowBox[{"pkg", ",", " ", 
    RowBox[{"\"\<Contexts\>\"", "->", 
     RowBox[{"DeleteDuplicates", "@", 
      RowBox[{"Flatten", "@", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"PackageContexts", "[", "pkg", "]"}], ",", " ", "conts"}], 
        "}"}]}]}]}]}], "]"}]}]], "Code",ExpressionUUID->"e6ae6e55-e172-423b-\
b065-7528bf3423b6"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PackageContextMapping", "Subsubsection",ExpressionUUID->"78f85e70-be63-4277-a8a1-1407e74d6270"],

Cell[BoxData[
 RowBox[{
  RowBox[{"PackageContextMapping", "[", "pkg_PackageFrameworkPackage", "]"}], 
  ":=", "\n", "  ", 
  RowBox[{"pkg", "[", "\"\<ContextMap\>\"", "]"}]}]], "Code",ExpressionUUID->\
"6698991c-0e1e-4420-9d7e-d4713c849dbc"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PackageInitialContextPath", "Subsubsection",ExpressionUUID->"7ac80d14-a1e4-4390-a3b7-7eedfcefe194"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"PackageInitialContextPath", "::", "doc"}], "=", 
   "\"\<\nPackageInitialContextPath[pkg]\n\nConverts the package layout into \
a set of contexts that will be global to the package\nChecks first against \
the contexts that the package asks to expose\n\nWe assumed originally that \
$Context would be the lookup root for the \nmain package itself, but this \
assumption can be relaxed at this point\nAs long as PackageContext[pkg] \
provides the fully-qualified name of the package \nwe should be able to very \
normally manage the dependency packages\n\nThe second core assumption was \
that the directory structure would directly\nmap onto the \
$PackageContextPath, but this might not be how we want to do it\n\nThe only \
workable alternative to this is to force each directory to map onto a\n\
context but provide a mapping that would allow us to revise the used context\n\
at resolution time\n\ne.g. We'd have Pkg/Sub/Subsub \[Rule] \
PkgContext`Sub`Subsub` but then we \nhave a post-processing map that takes \
PkgContext`Sub`Subsub` \[Rule] PkgContext`NewPath`\n\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{"PackageInitialContextPath", "[", 
   RowBox[{"pkg_", ",", " ", 
    RowBox[{"includeOrig", ":", 
     RowBox[{"True", "|", "False"}], ":", "True"}]}], "]"}], ":=", "\n", "  ", 
  RowBox[{"Module", "[", "\n", "    ", 
   RowBox[{
    RowBox[{"{", "\n", "      ", 
     RowBox[{"packages", ",", "\n", "      ", 
      RowBox[{"packageRoot", "=", 
       RowBox[{"PackageRoot", "[", "pkg", "]"}]}], ",", "\n", "      ", 
      RowBox[{"packagePackageRoot", " ", "=", " ", 
       RowBox[{"PackageRoot", "[", 
        RowBox[{"pkg", ",", " ", "\"\<Packages\>\""}], "]"}]}], ",", " ", 
      "\n", "      ", 
      RowBox[{"(*", " ", 
       RowBox[{
        RowBox[{
        "I", " ", "regret", " ", "this", " ", "name", " ", "already"}], 
        "..."}], " ", "*)"}], "\n", "      ", 
      RowBox[{"name", " ", "=", " ", 
       RowBox[{"PackageName", "[", "pkg", "]"}]}], ",", "\n", "      ", 
      RowBox[{"cont", " ", "=", " ", 
       RowBox[{"PackageRootContext", "[", "pkg", "]"}]}], ",", "\n", "      ", 
      RowBox[{"opath", " ", "=", " ", 
       RowBox[{"If", "[", 
        RowBox[{"includeOrig", ",", " ", "$ContextPath", ",", " ", 
         RowBox[{"{", "\"\<System`\>\"", "}"}]}], "]"}]}], ",", "\n", 
      "      ", 
      RowBox[{"contextRemapping", " ", "=", " ", 
       RowBox[{"PackageContextMapping", "[", "pkg", "]"}]}], ",", "\n", 
      "      ", 
      RowBox[{"(*", " ", 
       RowBox[{
        RowBox[{"we", "'"}], "ll", " ", "add", " ", "some", " ", "kind", " ", 
        "of", " ", "option", " ", "to", " ", "allow", " ", "this", " ", "to", 
        " ", "be", " ", "remapped"}], " ", "*)"}], "\n", "      ", 
      "rootDepth", ",", "\n", "      ", "packageDirectories", ",", "\n", 
      "      ", "packageContextPath"}], "\n", "      ", "}"}], ",", "\n", 
    "    ", 
    RowBox[{
     RowBox[{"rootDepth", " ", "=", " ", 
      RowBox[{"FileNameDepth", "@", "packagePackageRoot"}]}], ";", "\n", 
     "    ", 
     RowBox[{"packageDirectories", " ", "=", " ", 
      RowBox[{"FileNames", "[", 
       RowBox[{
       "\"\<*\>\"", ",", " ", "packagePackageRoot", ",", " ", "Infinity"}], 
       "]"}]}], ";", "\n", "    ", 
     RowBox[{"packageDirectories", " ", "=", " ", 
      RowBox[{"Select", "[", 
       RowBox[{"packageDirectories", ",", " ", "DirectoryQ"}], "]"}]}], ";", 
     "\n", "    ", 
     RowBox[{"packageDirectories", " ", "=", " ", "\n", "      ", 
      RowBox[{
       RowBox[{
        RowBox[{"StringReplace", "[", "\n", "        ", 
         RowBox[{
          RowBox[{"FileNameDrop", "[", 
           RowBox[{"#", ",", " ", "rootDepth"}], "]"}], ",", "\n", "        ", 
          RowBox[{"$PathnameSeparator", "->", "\"\<`\>\""}]}], "\n", 
         "        ", "]"}], "&"}], "/@", "packageDirectories"}]}], ";", "\n", 
     "    ", 
     RowBox[{"packageDirectories", " ", "=", " ", "\n", "      ", 
      RowBox[{"Select", "[", "\n", "        ", 
       RowBox[{"packageDirectories", ",", "\n", "        ", 
        RowBox[{"StringMatchQ", "[", 
         RowBox[{
          RowBox[{"(", 
           RowBox[{"\"\<$\>\"", "|", "WordCharacter"}], ")"}], ".."}], 
         "]"}]}], "\n", "        ", "]"}]}], ";", "\n", "    ", 
     RowBox[{"packageContextPath", " ", "=", " ", "\n", "      ", 
      RowBox[{"Join", "[", "\n", "        ", 
       RowBox[{"opath", ",", "\n", "        ", 
        RowBox[{
         RowBox[{
          RowBox[{"cont", "<>", "#"}], "&"}], "/@", "packageDirectories"}]}], 
       "\n", "        ", "]"}]}], ";", "\n", "    ", 
     RowBox[{"DeleteDuplicates", "[", "\n", "      ", 
      RowBox[{"packageContextPath", " ", "/.", " ", "contextRemapping"}], 
      "\n", "      ", "]"}]}]}], "\n", "    ", "]"}]}]}], "Code",ExpressionUUI\
D->"afb06cd4-b32a-4cc0-9062-7995a45c63d6"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PackageRoot", "Subsubsection",ExpressionUUID->"0f8e9b37-d9ba-48e4-b51c-4a08a163388f"],

Cell[BoxData[
 RowBox[{"BindPackageMethod", "[", 
  RowBox[{"\"\<Directory\>\"", ",", " ", "PackageRoot"}], "]"}]], "Code",Expre\
ssionUUID->"7b349e42-151e-4513-a5c1-61babfac3e19"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"PackageRoot", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"PackageFrameworkPackage", "[", "a_", "]"}], "?", 
      "PackageFrameworkPackageQ"}], ",", " ", 
     RowBox[{"Optional", "[", 
      RowBox[{"None", ",", " ", "None"}], "]"}]}], "]"}], ":=", "\n", "  ", 
   RowBox[{"a", "[", "\"\<Location\>\"", "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{"PackageRoot", "[", 
   RowBox[{
    RowBox[{
     RowBox[{"PackageFrameworkPackage", "[", "a_", "]"}], "?", 
     "PackageFrameworkPackageQ"}], ",", " ", "k_String"}], "]"}], ":=", "\n", 
  "  ", 
  RowBox[{"FileNameJoin", "@", 
   RowBox[{"{", "\n", "    ", 
    RowBox[{
     RowBox[{"a", "[", "\"\<Location\>\"", "]"}], ",", "\n", "    ", 
     RowBox[{"Lookup", "[", 
      RowBox[{"a", ",", " ", 
       RowBox[{"k", "<>", "\"\<Root\>\""}], ",", " ", "k"}], "]"}]}], "\n", 
    "    ", "}"}]}]}]}], "Code",ExpressionUUID->"5f6a73ce-2a0d-45a5-81c7-\
d02af09c6570"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PackageFileNames", "Subsubsection",ExpressionUUID->"228667f4-fb65-4224-acfd-285f07a905fa"],

Cell[BoxData[
 RowBox[{"BindPackageMethod", "[", 
  RowBox[{"\"\<FileNames\>\"", ",", " ", "PackageFileNames"}], "]"}]], "Code",\
ExpressionUUID->"1cafdc02-bab8-4552-bfa8-ad076ea7e8f1"],

Cell[BoxData[
 RowBox[{
  RowBox[{"PackageFileNames", "[", "\n", "  ", 
   RowBox[{"pkg_PackageFrameworkPackage", ",", " ", "\n", "  ", 
    RowBox[{"pattern_", "?", "StringPattern`StringPatternQ"}], ",", " ", "\n",
     "  ", 
    RowBox[{"root", ":", 
     RowBox[{"_String", "|", "None"}]}], ",", " ", "\n", "  ", "e___"}], "\n",
    "  ", "]"}], ":=", "\n", "  ", 
  RowBox[{"FileNames", "[", 
   RowBox[{"pattern", ",", " ", 
    RowBox[{"PackageRoot", "[", 
     RowBox[{"pkg", ",", " ", "root"}], "]"}]}], "]"}]}]], "Code",ExpressionUU\
ID->"c5c90473-e3c5-4e34-b2fe-c814599a72ee"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PackageFilePath", "Subsubsection",ExpressionUUID->"796ce6d9-d0f8-48ac-b769-e98ff24ab940"],

Cell[BoxData[
 RowBox[{"BindPackageMethod", "[", 
  RowBox[{"\"\<Path\>\"", ",", " ", "PackageFilePath"}], "]"}]], "Code",Expres\
sionUUID->"594e3f4f-afae-42a2-af91-21ca124a2a6d"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"PackageFilePath", "[", "\n", "  ", 
    RowBox[{
    "pkg_PackageFrameworkPackage", ",", "\n", "  ", "p_String", ",", "\n", 
     "  ", "r___String"}], "\n", "  ", "]"}], ":=", "\n", "  ", 
   RowBox[{"FileNameJoin", "@", 
    RowBox[{"{", "\n", "    ", 
     RowBox[{
      RowBox[{"Replace", "[", 
       RowBox[{
        RowBox[{"PackageRoot", "[", 
         RowBox[{"pkg", ",", " ", "p"}], "]"}], ",", " ", 
        RowBox[{"_Missing", "->", "p"}]}], "]"}], ",", "\n", "    ", "r"}], 
     "\n", "    ", "}"}]}]}], ";"}]], "Code",ExpressionUUID->"11cbceae-d629-\
43f0-af0a-aa16df2e5296"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PackageFileContexts", "Subsubsection",ExpressionUUID->"7c71db2e-d708-4c7a-81cb-324e4a587a5a"],

Cell[BoxData[
 RowBox[{"(*", 
  RowBox[{
   RowBox[{"CreatePackageSymbolInterface", "[", 
    RowBox[{
    "$PackageFileContexts", ",", " ", "\"\<FileContexts\>\"", ",", " ", 
     RowBox[{
      RowBox[{"PackageFileContexts", "[", "#", "]"}], "&"}]}], "]"}], ";"}], 
  "*)"}]], "Code",ExpressionUUID->"006df0f7-e4c6-4ead-81c0-eff41c0cbd03"],

Cell[BoxData[
 RowBox[{
  RowBox[{"PackageFileContexts", "[", "pkg_", "]"}], ":=", "\n", "  ", 
  RowBox[{"Replace", "[", "\n", "    ", 
   RowBox[{
    RowBox[{"PropertyValue", "[", 
     RowBox[{"pkg", ",", " ", "\"\<FileContexts\>\""}], "]"}], ",", "\n", 
    "    ", 
    RowBox[{"_Missing", ":>", 
     RowBox[{"(", "\n", "      ", 
      RowBox[{
       RowBox[{"SetProperty", "[", 
        RowBox[{"pkg", ",", " ", 
         RowBox[{"\"\<FileContexts\>\"", "->", 
          RowBox[{"<|", "|>"}]}]}], "]"}], ";", "\n", "      ", 
       RowBox[{"<|", "|>"}]}], "\n", "      ", ")"}]}]}], "\n", "    ", 
   "]"}]}]], "Code",ExpressionUUID->"0cbc411a-ceb3-4d82-9740-0fe70b27cf0a"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PackageLoadedPackages", "Subsubsection",ExpressionUUID->"cc6117de-93ad-45ed-ba11-444cb8e25403"],

Cell[BoxData[
 RowBox[{"(*", 
  RowBox[{
   RowBox[{"CreatePackageSymbolInterface", "[", 
    RowBox[{"$LoadedPackages", ",", " ", "\"\<LoadedPackages\>\"", ",", " ", 
     RowBox[{
      RowBox[{"PackageLoadedPackages", "[", "#", "]"}], "&"}]}], "]"}], ";"}],
   "*)"}]], "Code",ExpressionUUID->"7eacfc54-9c85-47d6-9360-b4b4ffd768f8"],

Cell[BoxData[
 RowBox[{
  RowBox[{"PackageLoadedPackages", "[", "pkg_", "]"}], ":=", "\n", "  ", 
  RowBox[{"Replace", "[", "\n", "    ", 
   RowBox[{
    RowBox[{"PropertyValue", "[", 
     RowBox[{"pkg", ",", " ", "\"\<LoadedPackages\>\""}], "]"}], ",", "\n", 
    "    ", 
    RowBox[{"_Missing", ":>", 
     RowBox[{"(", "\n", "      ", 
      RowBox[{
       RowBox[{"SetProperty", "[", 
        RowBox[{"pkg", ",", " ", 
         RowBox[{"\"\<LoadedPackages\>\"", "->", 
          RowBox[{"{", "}"}]}]}], "]"}], ";", "\n", "      ", 
       RowBox[{"{", "}"}]}], "\n", "      ", ")"}]}]}], "\n", "    ", 
   "]"}]}]], "Code",ExpressionUUID->"af6c1951-a210-43f8-8f21-2ed8fb31973a"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PackageAddLoadedPackages", "Subsubsection",ExpressionUUID->"3345cfa1-2cf2-4ee0-b29b-bb868f36d0a3"],

Cell[BoxData[
 RowBox[{
  RowBox[{"PackageAddLoadedPackages", "[", 
   RowBox[{"pkg_", ",", " ", "pkgFiles_"}], "]"}], ":=", "\n", "  ", 
  RowBox[{"SetProperty", "[", 
   RowBox[{"pkg", ",", " ", "\n", "    ", 
    RowBox[{"\"\<LoadedPackages\>\"", "->", 
     RowBox[{"DeleteDuplicates", "@", 
      RowBox[{"Flatten", "[", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"PropertyValue", "[", 
          RowBox[{"pkg", ",", " ", "\"\<LoadedPackages\>\""}], "]"}], ",", 
         " ", "pkgFiles"}], "}"}], "]"}]}]}]}], "\n", "    ", "]"}]}]], "Code",\
ExpressionUUID->"079316d8-029a-4f4b-bc2c-c7e34be8c051"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PackageFileContext", "Subsubsection",ExpressionUUID->"3e5b2c15-75ae-4e33-bcb1-6be23dcd0ac0"],

Cell["\<\
Gotta make this more flexible.
The basic idea will be to allow the Package to declare its chosen \"root\" \
context, then we build off of that.
Subdirectory names _might_ be allowed to map themselves to a different \
context in the future?\
\>", "Text",ExpressionUUID->"5b4d5272-176d-4ae5-b795-6fdc3d6705cb"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"PackageFileContextPath", "[", 
    RowBox[{"pkg_PackageFrameworkPackage", ",", " ", 
     RowBox[{"f_String", "?", "DirectoryQ"}]}], "]"}], ":=", "\n", "  ", 
   RowBox[{"FileNameSplit", "[", "\n", "    ", 
    RowBox[{"FileNameDrop", "[", "\n", "      ", 
     RowBox[{"f", ",", "\n", "      ", 
      RowBox[{"FileNameDepth", "[", 
       RowBox[{"PackageRoot", "[", 
        RowBox[{"pkg", ",", " ", "\"\<Packages\>\""}], "]"}], "]"}]}], "\n", 
     "      ", "]"}], "\n", "    ", "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackageFileContextPath", "[", 
    RowBox[{"pkg_PackageFrameworkPackage", ",", " ", 
     RowBox[{"f_String", "?", "FileExistsQ"}]}], "]"}], ":=", "\n", "  ", 
   RowBox[{"PackageFileContextPath", "[", 
    RowBox[{"pkg", ",", " ", 
     RowBox[{"DirectoryName", "@", "f"}]}], "]"}]}], ";"}]}], "Code",Expressio\
nUUID->"b4c91986-9d58-49d6-8ae0-e5e788f229c4"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"PackageFileContext", "[", 
    RowBox[{"pkg_PackageFrameworkPackage", ",", " ", 
     RowBox[{"f_String", "?", "DirectoryQ"}]}], "]"}], ":=", "\n", "  ", 
   RowBox[{"Module", "[", "\n", "    ", 
    RowBox[{
     RowBox[{"{", "\n", "      ", 
      RowBox[{
       RowBox[{"s", "=", 
        RowBox[{"PackageFileContextPath", "[", 
         RowBox[{"pkg", ",", " ", "f"}], "]"}]}], ",", " ", "\n", "      ", 
       RowBox[{"root", "=", 
        RowBox[{"StringTrim", "[", 
         RowBox[{
          RowBox[{"PackageContext", "[", "pkg", "]"}], ",", " ", 
          "\"\<`\>\""}], "]"}]}], ",", "\n", "      ", 
       RowBox[{"contextRemapping", " ", "=", " ", 
        RowBox[{"PackageContextMapping", "[", "pkg", "]"}]}], ",", "\n", 
       "      ", "cont"}], "\n", "      ", "}"}], ",", "\n", "    ", 
     RowBox[{
      RowBox[{"cont", " ", "=", " ", 
       RowBox[{"StringRiffle", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"Append", "[", "\"\<\>\"", "]"}], "@", 
          RowBox[{"Prepend", "[", 
           RowBox[{"s", ",", " ", "root"}], "]"}]}], ",", " ", "\"\<`\>\""}], 
        "]"}]}], ";", "\n", "    ", 
      RowBox[{"Replace", "[", 
       RowBox[{"cont", ",", " ", "contextRemapping"}], "]"}]}]}], "\n", 
    "    ", "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackageFileContext", "[", 
    RowBox[{"pkg_PackageFrameworkPackage", ",", " ", 
     RowBox[{"f_String", "?", "FileExistsQ"}]}], "]"}], ":=", "\n", "  ", 
   RowBox[{"PackageFileContext", "[", 
    RowBox[{"pkg", ",", " ", 
     RowBox[{"DirectoryName", "[", "f", "]"}]}], "]"}]}], ";"}]}], "Code",Expr\
essionUUID->"f2bcd6e7-ff1f-4bae-b963-cc7bfc6482e9"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PackageFileFromName", "Subsubsection",ExpressionUUID->"5a5fbabd-cd5b-4ea5-9ca5-5ab6f531f77d"],

Cell[BoxData[{
 RowBox[{"PackageFileFromName", "//", "Clear"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackageFileFromName", "[", 
    RowBox[{"pkg_PackageFrameworkPackage", ",", " ", "f_"}], "]"}], ":=", 
   "\n", "  ", 
   RowBox[{"Module", "[", "\n", "    ", 
    RowBox[{
     RowBox[{"{", "\n", "      ", 
      RowBox[{"fBase", "=", "f"}], "\n", "      ", "}"}], ",", "\n", "    ", 
     RowBox[{
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"!", 
         RowBox[{"FileExistsQ", "[", "fBase", "]"}]}], ",", "\n", "      ", 
        RowBox[{"fBase", " ", "=", " ", 
         RowBox[{"PackageFilePath", "[", 
          RowBox[{"pkg", ",", " ", "\"\<Packages\>\"", ",", " ", 
           RowBox[{"f", "<>", "\"\<.m\>\""}]}], "]"}]}]}], "\n", "      ", 
       "]"}], ";", "\n", "    ", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"!", 
         RowBox[{"FileExistsQ", "[", "fBase", "]"}]}], ",", "\n", "      ", 
        RowBox[{"fBase", " ", "=", " ", 
         RowBox[{"PackageFilePath", "[", 
          RowBox[{"pkg", ",", " ", "\"\<Packages\>\"", ",", " ", 
           RowBox[{"f", "<>", "\"\<.wl\>\""}]}], "]"}]}]}], "\n", "      ", 
       "]"}], ";", "\n", "    ", "fBase"}]}], "\n", "    ", "]"}]}], 
  ";"}]}], "Code",ExpressionUUID->"c31c2cd7-9910-4564-b8d4-01a99dbb74e7"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PackageExposeContexts", "Subsubsection",ExpressionUUID->"1319ef49-4b6b-4f4f-96cb-2fc0af3c68cd"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"PackageExposeContexts", "[", "pkg_", "]"}], ":=", "\n", "  ", 
   RowBox[{"If", "[", 
    RowBox[{
     RowBox[{"ListQ", "@", 
      RowBox[{"pkg", "[", "\"\<ExtraContexts\>\"", "]"}]}], ",", "\n", "    ", 
     RowBox[{"PackageExtendContextPath", "[", "\n", "      ", 
      RowBox[{"pkg", ",", "\n", "      ", 
       RowBox[{"pkg", "[", "\"\<ExtraContexts\>\"", "]"}]}], "\n", "      ", 
      "]"}]}], "\n", "    ", "]"}]}], ";"}]], "Code",ExpressionUUID->\
"31cf9e99-efa7-4ee8-8c06-3cf42de78c3a"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PackageExtendContextPath", "Subsubsection",ExpressionUUID->"11acca66-af3e-4054-9551-f137c34d898f"],

Cell[BoxData[
 RowBox[{
  RowBox[{"PackageExtendContextPath", "[", 
   RowBox[{"pkg_", ",", " ", 
    RowBox[{"cp", ":", 
     RowBox[{"{", "__String", "}"}]}]}], "]"}], ":=", "\n", "  ", 
  RowBox[{"SetProperty", "[", "\n", "    ", 
   RowBox[{"pkg", ",", "\n", "    ", 
    RowBox[{"\"\<Contexts\>\"", "->", "\n", "      ", 
     RowBox[{"DeleteCases", "[", "\n", "        ", 
      RowBox[{
       RowBox[{"DeleteDuplicates", "@", "\n", "          ", 
        RowBox[{"Join", "[", 
         RowBox[{
          RowBox[{"PackageContexts", "[", "pkg", "]"}], ",", " ", "cp"}], 
         "]"}]}], ",", "\n", "        ", 
       RowBox[{"\"\<System`\>\"", "|", "\"\<Global`\>\""}]}], "\n", 
      "        ", "]"}]}]}], "\n", "    ", "]"}]}]], "Code",ExpressionUUID->\
"c4ec5069-d253-4934-933e-9aedfe305f88"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Loading Helpers", "Subsection",ExpressionUUID->"7e9f9822-f13f-4b7f-9bae-6b081857f74d"],

Cell[CellGroupData[{

Cell["PackageSymbols", "Subsubsection",ExpressionUUID->"3c8ee429-e079-41d6-b604-2b5d6f304f25"],

Cell[BoxData[
 RowBox[{"(*", 
  RowBox[{
   RowBox[{"CreatePackageSymbolInterface", "[", 
    RowBox[{"$PackageSymbols", ",", " ", "\"\<Symbols\>\"", ",", " ", 
     RowBox[{
      RowBox[{"PackageSymbols", "[", "#", "]"}], "&"}]}], "]"}], ";"}], 
  "*)"}]], "Code",ExpressionUUID->"48ebbbc9-efa6-49f2-8848-744a5fd81937"],

Cell[BoxData[
 RowBox[{"BindPackageMethod", "[", 
  RowBox[{"\"\<Symbols\>\"", ",", " ", "PackageSymbols"}], "]"}]], "Code",Expr\
essionUUID->"594ea425-58a4-4cd1-861f-8db98e2e3181"],

Cell[BoxData[
 RowBox[{
  RowBox[{"PackageSymbols", "[", "pkg_", "]"}], ":=", "\n", "  ", 
  RowBox[{"Replace", "[", "\n", "    ", 
   RowBox[{
    RowBox[{"PropertyValue", "[", 
     RowBox[{"pkg", ",", " ", "\"\<Symbols\>\""}], "]"}], ",", "\n", "    ", 
    RowBox[{"_Missing", ":>", 
     RowBox[{"(", "\n", "      ", 
      RowBox[{
       RowBox[{"SetProperty", "[", 
        RowBox[{"pkg", ",", " ", 
         RowBox[{"\"\<Symbols\>\"", "->", 
          RowBox[{"{", "}"}]}]}], "]"}], ";", "\n", "      ", 
       RowBox[{"{", "}"}]}], "\n", "      ", ")"}]}]}], "\n", "    ", 
   "]"}]}]], "Code",ExpressionUUID->"cd403fdf-dd2e-4991-8c52-f4dca720072e"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PackageExecute", "Subsubsection",ExpressionUUID->"8b8711a9-89a4-4a50-b47e-7f88e7d3274f"],

Cell[BoxData[{
 RowBox[{"PackageExecute", "//", "Clear"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackageExecute", "[", "\n", "  ", 
    RowBox[{
    "pkg_PackageFrameworkPackage", ",", " ", "\n", "  ", "expr_", ",", " ", 
     "\n", "  ", 
     RowBox[{"context", ":", 
      RowBox[{"_String", "|", "Automatic"}], ":", "Automatic"}]}], "\n", "  ",
     "]"}], ":=", "\n", "  ", 
   RowBox[{"With", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"ctxs", "=", 
       RowBox[{"PackageContexts", "[", "pkg", "]"}]}], "}"}], ",", "\n", 
     "    ", 
     RowBox[{"Block", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"$CurrentPackage", "=", "pkg"}], "}"}], ",", "\n", "      ", 
       RowBox[{"Internal`WithLocalSettings", "[", "\n", "        ", 
        RowBox[{
         RowBox[{
          RowBox[{"Begin", "[", 
           RowBox[{"Replace", "[", 
            RowBox[{"context", ",", " ", 
             RowBox[{"Automatic", "->", 
              RowBox[{"ctxs", "[", 
               RowBox[{"[", "1", "]"}], "]"}]}]}], "]"}], "]"}], ";", "\n", 
          "        ", 
          RowBox[{"System`Private`NewContextPath", "@", "\n", "          ", 
           RowBox[{"Prepend", "[", 
            RowBox[{"ctxs", ",", " ", "\"\<System`\>\""}], "]"}]}], ";"}], 
         ",", "\n", "        ", "expr", ",", "\n", "        ", 
         RowBox[{
          RowBox[{"System`Private`RestoreContextPath", "[", "]"}], ";", "\n", 
          "        ", 
          RowBox[{"End", "[", "]"}], ";"}]}], "\n", "        ", "]"}]}], "\n",
       "      ", "]"}]}], "\n", "    ", "]"}]}], ";"}], "\n", 
 RowBox[{"PackageExecute", "~", "SetAttributes", "~", "HoldRest"}]}], "Code",E\
xpressionUUID->"4fa7cfd4-da41-41f6-8e09-21454cb0428c"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PackagePullDeclarations", "Subsubsection",ExpressionUUID->"58cf41da-3af8-4cc7-8d02-201779de67e8"],

Cell["\<\
This is another big place where we need to introduce greater flexibility
The current design looks for a few things:

Begin[...] / BeginPackage[...]

We need to add some flexbility to this design, though.

Any statement up until a Begin[\"`Private*`\"] should be allowed to operate \
as normal (but the number of necessary End[] and EndPackage[] statements \
should be incremented). The reason for this is that we'd like to be able to \
handle any type of auto-completion as longs as it's generally within the \
traditional Mathematica package design framework.\
\>", "Text",ExpressionUUID->"93076d49-865f-4e83-9999-85b9ea672747"],

Cell["\<\
This basically means we need to handle a few distinct subcases of package \
layouts. We can have the classic:

  ExposedSymbolA::usage=\"....\";
  ExposedSymbolB::usage=\"....\";
  ExposedSymbolC::usage=\"....\";

  Begin[\"`Private`\"]
  (* End Here *)

But I'd also like to be able to appropriately handle the case of 

  BeginPackage[\"MainPackageName`\"]
  
  ExposedSymbolA::usage=\"....\";
  ExposedSymbolB::usage=\"....\";
  ExposedSymbolC::usage=\"....\";

  Begin[\"`Private`\"]
  (* End Here *)
  
On the other hand, we might also want to support something like:

  BeginPackage[\"`SubPackageName`\"]
  
  ExposedSymbolA::usage=\"....\";
  ExposedSymbolB::usage=\"....\";
  ExposedSymbolC::usage=\"....\";

  Begin[\"`Private`\"]
  (* End Here *)

but in that case there's some question as to how we want to implement this. \
Should we be placing autocompletions onto these sub-symbols too?\
\>", "Text",ExpressionUUID->"4553b002-b469-4945-9bb6-51329097e408"],

Cell["\<\
Another question that arises: Should we be overloading stuff like Begin and \
BeginPackage in this initialization phase? That would make it possible to not \
have to catch every possible pattern inside PackagePullDeclarationsAction, \
but at the same time runs the risk of massive breakage if things go wrong.

Something to think about in the future...\
\>", "Text",ExpressionUUID->"2b21ed3d-f3e5-4324-bff5-e39642c262ca"],

Cell[BoxData[{
 RowBox[{"PackagePullDeclarationsAction", "//", "Clear"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackagePullDeclarationsAction", "[", "\n", "  ", 
    RowBox[{"a", ":", 
     RowBox[{"Hold", "[", "\n", "    ", 
      RowBox[{
       RowBox[{
        RowBox[{"(", 
         RowBox[{"h", ":", 
          RowBox[{"Begin", "|", "BeginPackage"}]}], ")"}], "[", 
        RowBox[{"e_", ",", " ", "r___"}], "]"}], "|", "\n", "    ", 
       RowBox[{"CompoundExpression", "[", "\n", "      ", 
        RowBox[{
         RowBox[{
          RowBox[{"(", 
           RowBox[{"h", ":", 
            RowBox[{"Begin", "|", "BeginPackage"}]}], ")"}], "[", 
          RowBox[{"e_", ",", " ", "r___"}], "]"}], ",", " ", "\n", "      ", 
         "___"}], "\n", "      ", "]"}]}], "\n", "    ", "]"}]}], "\n", "  ", 
    "]"}], ":=", "\n", "  ", 
   RowBox[{"If", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"StringQ", "[", "e", "]"}], "&&", 
      RowBox[{"StringStartsQ", "[", 
       RowBox[{"e", ",", " ", "\"\<`Private\>\""}], "]"}]}], ",", "\n", 
     "    ", 
     RowBox[{"Throw", "[", 
      RowBox[{"End", ",", " ", 
       RowBox[{"$EndPackageDeclaration", "[", "$CurrentPackageFile", "]"}]}], 
      "]"}], ",", "\n", "    ", 
     RowBox[{
      RowBox[{"h", "[", 
       RowBox[{"e", ",", " ", "r"}], "]"}], ";", " ", 
      RowBox[{"(*", " ", 
       RowBox[{
       "allow", " ", "the", " ", "Begin", " ", "or", " ", "BeginPackage", " ",
         "to", " ", "activate"}], " ", "*)"}], "\n", "    ", 
      RowBox[{"Switch", "[", 
       RowBox[{"h", ",", " ", "\n", "      ", "Begin", ",", " ", 
        RowBox[{"$EndCallStack", " ", "=", " ", 
         RowBox[{"{", 
          RowBox[{"End", ",", " ", "$EndCallStack"}], "}"}]}], ",", "\n", 
        "      ", "BeginPackage", ",", " ", 
        RowBox[{"$EndCallStack", " ", "=", " ", 
         RowBox[{"{", 
          RowBox[{"EndPackage", ",", " ", "$EndCallStack"}], "}"}]}]}], "\n", 
       "      ", "]"}], ";", "\n", "    ", 
      RowBox[{"AssociateTo", "[", 
       RowBox[{"$PackageContexts", ",", " ", 
        RowBox[{"$Context", "->", "None"}]}], "]"}]}]}], "\n", "    ", 
    "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackagePullDeclarationsAction", "[", "\n", "  ", 
    RowBox[{"a", ":", 
     RowBox[{"Hold", "[", "\n", "    ", 
      RowBox[{
       RowBox[{
        RowBox[{"(", 
         RowBox[{"h", ":", 
          RowBox[{"End", "|", "EndPackage"}]}], ")"}], "[", "]"}], "|", "\n", 
       "    ", 
       RowBox[{"CompoundExpression", "[", "\n", "      ", 
        RowBox[{
         RowBox[{
          RowBox[{"(", 
           RowBox[{"h", ":", 
            RowBox[{"End", "|", "EndPackage"}]}], ")"}], "[", "___", "]"}], 
         ",", " ", "\n", "      ", "___"}], "\n", "      ", "]"}]}], "\n", 
      "    ", "]"}]}], "\n", "  ", "]"}], ":=", "\n", "  ", 
   RowBox[{"(", "\n", "    ", 
    RowBox[{
     RowBox[{"h", "[", "]"}], ";", "\n", "    ", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"Length", "@", "$EndCallStack"}], " ", "==", " ", "2"}], ",", 
       "\n", "      ", 
       RowBox[{"$EndCallStack", " ", "=", " ", 
        RowBox[{"$EndCallStack", "[", 
         RowBox[{"[", "2", "]"}], "]"}]}]}], "\n", "      ", "]"}], ";"}], 
    "\n", "    ", ")"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"PackagePullDeclarationsAction", "[", "\n", "  ", 
     RowBox[{"p", ":", "\n", "    ", 
      RowBox[{"Hold", "[", "\n", "      ", 
       RowBox[{
       "_PackageFEHiddenBlock", "|", "_PackageScopeBlock", "|", "\n", 
        "      ", 
        RowBox[{"CompoundExpression", "[", "\n", "        ", 
         RowBox[{
          RowBox[{"_PackageFEHiddenBlock", "|", "_PackageScopeBlock"}], ",", 
          "\n", "        ", "___"}], "\n", "        ", "]"}]}], "\n", 
       "      ", "]"}]}], "\n", "  ", "]"}], "/;", 
    RowBox[{"TrueQ", "[", "$AllowPackageRescoping", "]"}]}], ":=", "\n", "  ", 
   RowBox[{"(", "\n", "    ", 
    RowBox[{
     RowBox[{"ReleaseHold", "[", "p", "]"}], ";", "\n", "    ", 
     RowBox[{"Sow", "[", "p", "]"}], ";"}], "\n", "    ", ")"}]}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackagePullDeclarationsAction", "[", 
    RowBox[{"e", ":", 
     RowBox[{"Except", "[", 
      RowBox[{"Hold", "[", "Expression", "]"}], "]"}]}], "]"}], ":=", "\n", 
   "  ", 
   RowBox[{"Sow", "@", "e"}]}], ";"}]}], "Code",ExpressionUUID->"72616bb9-\
582f-4ef2-98eb-2e1114ace107"],

Cell[BoxData[
 RowBox[{
  RowBox[{"PackagePullDeclarations", "[", 
   RowBox[{"pkg_", ",", " ", "pkgFile_"}], "]"}], ":=", "\n", "  ", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
     "decStatements", ",", " ", "stream", ",", " ", "packageSymbols"}], "}"}],
     ",", "\n", "    ", 
    RowBox[{"Block", "[", "\n", "      ", 
     RowBox[{
      RowBox[{"{", "\n", "        ", 
       RowBox[{
        RowBox[{"$EndCallStack", " ", "=", " ", 
         RowBox[{"{", "}"}]}], ",", " ", "\n", "          ", 
        RowBox[{"(*", " ", "\n", "            ", 
         RowBox[{
          RowBox[{"We", "'"}], "ll", " ", "sow", " ", "in", " ", "End", " ", 
          "and", " ", "EndPackage", " ", "statement", " ", "as", " ", 
          "necessary", " ", "so", " ", "that", " ", "we", " ", "can", " ", 
          "just", "\n", "            ", "map", " ", "over", " ", "the", " ", 
          "flattened", " ", "version", " ", "of", " ", "the", " ", "stack", 
          " ", "after", " ", 
          RowBox[{"we", "'"}], "re", " ", "done", " ", "with", " ", "finding",
           " ", "all", "\n", "            ", "of", " ", "our", " ", "package",
           " ", "declarations"}], "\n", "            ", "*)"}], "\n", 
        "        ", 
        RowBox[{"$PackageLoadedContexts", " ", "=", " ", "\n", "          ", 
         RowBox[{"<|", " ", 
          RowBox[{
           RowBox[{"PackageFileContext", "[", 
            RowBox[{"pkg", ",", " ", "pkgFile"}], "]"}], " ", "->", " ", 
           "None"}], " ", "|>"}]}], ",", "\n", "        ", 
        RowBox[{"$CurrentPackageFile", " ", "=", " ", "pkgFile"}]}], "\n", 
       "        ", "}"}], ",", "\n", "      ", 
      RowBox[{
       RowBox[{"Internal`WithLocalSettings", "[", "\n", "        ", 
        RowBox[{
         RowBox[{"stream", " ", "=", " ", 
          RowBox[{"OpenRead", "[", "pkgFile", "]"}]}], ",", "\n", "        ", 
         
         RowBox[{"decStatements", " ", "=", " ", "\n", "          ", 
          RowBox[{
           RowBox[{"Reap", "[", "\n", "            ", 
            RowBox[{"Catch", "[", "\n", "              ", 
             RowBox[{
              RowBox[{"Do", "[", " ", "\n", "                ", 
               RowBox[{"(*", " ", 
                RowBox[{
                 RowBox[{"read", " ", "the", " ", "package", " ", "block"}], 
                 "-", "by", "-", 
                 RowBox[{
                 "block", " ", "and", " ", "cache", " ", "the", " ", 
                  "relevant", " ", "symbols"}]}], " ", "*)"}], "\n", 
               "                ", 
               RowBox[{
                RowBox[{"If", "[", "\n", "                  ", 
                 RowBox[{
                  RowBox[{
                   RowBox[{"Length", "[", "\n", "                    ", 
                    RowBox[{"ReadList", "[", "\n", "                      ", 
                    RowBox[{"stream", ",", "\n", "                      ", 
                    RowBox[{"PackagePullDeclarationsAction", "@", 
                    RowBox[{"Hold", "[", "Expression", "]"}]}], ",", "\n", 
                    "                      ", "1"}], "\n", 
                    "                      ", "]"}], "\n", 
                    "                    ", "]"}], "===", "0"}], ",", "\n", 
                  "                    ", 
                  RowBox[{"Throw", "[", "\n", "                      ", 
                   RowBox[{"EndOfFile", ",", "\n", "                      ", 
                    RowBox[{
                    "$EndPackageDeclaration", "[", "$CurrentPackageFile", 
                    "]"}]}], "\n", "                      ", "]"}]}], "\n", 
                 "                  ", "]"}], ",", "\n", "                ", 
                "Infinity"}], "\n", "                ", "]"}], ",", "\n", 
              "              ", 
              RowBox[{
              "$EndPackageDeclaration", "[", "$CurrentPackageFile", "]"}]}], 
             "\n", "             ", "]"}], "\n", "          ", "]"}], "[", 
           RowBox[{"[", "2", "]"}], "]"}]}], ",", "\n", "        ", 
         RowBox[{
          RowBox[{"Close", "[", "stream", "]"}], ";", "\n", "        ", 
          RowBox[{"Map", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"#", "[", "]"}], "&"}], ",", " ", 
            RowBox[{"Flatten", "@", "$EndCallStack"}]}], "]"}], ";"}]}], "\n",
         "        ", "]"}], ";", "\n", "    ", 
       RowBox[{"packageSymbols", "=", "\n", "      ", 
        RowBox[{"Cases", "[", "\n", "        ", 
         RowBox[{"decStatements", ",", "\n", "        ", 
          RowBox[{
           RowBox[{"s_Symbol", "?", 
            RowBox[{"(", "\n", "          ", 
             RowBox[{"Function", "[", "\n", "            ", 
              RowBox[{"Null", ",", "\n", "            ", 
               RowBox[{"Quiet", "[", 
                RowBox[{"KeyExistsQ", "[", 
                 RowBox[{"$PackageLoadedContexts", ",", " ", 
                  RowBox[{"Context", "[", "#", "]"}]}], "]"}], "]"}], ",", 
               "\n", "            ", "HoldAllComplete"}], "\n", 
              "            ", "]"}], "\n", "            ", ")"}]}], ":>", 
           "\n", "            ", 
           RowBox[{"HoldPattern", "[", "s", "]"}]}], ",", "\n", "        ", 
          "Infinity"}], "\n", "        ", "]"}]}], ";", "\n", "    ", 
       RowBox[{"SetProperty", "[", 
        RowBox[{"pkg", ",", " ", "\n", "      ", 
         RowBox[{"\"\<Symbols\>\"", "->", "\n", "        ", 
          RowBox[{"DeleteDuplicates", "@", 
           RowBox[{"Join", "[", 
            RowBox[{
             RowBox[{"PackageSymbols", "[", "pkg", "]"}], ",", " ", 
             "packageSymbols"}], "]"}]}]}]}], "\n", "      ", "]"}], ";", 
       "\n", "    ", 
       RowBox[{"SetProperty", "[", 
        RowBox[{"pkg", ",", " ", "\n", "      ", 
         RowBox[{"\"\<Contexts\>\"", "->", "\n", "        ", 
          RowBox[{"DeleteDuplicates", "@", 
           RowBox[{"Join", "[", 
            RowBox[{
             RowBox[{"PackageContexts", "[", "pkg", "]"}], ",", " ", 
             RowBox[{"Keys", "@", "$PackageLoadedContexts"}]}], "]"}]}]}]}], 
        "\n", "      ", "]"}], ";", "\n", "    ", 
       RowBox[{"pkgFile", "->", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"Keys", "@", "$PackageLoadedContexts"}], ",", " ", 
          "packageSymbols"}], "}"}]}]}]}], "\n", "    ", "]"}]}], " ", "\n", 
   "  ", "]"}]}]], "Code",ExpressionUUID->"0ca019b3-ea90-47c7-8a39-\
0308f9a32800"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PackageAutoloadPackage", "Subsubsection",ExpressionUUID->"b1f422e9-4150-4ed0-a294-7721cdb6c603"],

Cell["\<\
Handles the actual loading of a file. This is set up by the declarer to \
autoload all the package symbols.\
\>", "Text",ExpressionUUID->"8cc15f59-6e9d-4d2a-8cc7-3f4f1185c9d9"],

Cell[BoxData[{
 RowBox[{"PackageAutoloadPackage", "//", "Clear"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackageAutoloadPackage", "[", 
    RowBox[{
    "pkg_PackageFrameworkPackage", ",", " ", "heldSym_", ",", " ", "context_",
      ",", " ", 
     RowBox[{"pkgFile_", "->", "syms_"}]}], "]"}], ":=", "\n", "  ", 
   RowBox[{"Block", "[", "\n", "    ", 
    RowBox[{
     RowBox[{"{", "\n", "      ", 
      RowBox[{
       RowBox[{"$loadingChain", "=", "\n", "        ", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"!", 
           RowBox[{"AssociationQ", "@", "$inLoad"}]}], ",", " ", "\n", 
          "          ", 
          RowBox[{"$loadingChain", " ", "=", " ", 
           RowBox[{"<|", " ", 
            RowBox[{"pkg", " ", "->", " ", 
             RowBox[{"{", "}"}]}], " ", "|>"}]}], ",", "\n", "          ", 
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{"!", 
             RowBox[{"KeyExistsQ", "[", 
              RowBox[{"$loadingChain", ",", " ", "pkg"}], "]"}]}], ",", "\n", 
            "            ", 
            RowBox[{"Append", "[", 
             RowBox[{"$loadingChain", ",", " ", 
              RowBox[{"pkg", "->", 
               RowBox[{"{", "}"}]}]}], "]"}], ",", "\n", "            ", 
            "$loadingChain"}], "\n", "            ", "]"}]}], "\n", 
         "          ", "]"}]}], ",", "\n", "      ", 
       RowBox[{"$inLoad", "=", "\n", "        ", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"!", 
           RowBox[{"AssociationQ", "@", "$inLoad"}]}], ",", " ", "\n", 
          "          ", 
          RowBox[{"<|", 
           RowBox[{"pkg", "->", "False"}], "|>"}], ",", " ", "\n", 
          "          ", 
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{"!", 
             RowBox[{"KeyExistsQ", "[", 
              RowBox[{"$inLoad", ",", " ", "pkg"}], "]"}]}], ",", "\n", 
            "            ", 
            RowBox[{"Append", "[", 
             RowBox[{"$inLoad", ",", " ", 
              RowBox[{"pkg", "->", "False"}]}], "]"}], ",", "\n", 
            "            ", 
            RowBox[{"TrueQ", "[", "$inLoad", "]"}]}], "\n", "            ", 
           "]"}]}], "\n", "          ", "]"}]}], ",", "\n", "      ", 
       RowBox[{"$$inLoad", "=", 
        RowBox[{"TrueQ", "[", 
         RowBox[{"$inLoad", "[", "pkg", "]"}], "]"}]}]}], "\n", "      ", 
      "}"}], ",", "\n", "    ", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"!", 
        RowBox[{"MemberQ", "[", 
         RowBox[{
          RowBox[{"$loadingChain", "[", "pkg", "]"}], ",", " ", "pkgFile"}], 
         "]"}]}], ",", "\n", "      ", 
       RowBox[{
        RowBox[{"AppendTo", "[", 
         RowBox[{
          RowBox[{"$loadingChain", "[", "pkg", "]"}], ",", " ", "pkgFile"}], 
         "]"}], ";", "\n", "      ", 
        RowBox[{
         RowBox[{"$inLoad", "[", "pkg", "]"}], "=", "True"}], ";", "\n", 
        "      ", 
        RowBox[{"Internal`WithLocalSettings", "[", "\n", "        ", 
         RowBox[{"(*", " ", 
          RowBox[{
          "holds", " ", "the", " ", "CPath", " ", "so", " ", "it", " ", "can",
            " ", "be", " ", "restored", " ", "later"}], " ", "*)"}], "\n", 
         "        ", 
         RowBox[{
          RowBox[{"System`Private`NewContextPath", "@", "$ContextPath"}], ",",
           "\n", "        ", "\n", "        ", 
          RowBox[{"(*", " ", 
           RowBox[{"Clear", ",", " ", 
            RowBox[{"but", " ", "only", " ", "for", " ", "OwnValues"}]}], " ",
            "*)"}], "\n", "        ", 
          RowBox[{
           RowBox[{"Replace", "[", 
            RowBox[{"syms", ",", "\n", "          ", 
             RowBox[{
              RowBox[{"s_Symbol", "|", 
               RowBox[{
                RowBox[{"Verbatim", "[", "HoldPattern", "]"}], "[", 
                "s_Symbol", "]"}]}], ":>", "\n", "            ", 
              RowBox[{"(", 
               RowBox[{
                RowBox[{"OwnValues", "[", "s", "]"}], "=", 
                RowBox[{"{", "}"}]}], ")"}]}], ",", "\n", "          ", "1"}],
             "\n", "          ", "]"}], ";", "\n", "        ", 
           RowBox[{"PackageEnsureLoad", "[", "pkg", "]"}], ";", "\n", 
           "        ", 
           RowBox[{"PackageFrameworkPackageGet", "[", 
            RowBox[{"pkg", ",", " ", 
             RowBox[{"context", "[", 
              RowBox[{"[", "1", "]"}], "]"}], ",", " ", "pkgFile"}], "]"}], 
           ";", "\n", "        ", 
           RowBox[{"PackageAddLoadedPackage", "[", 
            RowBox[{"pkg", ",", " ", "pkgFile"}], "]"}]}], ",", "\n", 
          "          ", "\n", "        ", 
          RowBox[{"System`Private`RestoreContextPath", "[", "]"}]}], "\n", 
         "        ", "]"}], ";", "\n", "      ", 
        RowBox[{"ReleaseHold", "[", "heldSym", "]"}]}]}], "\n", "      ", 
      "]"}]}], "\n", "    ", "]"}]}], ";"}]}], "Code",ExpressionUUID->\
"9a380305-2c22-484c-84ff-b175503fb0c6"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PackageDeclarePackage", "Subsubsection",ExpressionUUID->"8bc3dc63-c52d-47ff-b5c2-0b5c20ade52f"],

Cell[BoxData[
 RowBox[{"(*", 
  RowBox[{
   RowBox[{"CreatePackageSymbolInterface", "[", 
    RowBox[{
    "$DeclaredPackages", ",", " ", "\"\<DeclaredPackages\>\"", ",", " ", 
     RowBox[{
      RowBox[{"PackageDeclaredPackages", "[", "#", "]"}], "&"}]}], "]"}], 
   ";"}], "*)"}]], "Code",ExpressionUUID->"1a394a8b-3eb2-4928-83c4-\
f15a638d2ac4"],

Cell[BoxData[
 RowBox[{
  RowBox[{"PackageDeclaredPackages", "[", "pkg_", "]"}], ":=", "\n", "  ", 
  RowBox[{"Replace", "[", "\n", "    ", 
   RowBox[{
    RowBox[{"PropertyValue", "[", 
     RowBox[{"pkg", ",", " ", "\"\<DeclaredPackages\>\""}], "]"}], ",", "\n", 
    "    ", 
    RowBox[{"_Missing", ":>", 
     RowBox[{"(", "\n", "      ", 
      RowBox[{
       RowBox[{"SetProperty", "[", 
        RowBox[{"pkg", ",", " ", 
         RowBox[{"\"\<DeclaredPackages\>\"", "->", 
          RowBox[{"<|", "|>"}]}]}], "]"}], ";", " ", "\n", "      ", 
       RowBox[{"<|", "|>"}]}], "\n", "      ", ")"}]}]}], "\n", "    ", 
   "]"}]}]], "Code",ExpressionUUID->"d4a61dbc-61b3-4120-a2ae-05a0c14fdd5d"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"PackageDeclarePackage", "[", "\n", "  ", 
    RowBox[{"pkg_", ",", " ", "\n", "  ", 
     RowBox[{"pkgFile_", "->", 
      RowBox[{"{", 
       RowBox[{"contexts_", ",", " ", "syms_"}], "}"}]}]}], "\n", "  ", "]"}],
    ":=", "\n", "  ", 
   RowBox[{"(", "\n", "    ", 
    RowBox[{
     RowBox[{"SetProperty", "[", 
      RowBox[{"pkg", ",", " ", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{"\"\<DeclaredPackages\>\"", ",", " ", "pkgFile"}], "}"}], "->",
         "syms"}]}], "]"}], ";", "\n", "    ", 
     RowBox[{"SetProperty", "[", 
      RowBox[{"pkg", ",", " ", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{"\"\<FileContexts\>\"", ",", " ", "pkgFile"}], "}"}], "->", 
        "contexts"}]}], "]"}], ";", "\n", "    ", 
     RowBox[{"Replace", "[", 
      RowBox[{"syms", ",", "\n", "      ", 
       RowBox[{
        RowBox[{"s_Symbol", "|", 
         RowBox[{
          RowBox[{"Verbatim", "[", "HoldPattern", "]"}], "[", "s_Symbol", 
          "]"}]}], ":>", "\n", "        ", 
        RowBox[{"SetDelayed", "[", "\n", "          ", 
         RowBox[{"s", ",", "\n", "          ", 
          RowBox[{"PackageAutoloadPackage", "[", 
           RowBox[{"pkg", ",", " ", 
            RowBox[{"HoldPattern", "[", "s", "]"}], ",", " ", "contexts", ",",
             " ", 
            RowBox[{"pkgFile", "->", "syms"}]}], "]"}]}], "\n", "          ", 
         "]"}]}], ",", "\n", "      ", "1"}], "\n", "      ", "]"}]}], "\n", 
    "    ", ")"}]}], ";"}]], "Code",ExpressionUUID->"bbf17a85-d468-498e-80cf-\
efd05c24343b"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PackageLoadDeclare", "Subsubsection",ExpressionUUID->"61c53ffe-16c3-4854-bcad-55945cf319ae"],

Cell[BoxData[{
 RowBox[{"PackageLoadDeclare", "//", "Clear"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackageLoadDeclare", "[", 
    RowBox[{"pkg_PackageFrameworkPackage", ",", " ", "pkgFile_String"}], 
    "]"}], ":=", "\n", "  ", 
   RowBox[{"If", "[", 
    RowBox[{
     RowBox[{"!", 
      RowBox[{"MemberQ", "[", 
       RowBox[{
        RowBox[{"PackageLoadedPackages", "[", "pkg", "]"}], ",", " ", 
        "pkgFile"}], "]"}]}], ",", "\n", "    ", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"!", 
        RowBox[{"KeyMemberQ", "[", 
         RowBox[{
          RowBox[{"PackageDeclaredPackages", "[", "pkg", "]"}], ",", " ", 
          "pkgFile"}], "]"}]}], ",", "\n", "      ", 
       RowBox[{"PackageDeclarePackage", "[", "\n", "        ", 
        RowBox[{"pkg", ",", "\n", "        ", 
         RowBox[{"PackagePullDeclarations", "[", 
          RowBox[{"pkg", ",", " ", "pkgFile"}], "]"}]}], "\n", "        ", 
        "]"}]}], "\n", "      ", "]"}], ",", "\n", "    ", 
     RowBox[{"PackageFrameworkPackageGet", "[", 
      RowBox[{"pkg", ",", " ", "pkgFile"}], "]"}]}], "\n", "    ", "]"}]}], 
  ";"}]}], "Code",ExpressionUUID->"90f20fb2-1b5a-4525-b7a9-85a68b5b9fec"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PackageFrameworkPackageLoad", "Subsubsection",ExpressionUUID->"63629b75-70b4-45c9-a722-f573a0353e66"],

Cell[BoxData[
 RowBox[{
  RowBox[{"BindPackageMethod", "[", 
   RowBox[{"\"\<Load\>\"", ",", " ", "PackageFrameworkPackageLoad"}], "]"}], 
  ";"}]], "Code",ExpressionUUID->"b3408bce-10fc-498d-96d9-c3b9bf19537e"],

Cell[BoxData[{
 RowBox[{"PackageFrameworkPackageLoad", "//", "Clear"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackageFrameworkPackageLoad", "::", "doc"}], "=", 
   "\"\<\nLoops over all of the available files in the package and \\\n\
creates subcontexts for directories and configures auto-loading for the \
package files\n\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackageFrameworkPackageLoad", "[", 
    RowBox[{
    "pkg_PackageFrameworkPackage", ",", " ", "dir_", ",", " ", "listing_"}], 
    "]"}], ":=", "\n", "  ", 
   RowBox[{"Module", "[", "\n", "    ", 
    RowBox[{
     RowBox[{"{", "\n", "      ", 
      RowBox[{
       RowBox[{"fileNames", "=", "\n", "        ", 
        RowBox[{"Select", "[", "\n", "          ", 
         RowBox[{
          RowBox[{"FileNames", "[", 
           RowBox[{"\"\<*\>\"", ",", " ", "dir"}], "]"}], ",", "\n", 
          "          ", 
          RowBox[{
           RowBox[{
            RowBox[{"DirectoryQ", "@", "#"}], "||", 
            RowBox[{"MatchQ", "[", 
             RowBox[{
              RowBox[{"FileExtension", "[", "#", "]"}], ",", " ", 
              RowBox[{"\"\<m\>\"", "|", "\"\<wl\>\""}]}], "]"}]}], "&"}]}], 
         "\n", "          ", "]"}]}], ",", "\n", "       ", "preload", ",", 
       "\n", "       ", "packages", ",", "\n", "       ", "postload"}], "\n", 
      "      ", "}"}], ",", "\n", "    ", 
     RowBox[{"(*", " ", 
      RowBox[{"preloaded", " ", "packages"}], " ", "*)"}], "\n", "    ", 
     RowBox[{
      RowBox[{"preload", " ", "=", " ", "\n", "      ", 
       RowBox[{"Select", "[", 
        RowBox[{"fileNames", ",", " ", "\n", "        ", 
         RowBox[{
          RowBox[{"StringMatchQ", "[", "\n", "          ", 
           RowBox[{
            RowBox[{"ToLowerCase", "@", 
             RowBox[{"FileNameTake", "[", "#", "]"}]}], ",", "\n", 
            "          ", 
            RowBox[{"\"\<__pre__.\>\"", "~~", 
             RowBox[{"(", 
              RowBox[{"\"\<m\>\"", "|", "\"\<wl\>\""}], ")"}]}]}], "\n", 
           "          ", "]"}], "&"}]}], "\n", "        ", "]"}]}], ";", "\n",
       "    ", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"Length", "@", "preload"}], ">", "0"}], ",", " ", 
        RowBox[{"Get", "[", 
         RowBox[{"preload", "[", 
          RowBox[{"[", 
           RowBox[{"-", "1"}], "]"}], "]"}], "]"}]}], "]"}], ";", "\n", 
      "    ", 
      RowBox[{"(*", " ", 
       RowBox[{"normally", " ", "loaded", " ", "packages"}], " ", "*)"}], 
      "\n", "    ", 
      RowBox[{"packages", " ", "=", " ", 
       RowBox[{"Select", "[", 
        RowBox[{"fileNames", ",", " ", 
         RowBox[{
          RowBox[{"StringFreeQ", "[", "\"\<__\>\"", "]"}], "@*", 
          "FileBaseName"}]}], "]"}]}], ";", "\n", "    ", 
      RowBox[{"SetProperty", "[", 
       RowBox[{"pkg", ",", " ", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"\"\<PackageListing\>\"", ",", " ", "listing"}], "}"}], "->",
          "packages"}]}], "]"}], ";", "\n", "    ", 
      RowBox[{"PackageFrameworkPackageLoad", "[", 
       RowBox[{"pkg", ",", " ", "packages"}], "]"}], ";", "\n", "    ", 
      RowBox[{"(*", " ", 
       RowBox[{
       "packages", " ", "loaded", " ", "after", " ", "all", " ", "the", " ", 
        "others", " ", "at", " ", "that", " ", "level"}], " ", "*)"}], "\n", 
      "    ", 
      RowBox[{"postload", " ", "=", " ", "\n", "      ", 
       RowBox[{"Select", "[", 
        RowBox[{"fileNames", ",", " ", "\n", "        ", 
         RowBox[{
          RowBox[{"StringMatchQ", "[", "\n", "          ", 
           RowBox[{
            RowBox[{"ToLowerCase", "@", 
             RowBox[{"FileNameTake", "[", "#", "]"}]}], ",", "\n", 
            "          ", 
            RowBox[{"\"\<__post__.\>\"", "~~", 
             RowBox[{"(", 
              RowBox[{"\"\<m\>\"", "|", "\"\<wl\>\""}], ")"}]}]}], "\n", 
           "          ", "]"}], "&"}]}], "\n", "        ", "]"}]}], ";", "\n",
       "    ", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"Length", "@", "postload"}], ">", "0"}], ",", " ", 
        RowBox[{"Get", "[", 
         RowBox[{"postload", "[", 
          RowBox[{"[", 
           RowBox[{"-", "1"}], "]"}], "]"}], "]"}]}], "]"}], ";"}]}], "\n", 
    "    ", "]"}]}], ";"}]}], "Code",ExpressionUUID->"d744f786-b600-4ad4-8994-\
f097d613e13d"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"PackageFrameworkPackageLoad", "[", 
    RowBox[{"pkg_PackageFrameworkPackage", ",", " ", 
     RowBox[{"dir_String", "?", "DirectoryQ"}]}], "]"}], ":=", "\n", "  ", 
   RowBox[{"With", "[", "\n", "    ", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"baseContext", " ", "=", " ", 
       RowBox[{"PackageFileContext", "[", 
        RowBox[{"pkg", ",", " ", "dir"}], "]"}]}], "}"}], ",", "\n", "    ", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"AllTrue", "[", 
        RowBox[{
         RowBox[{"StringSplit", "[", 
          RowBox[{"baseContext", ",", " ", "\"\<`\>\""}], "]"}], ",", " ", 
         RowBox[{"StringMatchQ", "[", 
          RowBox[{
           RowBox[{"(", 
            RowBox[{"WordCharacter", "|", "\"\<$\>\""}], ")"}], ".."}], 
          "]"}]}], "]"}], ",", "\n", "      ", 
       RowBox[{"Internal`WithLocalSettings", "[", "\n", "        ", 
        RowBox[{
         RowBox[{"Begin", "[", "baseContext", "]"}], ",", "\n", "        ", 
         RowBox[{
          RowBox[{"PackageAddContexts", "[", 
           RowBox[{"pkg", ",", " ", "baseContext"}], "]"}], ";", "\n", 
          "        ", 
          RowBox[{"PackageFrameworkPackageLoad", "[", "\n", "          ", 
           RowBox[{
           "pkg", ",", "\n", "          ", "dir", ",", " ", "\n", 
            "          ", 
            RowBox[{"FileNameDrop", "[", 
             RowBox[{"dir", ",", " ", 
              RowBox[{"FileNameDepth", "[", 
               RowBox[{"PackageRoot", "[", 
                RowBox[{"pkg", ",", " ", "\"\<Packages\>\""}], "]"}], "]"}]}],
              "]"}]}], "\n", "          ", "]"}]}], ",", "\n", "        ", 
         RowBox[{
          RowBox[{"End", "[", "]"}], ";"}]}], "\n", "        ", "]"}]}], "\n",
       "      ", "]"}]}], "\n", "    ", "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackageFrameworkPackageLoad", "[", 
    RowBox[{"pkg_PackageFrameworkPackage", ",", " ", 
     RowBox[{"file_String", "?", "FileExistsQ"}]}], "]"}], ":=", "\n", "  ", 
   RowBox[{"PackageLoadDeclare", "[", 
    RowBox[{"pkg", ",", " ", "file"}], "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{
   "PackageFrameworkPackageLoad", "[", "pkg_PackageFrameworkPackage", "]"}], ":=",
    "\n", "  ", 
   RowBox[{"PackageExecute", "[", "\n", "    ", 
    RowBox[{"pkg", ",", "\n", "    ", 
     RowBox[{
      RowBox[{"SetProperty", "[", 
       RowBox[{"pkg", ",", " ", 
        RowBox[{"\"\<PackageListing\>\"", "->", 
         RowBox[{"<|", "|>"}]}]}], "]"}], ";", "\n", "    ", 
      RowBox[{"PackageFrameworkPackageLoad", "[", "\n", "      ", 
       RowBox[{"pkg", ",", "\n", "      ", 
        RowBox[{"PackageRoot", "[", 
         RowBox[{"pkg", ",", " ", "\"\<Packages\>\""}], "]"}], ",", "\n", 
        "      ", 
        RowBox[{"PackageName", "[", "pkg", "]"}]}], "\n", "      ", "]"}]}]}],
     "\n", "    ", "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
  "PackageFrameworkPackageLoad", "~", "SetAttributes", "~", "Listable"}], 
  ";"}]}], "Code",ExpressionUUID->"1aa7db32-c6a7-4325-9a4f-56c820572b29"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PackageFrameworkPackageGet", "Subsubsection",ExpressionUUID->"b40bc2e3-f0cd-4b0b-a2eb-ac7de46ef783"],

Cell[BoxData[
 RowBox[{"BindPackageMethod", "[", 
  RowBox[{"\"\<Get\>\"", ",", " ", "PackageFrameworkPackageGet"}], 
  "]"}]], "Code",ExpressionUUID->"b276ed0f-ec25-437b-b1b4-1df7ef69cf04"],

Cell[BoxData[{
 RowBox[{"PackageFrameworkPackageGet", "//", "Clear"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackageFrameworkPackageGet", "[", 
    RowBox[{"pkg_PackageFrameworkPackage", ",", " ", "f_"}], "]"}], ":=", 
   "\n", "  ", 
   RowBox[{"PackageFrameworkPackageGet", "[", 
    RowBox[{"pkg", ",", " ", 
     RowBox[{"PackageFileContext", "[", 
      RowBox[{"pkg", ",", " ", "f"}], "]"}], ",", " ", "f"}], "]"}]}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackageFrameworkPackageGet", "[", 
    RowBox[{"pkg_PackageFrameworkPackage", ",", " ", "c_", ",", " ", "f_"}], 
    "]"}], ":=", "\n", "  ", 
   RowBox[{"PackageExecute", "[", "\n", "      ", 
    RowBox[{"pkg", ",", "\n", "      ", 
     RowBox[{"Get", "@", 
      RowBox[{"PackageFileFromName", "[", 
       RowBox[{"pkg", ",", " ", "f"}], "]"}]}], ",", "\n", "      ", "c"}], 
    "\n", "      ", "]"}]}], ";"}]}], "Code",ExpressionUUID->"6e8f686a-a09f-\
4edd-82bc-d3b2cbc87884"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PackageFrameworkPackageNeeds", "Subsubsection",ExpressionUUID->"7bba14f6-9cc1-47e6-b33e-07b304d0fd85"],

Cell[BoxData[
 RowBox[{"BindPackageMethod", "[", 
  RowBox[{"\"\<Needs\>\"", ",", " ", "PackageFrameworkPackageNeeds"}], 
  "]"}]], "Code",ExpressionUUID->"8c31bdc6-1342-42a1-bb6e-ef123084b40e"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"PackageFrameworkPackageNeeds", "[", 
    RowBox[{"pkg_", ",", " ", 
     RowBox[{"pkgFile_String", "?", "FileExistsQ"}]}], "]"}], ":=", "\n", 
   "  ", 
   RowBox[{"If", "[", 
    RowBox[{
     RowBox[{"!", 
      RowBox[{"MemberQ", "[", 
       RowBox[{
        RowBox[{"PackageLoadedPackages", "[", "pkg", "]"}], ",", " ", 
        "pkgFile"}], "]"}]}], ",", "\n", "    ", 
     RowBox[{
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"KeyMemberQ", "[", 
         RowBox[{
          RowBox[{"PackageDeclaredPackages", "[", "pkg", "]"}], ",", " ", 
          "pkgFile"}], "]"}], ",", "\n", "      ", 
        RowBox[{"PackageLoadDeclare", "[", 
         RowBox[{"pkg", ",", " ", "pkgFile"}], "]"}], ",", "\n", "      ", 
        RowBox[{"Do", "[", 
         RowBox[{
          RowBox[{"PackageLoadDeclare", "[", 
           RowBox[{"pkg", ",", " ", "pkgFile"}], "]"}], ",", " ", "2"}], 
         "]"}]}], " ", 
       RowBox[{"(*", " ", 
        RowBox[{
         RowBox[{
          RowBox[{"why", " ", "twice"}], "..."}], "?"}], " ", "*)"}], "\n", 
       "      ", "]"}], ";"}]}], "\n", "    ", "]"}]}], ";"}]], "Code",Express\
ionUUID->"9f37e06a-bc45-42a3-b753-592aa536d5c4"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"PackageFrameworkPackageNeeds", "[", 
    RowBox[{"pkg_", ",", " ", "pkgName_String"}], "]"}], ":=", "\n", "  ", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"pf", "=", 
       RowBox[{"PackageFilePath", "[", 
        RowBox[{"pkg", ",", " ", "\"\<Packages\>\"", ",", " ", 
         RowBox[{"pkgName", "<>", "\"\<.m\>\""}]}], "]"}]}], "}"}], ",", "\n",
      "    ", 
     RowBox[{
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"!", 
         RowBox[{"FileExistsQ", "@", "pf"}]}], ",", " ", 
        RowBox[{"PackageFilePath", "[", 
         RowBox[{"pkg", ",", " ", "\"\<Packages\>\"", ",", " ", 
          RowBox[{"pkgName", "<>", "\"\<.wl\>\""}]}], "]"}]}], "]"}], ";", 
      "\n", "    ", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"FileExistsQ", "@", "pf"}], ",", "\n", "      ", 
        RowBox[{"PackageFrameworkPackageNeeds", "[", 
         RowBox[{"pkg", ",", " ", "pf"}], "]"}], ",", 
        RowBox[{"\.00", " ", "\.00", "\n", "      ", "$Failed"}]}], "\n", 
       "      ", "]"}]}]}], "\n", "   ", "]"}]}], ";"}]], "Code",ExpressionUUI\
D->"f7d6ce0f-9c0d-4a55-a20d-396c10040650"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PackageEnsureLoad", "Subsubsection",ExpressionUUID->"f8f3c47f-03ba-4982-90a8-b6f2e499b8e9"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"PackageEnsureLoad", "[", "pkg_", "]"}], ":=", "\n", "  ", 
   RowBox[{"If", "[", 
    RowBox[{
     RowBox[{"!", 
      RowBox[{"TrueQ", "[", 
       RowBox[{"PropertyValue", "[", 
        RowBox[{"pkg", ",", " ", "\"\<LoadingFlag\>\""}], "]"}], "]"}]}], ",",
      "\n", "    ", 
     RowBox[{
      RowBox[{"SetProperty", "[", 
       RowBox[{"pkg", ",", " ", 
        RowBox[{"\"\<LoadingFlag\>\"", "->", "True"}]}], "]"}], ";", "\n", 
      "    ", 
      RowBox[{"PackageEnsureLoadDependencies", "[", "pkg", "]"}], ";", "\n", 
      "    ", 
      RowBox[{"PackageExposeContexts", "[", "pkg", "]"}], ";"}]}], "\n", 
    "    ", "]"}]}], ";"}]], "Code",ExpressionUUID->"630d63c4-3ee5-4b69-b601-\
05958826c6f5"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PackageCompleteLoadProcess", "Subsubsection",ExpressionUUID->"a2b4b3ee-9d1d-4e5a-9d08-2c153ead54a8"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"PackageCompleteLoadProcess", "::", "doc"}], "=", 
   "\"\<\nExists in this version of the PackageFramework simply to indicate \
that the full version will \\\ndo more with this. At this point doesn't \
really do much.\n\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackageCompleteLoadProcess", "[", "pkg_", "]"}], ":=", "\n", "  ",
    "pkg"}], ";"}]}], "Code",ExpressionUUID->"f8b8d5e1-7219-4462-853f-\
ac709599560e"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Dependencies", "Subsection",ExpressionUUID->"f34baaf9-3918-4383-8154-b21d76770219"],

Cell[CellGroupData[{

Cell["PackageLoadingMode", "Subsubsection",ExpressionUUID->"13d87d8e-00d7-4b56-9f51-55b938a3cbba"],

Cell[BoxData[
 RowBox[{
  RowBox[{"PackageLoadingMode", "[", "pkg_", "]"}], ":=", "\n", "  ", 
  RowBox[{"Replace", "[", 
   RowBox[{
    RowBox[{"pkg", "[", "\"\<LoadingMode\>\"", "]"}], ",", "\n", "    ", 
    RowBox[{"Automatic", ":>", "\n", "      ", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"TrueQ", "@", "$PackageFrameworkInDependencyLoad"}], ",", " ", 
       "\"\<Dependency\>\"", ",", " ", "\"\<Primary\>\""}], "]"}]}]}], "\n", 
   "    ", "]"}]}]], "Code",ExpressionUUID->"393e3eb4-fbe3-4922-851d-\
5d8c66d453d7"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PackageDependencies", "Subsubsection",ExpressionUUID->"0128bb40-5e89-431f-a828-84f12e472807"],

Cell[BoxData[
 RowBox[{
  RowBox[{"PackageDependencies", "[", "pkg_PackageFrameworkPackage", "]"}], ":=",
   "\n", "  ", 
  RowBox[{"pkg", "[", "\"\<Dependencies\>\"", "]"}]}]], "Code",ExpressionUUID->\
"ad5fb33f-4e9f-432c-8166-4e9c48540668"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PackageDependencyBase", "Subsubsection",ExpressionUUID->"a06b0370-81e2-4d5c-9819-c5394f387424"],

Cell[BoxData[
 RowBox[{
  RowBox[{"PackageDependencyBase", "[", "pkg_PackageFrameworkPackage", "]"}], 
  ":=", "\n", "  ", 
  RowBox[{"Replace", "[", "\n", "    ", 
   RowBox[{
    RowBox[{"pkg", "[", 
     RowBox[{"\"\<LoadInfo\>\"", ",", " ", "\"\<DependencyServer\>\""}], 
     "]"}], ",", "\n", "    ", 
    RowBox[{"_Missing", "->", "Automatic"}]}], "\n", "    ", "]"}]}]], "Code",\
ExpressionUUID->"cd3c1151-d658-4430-8b3d-edccd582b6a4"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PackageCheckPacletDependency", "Subsubsection",ExpressionUUID->"1fa78a72-3412-457a-8daf-cf94c6170336"],

Cell[BoxData[
 RowBox[{
  RowBox[{"PackageCheckPacletDependency", "[", "dep_", "]"}], ":=", "\n", 
  "  ", 
  RowBox[{
   RowBox[{"Length", "@", 
    RowBox[{"PacletManager`PacletFind", "[", 
     RowBox[{"StringDelete", "[", 
      RowBox[{"dep", ",", " ", "\"\<`\>\""}], "]"}], "]"}]}], ">", 
   "0"}]}]], "Code",ExpressionUUID->"106dae15-0d0a-4b50-9e81-53c13be42427"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PackageInstallPacletDependency", "Subsubsection",ExpressionUUID->"5da6114d-0ecb-4067-8285-3910725ef543"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"PackageFrameworkPackage", "::", "nodep"}], "=", 
   "\"\<Couldn't load dependency `` of type ``\>\""}], ";"}]], "Code",Expressi\
onUUID->"264d9b8e-af68-4e95-872e-e37dc1559647"],

Cell[BoxData[
 RowBox[{
  RowBox[{
  "$PacletRepositoryServer", "=", 
   "\"\<http://raw.githubusercontent.com/paclets/PacletServer/master\>\""}], 
  ";"}]], "Code",ExpressionUUID->"2e343610-ab6d-4ed3-b3df-0b4035eeff74"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"Options", "[", "PackageInstallPacletDependency", "]"}], "=", "\n",
    "  ", 
   RowBox[{"Options", "[", "PacletManager`PacletInstall", "]"}]}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{"PackageInstallPacletDependency", "[", "\n", "  ", 
   RowBox[{
    RowBox[{"deps", ":", 
     RowBox[{"{", "\n", "    ", 
      RowBox[{"__String", "?", 
       RowBox[{"(", "\n", "      ", 
        RowBox[{"StringMatchQ", "[", "\n", "        ", 
         RowBox[{
          RowBox[{"(", 
           RowBox[{"LetterCharacter", "|", "\"\<_\>\"", "|", "\"\<`\>\""}], 
           ")"}], "~~", 
          RowBox[{
           RowBox[{"(", 
            RowBox[{"WordCharacter", "|", "\"\<_\>\"", "|", "\"\<`\>\""}], 
            ")"}], ".."}]}], "\n", "        ", "]"}], "\n", "    ", ")"}]}], 
      "}"}]}], ",", " ", "\n", "  ", 
    RowBox[{"ops", ":", 
     RowBox[{"OptionsPattern", "[", "]"}]}]}], "\n", "  ", "]"}], ":=", "\n", 
  "  ", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"site", ",", " ", "pacs", ",", " ", "pac"}], "}"}], ",", "\n", 
    "    ", 
    RowBox[{
     RowBox[{"pacs", "=", "\n", "      ", 
      RowBox[{"StringDelete", "[", 
       RowBox[{"deps", ",", " ", "\"\<`\>\""}], "]"}]}], ";", "\n", "    ", 
     RowBox[{"site", "=", "\n", "      ", 
      RowBox[{"Replace", "[", 
       RowBox[{
        RowBox[{"OptionValue", "[", "\"\<Site\>\"", "]"}], ",", "\n", 
        "        ", 
        RowBox[{"{", "\n", "          ", 
         RowBox[{
          RowBox[{
           RowBox[{"s_String", "?", 
            RowBox[{"(", "\n", "            ", 
             RowBox[{
              RowBox[{
               RowBox[{"URLParse", "[", 
                RowBox[{"#", ",", " ", "\"\<Domain\>\""}], "]"}], "===", 
               "\"\<github.com\>\""}], "&"}], "\n", "            ", ")"}]}], ":>",
            "\n", "          ", 
           RowBox[{"URLBuild", "@", "\n", "            ", 
            RowBox[{"<|", "\n", "              ", 
             RowBox[{
              RowBox[{"\"\<Scheme\>\"", "->", "\"\<http\>\""}], ",", "\n", 
              "              ", 
              RowBox[{
              "\"\<Domain\>\"", "->", "\"\<raw.githubusercontent.com\>\""}], 
              ",", "\n", "              ", 
              RowBox[{"\"\<Path\>\"", "->", "\n", "                ", 
               RowBox[{
                RowBox[{"Function", "[", 
                 RowBox[{"If", "[", 
                  RowBox[{
                   RowBox[{
                    RowBox[{"Length", "[", "#", "]"}], "==", "2"}], ",", " ", 
                   
                   RowBox[{"Append", "[", 
                    RowBox[{"#", ",", " ", "\"\<master\>\""}], "]"}], ",", 
                   " ", "#"}], "]"}], "]"}], "@", "\n", "                  ", 
                
                RowBox[{
                 RowBox[{"DeleteCases", "[", "\"\<\>\"", "]"}], "@", 
                 RowBox[{"URLParse", "[", 
                  RowBox[{"s", ",", " ", "\"\<Path\>\""}], "]"}]}]}]}]}], 
             "\n", "              ", "|>"}]}]}], ",", "\n", "          ", 
          RowBox[{"None", "->", "\n", "            ", "Automatic"}], ",", 
          "\n", "          ", 
          RowBox[{
           RowBox[{"Except", "[", "_String", "]"}], "->", "\n", 
           "            ", "$PacletRepositoryServer"}]}], "\n", "          ", 
         "}"}]}], "\n", "        ", "]"}]}], ";", "\n", "    ", 
     RowBox[{"pac", "=", 
      RowBox[{"First", "@", "pacs"}]}], ";", "\n", "    ", 
     RowBox[{"Monitor", "[", "\n", "      ", 
      RowBox[{
       RowBox[{"MapThread", "[", "\n", "        ", 
        RowBox[{
         RowBox[{
          RowBox[{"Check", "[", "\n", "          ", 
           RowBox[{
            RowBox[{
            "PacletManager`PacletInstall", "[", "\n", "            ", 
             RowBox[{
              RowBox[{"pac", "=", "#"}], ",", "\n", "            ", 
              RowBox[{"\"\<Site\>\"", "->", "site"}], ",", "\n", 
              "            ", "ops"}], "\n", "            ", "]"}], ",", "\n",
             "          ", 
            RowBox[{
             RowBox[{"Message", "[", 
              RowBox[{
               RowBox[{"PackageFrameworkPackage", "::", "nodep"}], ",", " ", 
               "#2", ",", " ", "\"\<Paclet\>\""}], "]"}], ";", "\n", 
             "          ", "$Failed"}]}], "\n", "          ", "]"}], "&"}], 
         ",", "\n", "        ", 
         RowBox[{"{", "\n", "          ", 
          RowBox[{"pacs", ",", "\n", "          ", "deps"}], "\n", 
          "          ", "}"}]}], "\n", "        ", "]"}], ",", "\n", "      ", 
       RowBox[{"Internal`LoadingPanel", "[", "\n", "        ", 
        RowBox[{"TemplateApply", "[", "\n", "          ", 
         RowBox[{
         "\"\<Loading paclet `` from site ``\>\"", ",", "\n", "          ", 
          RowBox[{"{", 
           RowBox[{"pac", ",", " ", "site"}], "}"}]}], "\n", "          ", 
         "]"}], "\n", "        ", "]"}]}], "\n", "      ", "]"}]}]}], "\n", 
   "    ", "]"}]}]}], "Code",ExpressionUUID->"aa206e11-5423-4893-81fe-\
2cf2177a25a5"],

Cell[BoxData[
 RowBox[{
  RowBox[{"PackageInstallPacletDependency", "[", "\n", "  ", 
   RowBox[{
    RowBox[{"dep", ":", 
     RowBox[{"_String", "?", 
      RowBox[{"(", "\n", "    ", 
       RowBox[{"StringMatchQ", "[", "\n", "      ", 
        RowBox[{
         RowBox[{"(", 
          RowBox[{"LetterCharacter", "|", "\"\<_\>\"", "|", "\"\<`\>\""}], 
          ")"}], "~~", 
         RowBox[{
          RowBox[{"(", 
           RowBox[{"WordCharacter", "|", "\"\<_\>\"", "|", "\"\<`\>\""}], 
           ")"}], ".."}]}], "\n", "      ", "]"}], "\n", "    ", ")"}]}]}], 
    ",", " ", "\n", "  ", 
    RowBox[{"ops", ":", 
     RowBox[{"OptionsPattern", "[", "]"}]}]}], "\n", "  ", "]"}], ":=", 
  RowBox[{"First", "@", 
   RowBox[{"PackageInstallPacletDependency", "[", 
    RowBox[{
     RowBox[{"{", "dep", "}"}], ",", " ", "ops"}], "]"}]}]}]], "Code",Expressi\
onUUID->"02af1d23-865c-4798-8dce-9fedb7c6be88"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PackageUpdatePacletDependency", "Subsubsection",ExpressionUUID->"611b62d0-edb9-4751-8fca-069fa61c5f25"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"PackageFrameworkPackage", "::", "nodup"}], "=", 
   "\"\<Couldn't update dependency `` of type ``\>\""}], ";"}]], "Code",Expres\
sionUUID->"5e964159-1201-4a15-af70-17667e7619dd"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"Options", "[", "PackageUpdatePacletDependency", "]"}], "=", "\n", 
   "  ", 
   RowBox[{"{", "\n", "    ", 
    RowBox[{"\"\<Sites\>\"", "->", "Automatic"}], "\n", "    ", "}"}]}], 
  ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackageUpdatePacletDependency", "[", "\n", "  ", 
    RowBox[{
     RowBox[{"deps", ":", 
      RowBox[{"{", 
       RowBox[{"__String", "?", 
        RowBox[{"(", 
         RowBox[{"StringMatchQ", "[", 
          RowBox[{
           RowBox[{"(", 
            RowBox[{"LetterCharacter", "|", "\"\<_\>\""}], ")"}], "~~", 
           RowBox[{
            RowBox[{"(", 
             RowBox[{"WordCharacter", "|", "\"\<_\>\""}], ")"}], ".."}]}], 
          "]"}], ")"}]}], "}"}]}], ",", " ", "\n", "  ", 
     RowBox[{"ops", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "\n", "  ", "]"}], ":=", "\n",
    "  ", 
   RowBox[{"Block", "[", "\n", "    ", 
    RowBox[{
     RowBox[{"{", "\n", "      ", 
      RowBox[{
       RowBox[{"added", "=", 
        RowBox[{"<|", "|>"}]}], ",", "\n", "      ", 
       RowBox[{"ps", "=", 
        RowBox[{"PacletManager`PacletSites", "[", "]"}]}], ",", "\n", 
       "      ", "pac"}], "\n", "      ", "}"}], ",", "\n", "    ", 
     RowBox[{
      RowBox[{"Replace", "[", "\n", "      ", 
       RowBox[{
        RowBox[{"Replace", "[", 
         RowBox[{
          RowBox[{"OptionValue", "[", "\"\<Sites\>\"", "]"}], ",", " ", 
          RowBox[{"Automatic", ":>", 
           RowBox[{"{", "$PacletRepositoryServer", "}"}]}]}], "]"}], ",", 
        "\n", "      ", 
        RowBox[{"{", "\n", "        ", 
         RowBox[{
          RowBox[{"s_String", ":>", "\n", "          ", 
           RowBox[{"If", "[", 
            RowBox[{
             RowBox[{"!", 
              RowBox[{"MemberQ", "[", 
               RowBox[{"ps", ",", " ", 
                RowBox[{"PacletManager`PacletSite", "[", 
                 RowBox[{"s", ",", " ", "___"}], "]"}]}], "]"}]}], ",", "\n", 
             "            ", 
             RowBox[{
              RowBox[{"added", "[", "s", "]"}], "=", "True"}]}], "\n", 
            "            ", "]"}]}], ",", "\n", "        ", 
          RowBox[{
           RowBox[{"p", ":", 
            RowBox[{"PacletManager`PacletSite", "[", "__", "]"}]}], ":>", 
           "\n", "          ", 
           RowBox[{"If", "[", 
            RowBox[{
             RowBox[{"!", 
              RowBox[{"MemberQ", "[", 
               RowBox[{"ps", ",", " ", "p"}], "]"}]}], ",", "\n", 
             "            ", 
             RowBox[{
              RowBox[{"added", "[", "p", "]"}], "=", "True"}]}], "\n", 
            "            ", "]"}]}]}], "\n", "        ", "}"}], ",", "\n", 
        "      ", "1"}], "\n", "      ", "]"}], ";", "\n", "    ", 
      RowBox[{"pac", "=", 
       RowBox[{"StringDelete", "[", 
        RowBox[{
         RowBox[{"deps", "[", 
          RowBox[{"[", "1", "]"}], "]"}], ",", " ", "\"\<`\>\""}], "]"}]}], 
      ";", "\n", "    ", 
      RowBox[{"Internal`WithLocalSettings", "[", "\n", "      ", 
       RowBox[{
        RowBox[{"KeyMap", "[", 
         RowBox[{"PacletManager`PacletSiteAdd", ",", " ", "added"}], "]"}], 
        ",", "\n", "      ", 
        RowBox[{"Monitor", "[", "\n", "        ", 
         RowBox[{
          RowBox[{"MapThread", "[", "\n", "          ", 
           RowBox[{
            RowBox[{
             RowBox[{"Check", "[", "\n", "            ", 
              RowBox[{
               RowBox[{"PacletManager`PacletCheckUpdate", "[", 
                RowBox[{"pac", "=", "#"}], "]"}], ",", "\n", "            ", 
               RowBox[{
                RowBox[{"Message", "[", 
                 RowBox[{
                  RowBox[{"PackageFrameworkPackage", "::", "nodup"}], ",", 
                  " ", "#2", ",", " ", "\"\<Paclet\>\""}], "]"}], ";", "\n", 
                "            ", "$Failed"}]}], "\n", "            ", "]"}], 
             "&"}], ",", "\n", "          ", 
            RowBox[{"{", "\n", "            ", 
             RowBox[{
              RowBox[{"StringDelete", "[", 
               RowBox[{"deps", ",", " ", "\"\<`\>\""}], "]"}], ",", "\n", 
              "            ", "deps"}], "\n", "            ", "}"}]}], "\n", 
           "          ", "]"}], ",", "\n", "        ", 
          RowBox[{"Internal`LoadingPanel", "[", "\n", "          ", 
           RowBox[{
           "\"\<Updating paclet ``\>\"", "~", "TemplateApply", "~", "pac"}], 
           "\n", "          ", "]"}]}], "\n", "        ", "]"}], ",", "\n", 
        "      ", 
        RowBox[{"KeyMap", "[", 
         RowBox[{"PacletManager`PacletSiteRemove", ",", " ", "added"}], 
         "]"}]}], "\n", "      ", "]"}]}]}], "\n", "    ", "]"}]}], 
  ";"}]}], "Code",ExpressionUUID->"56e2bd70-d553-4e00-b6f9-8851e0f8000a"],

Cell[BoxData[
 RowBox[{
  RowBox[{"PackageUpdatePacletDependency", "[", "\n", "  ", 
   RowBox[{
    RowBox[{"dep", ":", 
     RowBox[{"_String", "?", 
      RowBox[{"(", 
       RowBox[{"StringMatchQ", "[", 
        RowBox[{
         RowBox[{"(", 
          RowBox[{"LetterCharacter", "|", "\"\<_\>\""}], ")"}], "~~", 
         RowBox[{
          RowBox[{"(", 
           RowBox[{"WordCharacter", "|", "\"\<_\>\""}], ")"}], ".."}]}], 
        "]"}], ")"}]}]}], ",", " ", "\n", "  ", 
    RowBox[{"ops", ":", 
     RowBox[{"OptionsPattern", "[", "]"}]}]}], "\n", "  ", "]"}], ":=", "\n", 
  "  ", 
  RowBox[{"First", "@", 
   RowBox[{"PackageUpdatePacletDependency", "[", 
    RowBox[{
     RowBox[{"{", "dep", "}"}], ",", " ", "ops"}], "]"}]}]}]], "Code",Expressi\
onUUID->"828d2238-070e-4007-afbd-8b52c0b569b3"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PackageLoadPacletDependency", "Subsubsection",ExpressionUUID->"69eaee29-973f-47db-9739-98c815a96467"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"Options", "[", "PackageLoadPacletDependency", "]"}], "=", "\n", 
   "  ", 
   RowBox[{"Join", "[", "\n", "    ", 
    RowBox[{
     RowBox[{"Options", "[", "PackageInstallPacletDependency", "]"}], ",", 
     "\n", "    ", 
     RowBox[{"{", "\n", "      ", 
      RowBox[{"\"\<Update\>\"", "->", "False"}], "\n", "      ", "}"}]}], 
    "\n", "    ", "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{"PackageLoadPacletDependency", "[", 
   RowBox[{"pkg_", ",", " ", 
    RowBox[{"dep_String", "?", 
     RowBox[{"(", 
      RowBox[{"StringEndsQ", "[", "\"\<`\>\"", "]"}], ")"}]}], ",", " ", 
    RowBox[{"ops", ":", 
     RowBox[{"OptionsPattern", "[", "]"}]}]}], "]"}], ":=", "\n", "  ", 
  RowBox[{"Internal`WithLocalSettings", "[", "\n", "    ", 
   RowBox[{
    RowBox[{
     RowBox[{"System`Private`NewContextPath", "[", 
      RowBox[{"{", 
       RowBox[{"dep", ",", " ", "\"\<System`\>\""}], "}"}], "]"}], ";"}], ",",
     "\n", "    ", 
    RowBox[{
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"PackageCheckPacletDependency", "[", 
        RowBox[{"pkg", ",", " ", "dep"}], "]"}], ",", "\n", "      ", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"TrueQ", "@", 
          RowBox[{"OptionValue", "[", "\"\<Update\>\"", "]"}]}], ",", "\n", 
         "        ", 
         RowBox[{"PackageUpdatePacletDependency", "[", "\n", "          ", 
          RowBox[{
          "pkg", ",", "\n", "          ", "dep", ",", "\n", "          ", 
           RowBox[{"\"\<Sites\>\"", "->", 
            RowBox[{"Replace", "[", 
             RowBox[{
              RowBox[{"OptionValue", "[", "\"\<Site\>\"", "]"}], ",", " ", 
              RowBox[{"s_String", ":>", 
               RowBox[{"{", "s", "}"}]}]}], "]"}]}]}], "\n", "          ", 
          "]"}]}], "\n", "        ", "]"}], ",", "\n", "      ", 
       RowBox[{"PackageInstallPacletDependency", "[", "\n", "        ", 
        RowBox[{
        "pkg", ",", "\n", "        ", "dep", ",", " ", "\n", "        ", 
         RowBox[{"FilterRules", "[", 
          RowBox[{
           RowBox[{"{", "ops", "}"}], ",", " ", 
           RowBox[{"Options", "@", "PackageInstallPacletDependency"}]}], 
          "]"}]}], "\n", "        ", "]"}]}], "\n", "      ", "]"}], ";", 
     "\n", "    ", 
     RowBox[{"Needs", "[", "dep", "]"}], ";", "\n", "    ", 
     RowBox[{"PackageExtendContextPath", "[", "\n", "      ", 
      RowBox[{"pkg", ",", "\n", "      ", 
       RowBox[{"Select", "[", 
        RowBox[{"$Packages", ",", " ", "\n", "        ", 
         RowBox[{
          RowBox[{
           RowBox[{"StringStartsQ", "[", 
            RowBox[{"#", ",", " ", "dep"}], "]"}], "&&", 
           RowBox[{"StringFreeQ", "[", 
            RowBox[{"#", ",", " ", "\"\<`*Private`\>\""}], "]"}]}], "&"}]}], 
        "\n", "        ", "]"}]}], "\n", "      ", "]"}], ";"}], ",", "\n", 
    "    ", 
    RowBox[{
     RowBox[{"System`Private`RestoreContextPath", "[", "]"}], ";"}]}], "\n", 
   "    ", "]"}]}]}], "Code",ExpressionUUID->"d8c8498f-ca33-4918-9d38-\
8ca9ad748545"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PackageEnsureLoadDependency", "Subsubsection",ExpressionUUID->"2575eb4c-f4d4-499f-b985-8fb51523048e"],

Cell[BoxData[
 RowBox[{
  RowBox[{"dependencyPackageMainPackageRoot", "[", "pkg_", "]"}], ":=", "\n", 
  "  ", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", "pfp", "}"}], ",", "\n", "    ", 
    RowBox[{
     RowBox[{"pfp", " ", "=", " ", "\n", "      ", 
      RowBox[{"SplitBy", "[", "\n", "        ", 
       RowBox[{
        RowBox[{"FileNameSplit", "[", 
         RowBox[{"PackageRoot", "[", "pkg", "]"}], "]"}], ",", "\n", 
        "        ", 
        RowBox[{
         RowBox[{"#", "===", "\"\<Dependencies\>\""}], "&"}]}], "\n", 
       "        ", "]"}]}], ";", "\n", "    ", 
     RowBox[{
      RowBox[{"Reap", "[", "\n", "      ", 
       RowBox[{"Fold", "[", "\n", "        ", 
        RowBox[{
         RowBox[{
          RowBox[{
           RowBox[{"If", "[", 
            RowBox[{
             RowBox[{"#2", "===", "\"\<Dependencies\>\""}], ",", " ", "\n", 
             "          ", "Sow", ",", "\n", "          ", "Identity"}], "\n",
             "          ", "]"}], "@", "\n", "          ", 
           RowBox[{"FileNameJoin", "@", 
            RowBox[{"Flatten", "@", 
             RowBox[{"{", 
              RowBox[{"#", ",", " ", "#2"}], "}"}]}]}]}], "&"}], ",", "\n", 
         "        ", "pfp"}], "\n", "        ", "]"}], "\n", "      ", "]"}], 
      "[", 
      RowBox[{"[", "2", "]"}], "]"}]}]}], "\n", "    ", "]"}]}]], "Code",Expre\
ssionUUID->"ae4930ae-55bd-4192-a4d8-f9ad392b57ad"],

Cell[BoxData[{
 RowBox[{"PackageEnsureLoadDependency", "//", "Clear"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"Options", "[", "PackageEnsureLoadDependency", "]"}], "=", "\n", 
   "  ", 
   RowBox[{"Join", "[", "\n", "    ", 
    RowBox[{
     RowBox[{"Options", "@", "PackageLoadPacletDependency"}], ",", "\n", 
     "    ", 
     RowBox[{"{", "\n", "      ", 
      RowBox[{"\"\<Bundled\>\"", "->", "True"}], "\n", "      ", "}"}]}], 
    "\n", "    ", "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"PackageEnsureLoadDependency", "[", 
    RowBox[{"pkg_PackageFrameworkPackage", ",", " ", "dep_", ",", " ", 
     RowBox[{"ops", ":", 
      RowBox[{"OptionsPattern", "[", "]"}]}]}], "]"}], ":=", "\n", "  ", 
   RowBox[{"Module", "[", "\n", "    ", 
    RowBox[{
     RowBox[{"{", "\n", "      ", 
      RowBox[{
      "depsDir", ",", "\n", "      ", "pfp", ",", "\n", "      ", "foundFile",
        ",", "\n", "      ", 
       RowBox[{"bund", "=", 
        RowBox[{"TrueQ", "@", 
         RowBox[{"Quiet", "@", 
          RowBox[{"OptionValue", "[", 
           RowBox[{
           "PackageEnsureLoadDependency", ",", " ", "ops", ",", " ", 
            "\"\<Bundled\>\""}], "]"}]}]}]}]}], "\n", "      ", "}"}], ",", 
     "\n", "     ", 
     RowBox[{
      RowBox[{"depsDir", "=", "\n", "       ", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"PackageLoadingMode", "[", "pkg", "]"}], "===", 
          "\"\<Dependency\>\""}], ",", "\n", "         ", 
         RowBox[{"DeleteDuplicates", "@", 
          RowBox[{"Flatten", "@", 
           RowBox[{"{", "\n", "          ", 
            RowBox[{
             RowBox[{"ParentDirectory", "@", 
              RowBox[{"PackageRoot", "[", "pkg", "]"}]}], ",", "\n", 
             "          ", 
             RowBox[{"PackageRoot", "[", 
              RowBox[{"pkg", ",", " ", "\"\<Dependencies\>\""}], "]"}], ",", 
             "\n", "          ", 
             RowBox[{"dependencyPackageMainPackageRoot", "[", "pkg", "]"}]}], 
            "\n", "         ", "}"}]}]}], ",", "\n", "        ", 
         RowBox[{"{", 
          RowBox[{"PackageRoot", "[", 
           RowBox[{"pkg", ",", " ", "\"\<Dependencies\>\""}], "]"}], "}"}]}], 
        "\n", "        ", "]"}]}], ";", "\n", "     ", 
      RowBox[{"If", "[", 
       RowBox[{"bund", ",", "\n", "       ", 
        RowBox[{
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"AnyTrue", "[", 
            RowBox[{"depsDir", ",", " ", "DirectoryQ"}], "]"}], ",", "\n", 
           "         ", 
           RowBox[{
            RowBox[{"foundFile", "=", "\n", "           ", 
             RowBox[{"Block", "[", "\n", "             ", 
              RowBox[{
               RowBox[{"{", "\n", "               ", 
                RowBox[{
                 RowBox[{"$Path", "=", "depsDir"}], ",", "\n", 
                 "               ", "PacletManager`PacletManagerEnabled"}], 
                "\n", "               ", "}"}], ",", "\n", "             ", 
               RowBox[{"FindFile", "[", "dep", "]"}]}], "\n", "             ",
               "]"}]}], ";"}]}], "\n", "         ", "]"}], ";", "\n", 
         "       ", 
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"!", 
            RowBox[{"StringQ", "@", "foundFile"}]}], ",", " ", "\n", 
           "         ", 
           RowBox[{"foundFile", "=", 
            RowBox[{"FindFile", "[", "dep", "]"}]}]}], "\n", "         ", 
          "]"}], ";", "\n", "       ", 
         RowBox[{"bund", "=", 
          RowBox[{"StringQ", "@", "foundFile"}]}]}]}], "\n", "       ", "]"}],
       ";", "\n", "     ", 
      RowBox[{"Block", "[", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{"$PackageFrameworkInDependencyLoad", "=", "True"}], "}"}], 
        ",", "\n", "       ", 
        RowBox[{"Quiet", "[", 
         RowBox[{"(*", " ", 
          RowBox[{
          "this", " ", "is", " ", "a", " ", "temporary", " ", "hack", " ", 
           "until", " ", "WRI", " ", "fixes", " ", "a", " ", "$ContextPath", 
           " ", "bug"}], " ", "*)"}], "\n", "         ", 
         RowBox[{
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{"!", "bund"}], ",", "\n", "           ", 
            RowBox[{"PackageLoadPacletDependency", "[", "\n", "             ", 
             RowBox[{"dep", ",", "\n", "             ", 
              RowBox[{"Sequence", "@@", "\n", "               ", 
               RowBox[{"FilterRules", "[", "\n", "                 ", 
                RowBox[{
                 RowBox[{"{", "\n", "                   ", 
                  RowBox[{"ops", ",", "\n", "                   ", 
                   RowBox[{"\"\<Update\>\"", "->", "True"}], ",", "\n", 
                   "                   ", 
                   RowBox[{"\"\<Loading\>\"", "->", "Get"}]}], "\n", 
                  "                   ", "}"}], ",", "\n", 
                 "                 ", 
                 RowBox[{"Options", "@", "PackageLoadPacletDependency"}]}], 
                "\n", "                 ", "]"}]}]}], "\n", "             ", 
             "]"}], ",", "\n", "           ", 
            RowBox[{
             RowBox[{"Lookup", "[", 
              RowBox[{
               RowBox[{"Flatten", "@", 
                RowBox[{"{", "ops", "}"}]}], ",", " ", "\"\<Loading\>\"", ",",
                " ", "Get"}], "]"}], "@", "foundFile"}]}], "\n", 
           "           ", 
           RowBox[{"(*", " ", 
            RowBox[{
             RowBox[{
              RowBox[{
               RowBox[{
               "I", " ", "have", " ", "my", " ", "reasons", " ", "to", " ", 
                "do", " ", "this", " ", "rather", " ", "than", " ", "Needs"}],
                "..."}], " ", "but", " ", "it", " ", "could", " ", "change"}],
              "..."}], " ", "*)"}], "\n", "           ", "]"}], ",", "\n", 
          "        ", 
          RowBox[{"General", "::", "shdw"}]}], "\n", "        ", "]"}]}], 
       "\n", "      ", "]"}], ";"}]}], "\n", "    ", "]"}]}], ";"}]}], "Code",\
ExpressionUUID->"1bafca60-2000-4082-a668-3588a033f364"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PackageEnsureLoadDependencies", "Subsubsection",ExpressionUUID->"6ca9fa1d-0d7d-4f41-a867-bb8d289f1349"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{
   "PackageEnsureLoadDependencies", "[", "pkg_PackageFrameworkPackage", "]"}],
    ":=", "\n", "  ", 
   RowBox[{"If", "[", 
    RowBox[{
     RowBox[{"!", 
      RowBox[{"TrueQ", "@", 
       RowBox[{"PropertyValue", "[", 
        RowBox[{"pkg", ",", " ", "\"\<DependenciesLoadedFlag\>\""}], 
        "]"}]}]}], ",", "\n", "    ", 
     RowBox[{
      RowBox[{"SetProperty", "[", 
       RowBox[{"pkg", ",", " ", 
        RowBox[{"\"\<DependenciesLoadedFlag\>\"", "->", "True"}]}], "]"}], 
      ";", "\n", "    ", 
      RowBox[{"Module", "[", "\n", "      ", 
       RowBox[{
        RowBox[{"{", "\n", "        ", 
         RowBox[{
          RowBox[{"deps", "=", 
           RowBox[{"PackageDependencies", "[", "pkg", "]"}]}], ",", "\n", 
          "        ", 
          RowBox[{"site", "=", 
           RowBox[{"Replace", "[", 
            RowBox[{
             RowBox[{"PackageDependencyBase", "[", "pkg", "]"}], ",", " ", 
             RowBox[{"Automatic", "->", "$PacletRepositoryServer"}]}], 
            "]"}]}], ",", "\n", "        ", "ctx"}], "\n", "        ", "}"}], 
        ",", "\n", "       ", 
        RowBox[{"PackageExecute", "[", "\n", "         ", 
         RowBox[{"pkg", ",", "\n", "         ", 
          RowBox[{"Internal`WithLocalSettings", "[", "\n", "           ", 
           RowBox[{
            RowBox[{
             RowBox[{"ctx", " ", "=", " ", "$Context"}], ";", "\n", 
             "           ", 
             RowBox[{"Begin", "[", "\"\<`Dependencies`\>\"", "]"}]}], ",", 
            "\n", "           ", 
            RowBox[{
             RowBox[{
              RowBox[{
               RowBox[{
               "PackageEnsureLoadDependency", "[", "\n", "             ", 
                RowBox[{"pkg", ",", "\n", "             ", 
                 RowBox[{"Sequence", "@@", 
                  RowBox[{"Flatten", "@", 
                   RowBox[{"{", 
                    RowBox[{"#", ",", " ", 
                    RowBox[{"\"\<Site\>\"", "->", "site"}]}], "}"}]}]}]}], 
                "\n", "             ", "]"}], "&"}], "/@", "deps"}], ";", 
             "\n", "           ", 
             RowBox[{"PackageExposeDependencies", "[", "pkg", "]"}]}], ",", 
            "\n", "           ", 
            RowBox[{
             RowBox[{"End", "[", "]"}], ";", " ", "\n", "           ", 
             RowBox[{"(*", " ", 
              RowBox[{
              "just", " ", "in", " ", "case", " ", "some", " ", "abort", " ", 
               "happened", " ", "in", " ", "a", " ", "dependency", " ", 
               "load"}], " ", "*)"}], "\n", "           ", 
             RowBox[{"$Context", " ", "=", " ", "ctx"}], ";"}]}], "\n", 
           "           ", "]"}]}], "\n", "         ", "]"}]}], "\n", "      ",
        "]"}], ";"}]}], "\n", "   ", "]"}]}], ";"}]], "Code",ExpressionUUID->\
"f8a6d46d-d6e3-4d67-a091-8488e57e7baa"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PackageDependencyContexts", "Subsubsection",ExpressionUUID->"15ae6653-9ca3-459f-bb56-76351e199012"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"PackageDependencyContexts", "[", "pkg_", "]"}], ":=", "\n", "  ", 
   
   RowBox[{
    RowBox[{"PackageDependencies", "[", "pkg", "]"}], "[", 
    RowBox[{"[", 
     RowBox[{"All", ",", " ", "1"}], "]"}], "]"}]}], ";"}]], "Code",Expression\
UUID->"2ab8dbe5-5ef1-4884-9a35-d352d1883455"]
}, Open  ]],

Cell[CellGroupData[{

Cell["PackageExposeDependencies", "Subsubsection",ExpressionUUID->"0640c6e8-b8d9-441e-8043-5b30f5aeef3a"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"PackageExposeDependencies", "[", 
    RowBox[{"pkg_", ",", " ", "deps_", ",", " ", 
     RowBox[{"permanent", ":", 
      RowBox[{"True", "|", "False"}], ":", "False"}]}], "]"}], ":=", "\n", 
   "  ", 
   RowBox[{"Module", "[", "\n", "    ", 
    RowBox[{
     RowBox[{"{", "\n", "      ", 
      RowBox[{
      "cdeps", ",", "\n", "      ", "loadQ", ",", "\n", "      ", "depCs"}], 
      "\n", "      ", "}"}], ",", "\n", "    ", 
     RowBox[{
      RowBox[{"depCs", "=", "\n", "      ", 
       RowBox[{"{", "\n", "        ", 
        RowBox[{
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"PackageLoadingMode", "[", "pkg", "]"}], "===", 
            "\"\<Dependency\>\""}], ",", "\n", "          ", 
           RowBox[{
            RowBox[{
             RowBox[{"StringSplit", "[", 
              RowBox[{
               RowBox[{
                RowBox[{"PackageContexts", "[", "pkg", "]"}], "[", 
                RowBox[{"[", "1", "]"}], "]"}], ",", " ", 
               "\"\<Dependencies`\>\"", ",", " ", "2"}], "]"}], "[", 
             RowBox[{"[", "1", "]"}], "]"}], "<>", "\n", "            ", 
            "\"\<Dependencies`\>\""}], ",", "\n", "          ", "Nothing"}], 
          "\n", "          ", "]"}], ",", "\n", "        ", 
         RowBox[{
          RowBox[{
           RowBox[{"PackageContexts", "[", "pkg", "]"}], "[", 
           RowBox[{"[", "1", "]"}], "]"}], "<>", "\"\<Dependencies`\>\""}]}], 
        "\n", "        ", "}"}]}], ";", "\n", "    ", 
      RowBox[{"cdeps", "=", "\n", "      ", 
       RowBox[{
        RowBox[{
         RowBox[{"With", "[", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{"ctx", "=", "#"}], "}"}], ",", "\n", "        ", 
           RowBox[{
            RowBox[{"SelectFirst", "[", "\n", "          ", 
             RowBox[{"depCs", ",", "\n", "          ", 
              RowBox[{
               RowBox[{
                RowBox[{"Length", "@", 
                 RowBox[{"Join", "[", 
                  RowBox[{
                   RowBox[{"Names", "[", 
                    RowBox[{"#", "<>", "ctx", "<>", "\"\<*\>\""}], "]"}], ",",
                    " ", 
                   RowBox[{"Names", "[", 
                    RowBox[{"#", "<>", "ctx", "<>", "\"\<*`*\>\""}], "]"}]}], 
                  "]"}]}], ">", "0"}], "&"}], ",", "\n", "          ", 
              "\"\<\>\""}], "\n", "          ", "]"}], "<>", "#"}]}], "\n", 
          "        ", "]"}], "&"}], "/@", "deps"}]}], ";", "\n", "    ", 
      RowBox[{"(*", " ", 
       RowBox[{
        RowBox[{
         RowBox[{
         "only", " ", "gonna", " ", "be", " ", "used", " ", "within", " ", 
          "PackageExecute"}], "..."}], "?"}], " ", "*)"}], "\n", "    ", 
      RowBox[{"$ContextPath", "=", "\n", "      ", 
       RowBox[{"DeleteDuplicates", "@", "\n", "        ", 
        RowBox[{"Join", "[", 
         RowBox[{"cdeps", ",", " ", "$ContextPath"}], "]"}]}]}], ";", "\n", 
      "    ", 
      RowBox[{"If", "[", 
       RowBox[{"permanent", ",", "\n", "      ", 
        RowBox[{"PackageExtendContextPath", "[", 
         RowBox[{"pkg", ",", " ", "cdeps"}], "]"}]}], "\n", "      ", "]"}], 
      ";", "\n", "    ", "cdeps"}]}], "\n", "    ", "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{"PackageExposeDependencies", "[", "pkg_", "]"}], ":=", " ", "\n", 
  "  ", 
  RowBox[{"PackageExposeDependencies", "[", "\n", "    ", 
   RowBox[{"pkg", ",", "\n", "    ", 
    RowBox[{"PackageDependencyContexts", "[", "pkg", "]"}], ",", "\n", "    ",
     "True"}], "\n", "    ", "]"}]}]}], "Code",ExpressionUUID->"22d46873-7b2c-\
4720-a6a8-2266159034ad"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Package Helpers", "Subsection",ExpressionUUID->"f2d3080b-8585-4dc9-ad68-6ba31892e2d6"],

Cell[CellGroupData[{

Cell["PackageConfigurePackageHelpers", "Subsubsection",ExpressionUUID->"80389181-470c-43d1-8d5c-10d3fbdb43b1"],

Cell["\<\
Originally these were the constants that every package set in its load script
Now that we're moving to a single loader _package_ these will all be \
references to a $CurrentPackage object
that will be bound by PackageFramework`LoadPackage[...], which will be the \
main entry point into loading
packages these days\
\>", "Text",ExpressionUUID->"73ca1ce5-1f43-4624-99e6-19f3768daae5"],

Cell[BoxData[
 RowBox[{
  RowBox[{"makePackageScopeSymbol", "[", 
   RowBox[{"cont_", ",", " ", "name_"}], "]"}], ":=", "\n", "  ", 
  RowBox[{"ToExpression", "[", 
   RowBox[{
    RowBox[{"cont", "<>", "\"\<PackageScope`\>\"", "<>", "name"}], ",", " ", 
    "StandardForm", ",", " ", "\n", "    ", 
    RowBox[{"Function", "[", "\n", "      ", 
     RowBox[{"Null", ",", "\n", "      ", 
      RowBox[{
       RowBox[{"ClearAll", "[", "#", "]"}], ";", "\n", "      ", "#"}], ",", 
      "\n", "      ", "HoldAllComplete"}], "\n", "      ", "]"}]}], "\n", 
   "    ", "]"}]}]], "Code",ExpressionUUID->"1e0a7cbd-ffae-4ae8-9223-\
df073183f61b"],

Cell[BoxData[
 RowBox[{
  RowBox[{"PackageConfigurePackageHelpers", "[", "pkg_", "]"}], ":=", "\n", 
  "  ", 
  RowBox[{"With", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"cont", "=", 
      RowBox[{"PackageContext", "[", "pkg", "]"}]}], "}"}], ",", "\n", "    ", 
    RowBox[{"With", "[", "\n", "      ", 
     RowBox[{
      RowBox[{"{", "\n", "        ", 
       RowBox[{
        RowBox[{"$PackageObject", "=", 
         RowBox[{"makePackageScopeSymbol", "[", 
          RowBox[{"cont", ",", " ", "\"\<$PackageObject\>\""}], "]"}]}], ",", 
        "\n", "        ", 
        RowBox[{"$PackageName", "=", 
         RowBox[{"makePackageScopeSymbol", "[", 
          RowBox[{"cont", ",", " ", "\"\<$PackageName\>\""}], "]"}]}], ",", 
        "\n", "        ", 
        RowBox[{"$PackageHead", "=", 
         RowBox[{"makePackageScopeSymbol", "[", 
          RowBox[{"cont", ",", " ", "\"\<$PackageHead\>\""}], "]"}]}], ",", 
        "\n", "        ", 
        RowBox[{"$PackageDirectory", "=", 
         RowBox[{"makePackageScopeSymbol", "[", 
          RowBox[{"cont", ",", " ", "\"\<$PackageDirectory\>\""}], "]"}]}]}], 
       "\n", "        ", 
       RowBox[{"(*", 
        RowBox[{
         RowBox[{"$PackageContexts", "=", 
          RowBox[{"Symbol", "[", 
           RowBox[{"packageScope", "<>", "\"\<$PackageContexts\>\""}], 
           "]"}]}], ",", "\n", "        ", 
         RowBox[{"$PackageSymbols", "=", 
          RowBox[{"Symbol", "[", 
           RowBox[{"packageScope", "<>", "\"\<$PackageSymbols\>\""}], "]"}]}],
          ",", "\n", "        ", 
         RowBox[{"$PackageListing", "=", 
          RowBox[{"Symbol", "[", 
           RowBox[{"packageScope", "<>", "\"\<$PackageListing\>\""}], "]"}]}],
          ",", "\n", "        ", 
         RowBox[{"$PackageFileContexts", "=", 
          RowBox[{"Symbol", "[", 
           RowBox[{"packageScope", "<>", "\"\<$PackageFileContexts\>\""}], 
           "]"}]}], ",", "\n", "        ", 
         RowBox[{"$LoadedPackages", "=", 
          RowBox[{"Symbol", "[", 
           RowBox[{"packageScope", "<>", "\"\<$LoadedPackages\>\""}], "]"}]}],
          ",", "\n", "        ", 
         RowBox[{"$DeclaredPackages", "=", 
          RowBox[{"Symbol", "[", 
           RowBox[{"packageScope", "<>", "\"\<$DeclaredPackages\>\""}], 
           "]"}]}], ",", "\n", "        ", 
         RowBox[{"$PackageLoadingMode", "=", 
          RowBox[{"Symbol", "[", 
           RowBox[{"packageScope", "<>", "\"\<$PackageLoadingMode\>\""}], 
           "]"}]}], ",", "\n", "        ", 
         RowBox[{"$PackageDependencies", "=", 
          RowBox[{"Symbol", "[", 
           RowBox[{"packageScope", "<>", "\"\<$PackageDependencies\>\""}], 
           "]"}]}], ",", "\n", "        ", 
         RowBox[{"$PackageDependencyBase", "=", 
          RowBox[{"Symbol", "[", 
           RowBox[{"packageScope", "<>", "\"\<$PackageDependencyBase\>\""}], 
           "]"}]}]}], "*)"}], "\n", "        ", "}"}], ",", "\n", "        ", 
      
      RowBox[{"(*", " ", 
       RowBox[{"usage", " ", "messages"}], " ", "*)"}], "\n", "        ", 
      RowBox[{
       RowBox[{
        RowBox[{"$PackageObject", "::", "usage"}], "=", 
        "\"\<The PackageFrameworkPackage for this package\>\""}], ";", "\n", 
       "        ", 
       RowBox[{
        RowBox[{"$PackageHead", "::", "usage"}], "=", 
        "\"\<The manager symbol for this package\>\""}], ";", "\n", 
       "        ", 
       RowBox[{
        RowBox[{"$PackageName", "::", "usage"}], "=", 
        "\"\<Applies PackageName to $CurrentPackage\>\""}], ";", "\n", 
       "        ", 
       RowBox[{
        RowBox[{"$PackageDirectory", "::", "usage"}], "=", 
        "\"\<Applies PackageRoot to $CurrentPackage\>\""}], ";", "\n", 
       "        ", 
       RowBox[{"(*", 
        RowBox[{
         RowBox[{
          RowBox[{"$PackageListing", "::", "usage"}], "=", 
          "\"\<The listing of packages\>\""}], ";", "\n", "        ", 
         RowBox[{
          RowBox[{"$PackageFileContexts", "::", "usage"}], "=", 
          "\"\<The contexts for files in $CurrentPackage\>\""}], ";", "\n", 
         "        ", 
         RowBox[{
          RowBox[{"$PackageSymbols", "::", "usage"}], "=", 
          "\"\<Applies PackageSymbols to $CurrentPackage\>\""}], ";", "\n", 
         "        ", 
         RowBox[{
          RowBox[{"$LoadedPackages", "::", "usage"}], "=", 
          "\"\<The set of loaded packages for $CurrentPackage\>\""}], ";", 
         "\n", "        ", 
         RowBox[{
          RowBox[{"$DeclaredPackages", "::", "usage"}], "=", 
          "\"\<The set of packages found and declared via the \
autoloader\>\""}], ";", "\n", "        ", 
         RowBox[{
          RowBox[{"$PackageLoadingMode", "::", "usage"}], "=", 
          "\"\<A flag that determines whether the package is primary or a \n\
dependency\>\""}], ";", "\n", "        ", 
         RowBox[{
          RowBox[{"$PackageDependencies", "::", "usage"}], "=", 
          "\"\<A set of dependencies for the package to load\>\""}], ";", 
         "\n", "        ", 
         RowBox[{
          RowBox[{"$PackageDependencyBase", "::", "usage"}], "=", 
          "\"\<The server from which dependencies should be loaded\>\""}], 
         ";", "\n", "        ", 
         RowBox[{
          RowBox[{"$PackageContexts", "::", "usage"}], "=", 
          "\"\<The set of Contexts used by $CurrentPackage\>\""}], ";"}], 
        "*)"}], "\n", "        ", 
       RowBox[{"(*", " ", "bindings", " ", "*)"}], "\n", "        ", 
       RowBox[{"$PackageObject", "=", "pkg"}], ";", "\n", "        ", 
       RowBox[{"$PackageHead", "=", 
        RowBox[{"PackageHead", "[", "pkg", "]"}]}], ";", "\n", "        ", 
       RowBox[{"$PackageName", "=", 
        RowBox[{"PackageName", "[", "pkg", "]"}]}], ";", "\n", "        ", 
       RowBox[{"$PackageDirectory", "=", 
        RowBox[{"PackageRoot", "[", "pkg", "]"}]}], ";"}]}], "\n", "        ", 
     RowBox[{"(*", 
      RowBox[{
       RowBox[{"$PackageListing", ":=", 
        RowBox[{"PackageListing", "[", "pkg", "]"}]}], ";", "\n", "        ", 
       
       RowBox[{"$PackageFileContexts", ":=", 
        RowBox[{"PackageFileContexts", "[", "pkg", "]"}]}], ";", "\n", 
       "        ", 
       RowBox[{"$PackageSymbols", ":=", 
        RowBox[{"PackageSymbols", "[", "pkg", "]"}]}], ";", "\n", "        ", 
       
       RowBox[{"$LoadedPackages", ":=", 
        RowBox[{"PackageLoadedPackages", "[", "pkg", "]"}]}], ";", "\n", 
       "        ", 
       RowBox[{"$DeclaredPackages", ":=", 
        RowBox[{"PackageSymbols", "[", "pkg", "]"}]}], ";"}], "*)"}], "\n", 
     "      ", "]"}]}], "\n", "    ", "]"}]}]], "Code",ExpressionUUID->\
"9b12e49d-657a-48f9-a696-83477ab7a98b"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["End Private", "Subsection",ExpressionUUID->"02959476-e9ee-4531-8c98-2327a71deb41"],

Cell[BoxData[
 RowBox[{
  RowBox[{"End", "[", "]"}], ";"}]], "Code",ExpressionUUID->"1d136ea5-3c6b-4e7a-bb66-bd8407a12309"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["End Package", "Section",ExpressionUUID->"5c8a9b7e-0bce-4e9b-a315-2bc2e0559138"],

Cell[CellGroupData[{

Cell["EndPackage", "Subsection",ExpressionUUID->"e77f3094-86f4-45a3-b2f3-e72b420cf942"],

Cell[BoxData[
 RowBox[{
  RowBox[{"EndPackage", "[", "]"}], ";"}]], "Code",ExpressionUUID->"7bf69ae9-f5e3-4581-bf76-1dee1bfe4e4b"]
}, Open  ]]
}, Open  ]]
}, Open  ]]
},
NotebookEventActions->{{"MenuCommand", "Save"} :> 
  EasyIDE`Notebooks`Manipulation`IDESave[
    EvaluationNotebook[]], 
  "MouseDown" :> (Needs["EasyIDE`"]; 
   EasyIDE`Notebooks`Manipulation`EnsureNotebookUpdated[
     EvaluationNotebook[]]), PassEventsDown -> True, EvaluationOrder -> After},
WindowSize->{939, 755},
WindowMargins->{{Automatic, 0}, {Automatic, 0}},
WindowTitle->"EasyIDE: PackageFramework",
TaggingRules->{
 "EasyIDE" -> {
   "Project" -> {
     "Directory" -> 
      "/Users/Mark/Documents/Wolfram \
Mathematica/Applications/PackageFramework/"}, 
    "Tabs" -> {
     "PackageFrameworkLoader" -> {
       "File" -> 
        "/Users/Mark/Documents/Wolfram \
Mathematica/Applications/PackageFramework/PackageFrameworkLoader.wl", 
        "Modified" -> False}, 
      "PackageFramework" -> {
       "File" -> 
        "/Users/Mark/Documents/Wolfram \
Mathematica/Applications/PackageFramework/PackageFramework.wl", "Modified" -> 
        False}}, "FileViewer" -> {"Visible" -> True}, 
    "Toolbars" -> {"Column" -> GridBox[{{
          GridBox[{{
             PaneBox["", ImageSize -> {0, 15}], 
             ButtonBox[
             "", BaseStyle -> "ToolbarShowButton", ButtonData -> "Package"]}},
            BaseStyle -> "ToolbarCell"]}}, BaseStyle -> "Toolbars"], 
      "Tags" -> {}, "Cells" -> {"Package" -> None}}, "ActiveTab" -> 
    "PackageFrameworkLoader", 
    "Options" -> {
     WindowSize -> {808, 755}, 
      WindowMargins -> {{204, Automatic}, {Automatic, 24}}, Visible -> False, 
      FrontEndVersion -> "12.0 for Mac OS X x86 (64-bit) (April 8, 2019)", 
      StyleDefinitions -> "Package.nb"}, 
    "Styles" -> {
     "UnthemedStylesheet" -> 
      FrontEnd`FileName[{"EasyIDE", "Extensions"}, "-Package.nb"], "Theme" -> 
      "DarkGUI", "StyleSheet" -> "Package"}, "FileToolbar" -> "Package", 
    "AutoGeneratePackage" -> False, "SavingAction" -> None}, 
  "IndentCharacter" -> "  "},
FrontEndVersion->"12.0 for Mac OS X x86 (64-bit) (April 8, 2019)",
StyleDefinitions->Notebook[{
   Cell[
    StyleData[
    StyleDefinitions -> 
     FrontEnd`FileName[{"EasyIDE", "Extensions", "DarkGUI"}, "Package.nb", 
       CharacterEncoding -> "UTF-8"]]], 
   Cell[
    CellGroupData[{
      Cell[
      "FileViewerStyles", "Subsubsubsubsection", 
       CellGroupingRules -> {"SectionGrouping", 200}, CellTags -> 
       "FileViewerStyles"], 
      Cell[
       StyleData["Title"], CellMargins -> {{217, Inherited}, {10, 30}}], 
      Cell[
       StyleData["Chapter"], CellMargins -> {{217, Inherited}, {10, 15}}], 
      Cell[
       StyleData["Subchapter"], CellMargins -> {{253, Inherited}, {8, 20}}], 
      Cell[
       StyleData["Section"], CellMargins -> {{217, Inherited}, {8, 18}}], 
      Cell[
       StyleData["Subsection"], 
       CellMargins -> {{240.34765625, 3.}, {8., 20.}}], 
      Cell[
       StyleData["Subsubsection"], 
       CellMargins -> {{256, Inherited}, {8, 12}}], 
      Cell[
       StyleData["Subsubsubsection"], 
       CellMargins -> {{256, Inherited}, {2, 10}}], 
      Cell[
       StyleData["Subsubsubsubsection"], 
       CellMargins -> {{256, Inherited}, {2, 10}}], 
      Cell[
       StyleData["Input"], CellMargins -> {{256, 10}, {5, 8}}], 
      Cell[
       StyleData["Code"], CellMargins -> {{256, 10}, {10, 10}}], 
      Cell[
       StyleData["Output"], CellMargins -> {{256, 10}, {12, 5}}], 
      Cell[
       StyleData["Text"], CellMargins -> {{256, 10}, {7, 8}}], 
      Cell[
       StyleData["Item"], CellMargins -> {{271, 10}, {4, 8}}], 
      Cell[
       StyleData["ItemParagraph"], CellMargins -> {{271, 10}, {4, 1}}], 
      Cell[
       StyleData["Subitem"], CellMargins -> {{295, 12}, {4, 4}}], 
      Cell[
       StyleData["SubitemParagraph"], CellMargins -> {{295, 12}, {4, 1}}], 
      Cell[
       StyleData["Echo"], 
       CellMargins -> {{256, Inherited}, {Inherited, Inherited}}], 
      Cell[
       StyleData["Print"], 
       CellMargins -> {{256, Inherited}, {Inherited, Inherited}}], 
      Cell[
       StyleData["PrintTemporary"], 
       CellMargins -> {{250, Inherited}, {Inherited, Inherited}}], 
      Cell[
       StyleData["CellExpression"], 
       CellMargins -> {{206, Inherited}, {Inherited, Inherited}}], 
      Cell[
       StyleData["CellInsertionPointCell"], CellMargins -> {{207, 0}, {0, 0}},
        Magnification -> 1]}, Closed]]}, Visible -> False, 
  TaggingRules -> {"EasyIDE" -> {"FileViewer" -> {"Visible" -> False}}}, 
  FrontEndVersion -> "12.0 for Mac OS X x86 (64-bit) (April 8, 2019)", 
  StyleDefinitions -> "PrivateStylesheetFormatting.nb"]
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[619, 23, 88, 0, 98, "Title",ExpressionUUID->"4873b0fe-2c4c-405e-836d-2603f6a304cd"],
Cell[710, 25, 269, 5, 58, "Text",ExpressionUUID->"55498e2e-3ccb-4a39-b974-22e5135649a4"],
Cell[982, 32, 286, 4, 58, "Text",ExpressionUUID->"4c85805c-b95f-4694-910d-75e2881c5ff3"],
Cell[1271, 38, 145, 2, 49, "Code",ExpressionUUID->"fda02f29-63f2-4fd5-8d8c-7d8d7a770a94"],
Cell[1419, 42, 234, 5, 71, "Code",ExpressionUUID->"8d498b83-27b8-4a91-81d3-0774a9eaac8d"],
Cell[CellGroupData[{
Cell[1678, 51, 87, 0, 45, "Subsubsection",ExpressionUUID->"e7cde1f8-0a5b-4ee1-a666-a4c2e96ab484"],
Cell[1768, 53, 192, 3, 58, "Text",ExpressionUUID->"1b316b9a-0d17-4c86-aaad-139ea441fd1e"],
Cell[1963, 58, 155, 3, 49, "Code",ExpressionUUID->"e03f2129-9a59-40c7-bcf7-e07bf9cb0050"],
Cell[2121, 63, 656, 15, 134, "Code",ExpressionUUID->"fac03062-2d1c-41ea-a5d1-f97bd3cc3cc6"],
Cell[2780, 80, 130, 2, 49, "Code",ExpressionUUID->"497778b5-0f63-4959-b8e7-77edbd05ea35"]
}, Open  ]],
Cell[CellGroupData[{
Cell[2947, 87, 90, 0, 45, "Subsubsection",ExpressionUUID->"ca68b11c-d671-4fc1-b0d0-92c5abfbe921"],
Cell[3040, 89, 507, 8, 173, "Text",ExpressionUUID->"20b03197-1ef5-47a0-acc9-4c9872591ecf"],
Cell[3550, 99, 134, 1, 49, "Code",ExpressionUUID->"f7c5f092-e3ae-486f-86d0-8496d9b5a1c2"],
Cell[3687, 102, 1553, 38, 260, "Code",ExpressionUUID->"15e3dee1-9fd6-496f-99ff-2b9d61b5e332"],
Cell[5243, 142, 112, 1, 49, "Code",ExpressionUUID->"3efb266f-78e1-415e-9e74-5aaf505b5790"]
}, Open  ]],
Cell[CellGroupData[{
Cell[5392, 148, 84, 0, 45, "Subsubsection",ExpressionUUID->"c9693e13-ee8a-494b-adff-3fe870b33033"],
Cell[5479, 150, 132, 1, 49, "Code",ExpressionUUID->"eee9e0c0-b47e-4ae9-8870-2491b6b1dfaa"],
Cell[5614, 153, 1169, 31, 176, "Code",ExpressionUUID->"0856ec17-b2c7-4052-986a-940089d57ae4"],
Cell[6786, 186, 112, 1, 49, "Code",ExpressionUUID->"034815ca-1c56-47d5-bb74-90c5ac3c7d25"]
}, Open  ]],
Cell[CellGroupData[{
Cell[6935, 192, 87, 0, 45, "Subsubsection",ExpressionUUID->"e0451589-d49a-4cd8-8d17-e8f58c6254c3"],
Cell[7025, 194, 137, 2, 49, "Code",ExpressionUUID->"35758797-fb4c-479f-9134-14809a2ca206"],
Cell[7165, 198, 630, 15, 113, "Code",ExpressionUUID->"c1a91870-36d7-4e63-abab-9b97b8c32472"],
Cell[7798, 215, 505, 14, 92, "Code",ExpressionUUID->"004115c7-6e02-45bc-855a-62c62a6999c6"],
Cell[8306, 231, 631, 15, 134, "Code",ExpressionUUID->"bd2609dc-3ac6-4879-a901-4fafc5a27b91"],
Cell[8940, 248, 130, 2, 49, "Code",ExpressionUUID->"7a5e0a45-ccef-4d12-9539-9d31acc5949b"]
}, Open  ]],
Cell[CellGroupData[{
Cell[9107, 255, 92, 0, 45, "Subsubsection",ExpressionUUID->"fae96db5-9e07-48eb-a7e1-2425fc830b43"],
Cell[9202, 257, 304, 4, 81, "Text",ExpressionUUID->"3a3da476-b53e-4fc4-ab5c-309a65329083"],
Cell[9509, 263, 142, 2, 49, "Code",ExpressionUUID->"dd9363b2-4dca-48c4-a52e-a8a0836dffee"],
Cell[9654, 267, 425, 12, 92, "Code",ExpressionUUID->"aa6e2256-9263-492f-a91e-11aa298430a0"],
Cell[10082, 281, 112, 1, 49, "Code",ExpressionUUID->"9d85f93b-b2f8-4fef-9896-1740cf863b7f"]
}, Open  ]],
Cell[CellGroupData[{
Cell[10231, 287, 81, 0, 67, "Section",ExpressionUUID->"357766f4-df49-4302-8629-71cf7a6d85c6"],
Cell[10315, 289, 148, 3, 49, "Code",ExpressionUUID->"6ea43b62-1568-4d99-aca1-fe6e059fe5b3"],
Cell[10466, 294, 563, 11, 197, "Code",ExpressionUUID->"0fc63076-9824-4587-90db-e2654468252e"],
Cell[CellGroupData[{
Cell[11054, 309, 103, 0, 54, "Subsection",ExpressionUUID->"d4cd0f98-5465-49ad-bfcc-9252965d6d2f"],
Cell[CellGroupData[{
Cell[11182, 313, 105, 0, 45, "Subsubsection",ExpressionUUID->"4257eaf3-d4be-4387-95b2-8d010666a19c"],
Cell[11290, 315, 344, 9, 92, "Code",ExpressionUUID->"11139848-7457-458a-9e35-810a44e0e76c"]
}, Open  ]],
Cell[CellGroupData[{
Cell[11671, 329, 110, 0, 45, "Subsubsection",ExpressionUUID->"7b3e9cc4-da78-4632-acbd-a19fb1909553"],
Cell[11784, 331, 289, 6, 71, "Code",ExpressionUUID->"90a21325-9b20-49b2-8c31-481a39fd5298"]
}, Open  ]],
Cell[CellGroupData[{
Cell[12110, 342, 102, 0, 45, "Subsubsection",ExpressionUUID->"4d501c8d-90e7-4787-8e56-d0e6d4ce6f45"],
Cell[12215, 344, 264, 6, 92, "Code",ExpressionUUID->"f8e10b77-77d2-457a-a844-2567ffa2e5ed"],
Cell[12482, 352, 347, 8, 113, "Code",ExpressionUUID->"883a6048-4615-464a-889e-e25078f29da1"],
Cell[12832, 362, 8810, 196, 1982, "Code",ExpressionUUID->"ce4cd9e4-7c1a-4c8b-908a-ddc9681cc628"]
}, Open  ]],
Cell[CellGroupData[{
Cell[21679, 563, 103, 0, 70, "Subsubsection",ExpressionUUID->"db0d25d5-4737-4c15-bbd2-8986c70d951c"],
Cell[21785, 565, 5776, 133, 70, "Code",ExpressionUUID->"15908c8e-beea-4274-bbdb-fde393ee1107"]
}, Open  ]],
Cell[CellGroupData[{
Cell[27598, 703, 90, 0, 70, "Subsubsection",ExpressionUUID->"7371f3ed-d1f9-4992-8a5e-4e685cf2f0f5"],
Cell[27691, 705, 1459, 35, 70, "Code",ExpressionUUID->"f7249d4a-2dfe-4b83-876c-697b120d6e6d"]
}, Open  ]],
Cell[CellGroupData[{
Cell[29187, 745, 112, 0, 70, "Subsubsection",ExpressionUUID->"8c82e917-2440-4e73-a41c-e8ec8cc57dbb"],
Cell[29302, 747, 5280, 128, 70, "Code",ExpressionUUID->"9f00fcdb-43cd-48a2-bfa4-2a0d104b7c4b"]
}, Open  ]],
Cell[CellGroupData[{
Cell[34619, 880, 104, 0, 70, "Subsubsection",ExpressionUUID->"1b7a138a-e4a8-4bd0-adb4-c9bd86d64685"],
Cell[34726, 882, 436, 10, 70, "Code",ExpressionUUID->"c9291ec7-e00e-42fa-8cc8-8848c51219f2"]
}, Open  ]],
Cell[CellGroupData[{
Cell[35199, 897, 141, 1, 70, "Subsubsection",ExpressionUUID->"a895b34f-b8b8-4b96-b3d1-b6e9ea39826e"],
Cell[35343, 900, 423, 11, 70, "Code",ExpressionUUID->"e6f49356-42b6-47a7-9ee1-fc14ef97f197"],
Cell[CellGroupData[{
Cell[35791, 915, 102, 0, 70, "Subsubsubsubsection",ExpressionUUID->"9e80db1d-02a5-4a4c-b318-93da8bed6bba"],
Cell[35896, 917, 534, 13, 70, "Code",ExpressionUUID->"bd5e1c81-9623-4e54-9297-6c8bd0d24869"]
}, Open  ]],
Cell[CellGroupData[{
Cell[36467, 935, 96, 0, 70, "Subsubsubsubsection",ExpressionUUID->"2bda8823-f279-4253-9bda-99140880fbdb"],
Cell[36566, 937, 563, 15, 70, "Code",ExpressionUUID->"c0d7a9e0-9850-4384-aefa-13590b6e6833"]
}, Open  ]],
Cell[CellGroupData[{
Cell[37166, 957, 96, 0, 70, "Subsubsubsubsection",ExpressionUUID->"3d701d52-057e-4391-8bd1-4bc269f8f30c"],
Cell[37265, 959, 352, 8, 70, "Code",ExpressionUUID->"18e5dde2-ea41-4404-87de-53188569ec9e"]
}, Open  ]],
Cell[CellGroupData[{
Cell[37654, 972, 99, 0, 70, "Subsubsubsubsection",ExpressionUUID->"58ee9ebb-ace0-43d5-a928-05625e28d4bb"],
Cell[37756, 974, 522, 13, 70, "Code",ExpressionUUID->"257f0e49-787e-4ce9-8b09-02c694930d3d"]
}, Open  ]],
Cell[CellGroupData[{
Cell[38315, 992, 97, 0, 70, "Subsubsubsubsection",ExpressionUUID->"06c9c807-79ff-41eb-844a-7dc1dd77d4e7"],
Cell[38415, 994, 447, 11, 70, "Code",ExpressionUUID->"d7cc08ed-31f7-4053-be81-fde8e76fdf0c"]
}, Open  ]],
Cell[CellGroupData[{
Cell[38899, 1010, 97, 0, 70, "Subsubsubsubsection",ExpressionUUID->"e887755f-e50d-4790-8ca2-0043a7ae817d"],
Cell[38999, 1012, 255, 6, 70, "Code",ExpressionUUID->"8942df7d-b9cc-43be-a8a1-ae6597c6d803"]
}, Open  ]],
Cell[CellGroupData[{
Cell[39291, 1023, 103, 0, 70, "Subsubsubsubsection",ExpressionUUID->"acd7cb7a-bb64-40b2-9ed7-5ef30d9603e2"],
Cell[39397, 1025, 493, 13, 70, "Code",ExpressionUUID->"b1d3ed39-459a-46a3-960a-4983153c4c35"]
}, Open  ]],
Cell[CellGroupData[{
Cell[39927, 1043, 97, 0, 70, "Subsubsubsubsection",ExpressionUUID->"bca5139d-53cc-4b75-8c0b-fb8457598d75"],
Cell[40027, 1045, 1813, 49, 70, "Code",ExpressionUUID->"ae65c47d-1ea9-4fd7-aaa0-d2169e498e07"],
Cell[41843, 1096, 691, 14, 70, "Code",ExpressionUUID->"47114398-b0c1-48ef-b31c-8a226ea610b3"]
}, Open  ]],
Cell[CellGroupData[{
Cell[42571, 1115, 99, 0, 70, "Subsubsubsubsection",ExpressionUUID->"6bca32c4-ac85-420d-a045-2bf2cfd51f2c"],
Cell[42673, 1117, 1996, 51, 70, "Code",ExpressionUUID->"e3ff511b-a560-4eed-997e-b4eadf0f0dd1"],
Cell[44672, 1170, 358, 7, 70, "Code",ExpressionUUID->"d9a58647-3f0b-4c7e-9615-df8ad6a4ceae"]
}, Open  ]],
Cell[CellGroupData[{
Cell[45067, 1182, 100, 0, 70, "Subsubsubsubsection",ExpressionUUID->"41ef5c12-49db-47b5-9f87-831e90877895"],
Cell[45170, 1184, 903, 22, 70, "Code",ExpressionUUID->"4918c062-877b-4278-b131-e006e77ce6f2"],
Cell[46076, 1208, 383, 8, 70, "Code",ExpressionUUID->"f4d9b1ea-06ac-458d-a94c-bb6e3fefd31f"]
}, Open  ]],
Cell[CellGroupData[{
Cell[46496, 1221, 98, 0, 70, "Subsubsubsubsection",ExpressionUUID->"dd213e71-a812-4a59-b16b-59c6eb834ade"],
Cell[46597, 1223, 413, 10, 70, "Code",ExpressionUUID->"5c8a31e8-f02d-4230-a8fa-242e32b286c3"],
Cell[47013, 1235, 319, 6, 70, "Code",ExpressionUUID->"22f49ed2-303f-494e-a58d-d83edc52bc9d"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[47381, 1247, 114, 0, 70, "Subsubsection",ExpressionUUID->"241444e4-28fc-4cdf-b61c-3d3e638d17e4"],
Cell[47498, 1249, 850, 21, 70, "Code",ExpressionUUID->"d3a6f2fc-e26c-4de1-9af8-f04622c8456b"]
}, Open  ]],
Cell[CellGroupData[{
Cell[48385, 1275, 113, 0, 70, "Subsubsection",ExpressionUUID->"7c0682cb-f1c0-426d-8715-4185e9be9c57"],
Cell[48501, 1277, 1714, 46, 70, "Code",ExpressionUUID->"3f5c007d-f512-4a74-af61-031a9bdc70d4"],
Cell[50218, 1325, 1199, 32, 70, "Code",ExpressionUUID->"174c6069-4152-4088-b2c4-feb082d2ab69"]
}, Open  ]],
Cell[CellGroupData[{
Cell[51454, 1362, 109, 0, 70, "Subsubsection",ExpressionUUID->"0c2d4030-8597-4c2e-ad9f-bb76560cb301"],
Cell[51566, 1364, 882, 22, 70, "Code",ExpressionUUID->"25c63487-a9f7-4866-b166-75439bf89066"]
}, Open  ]],
Cell[CellGroupData[{
Cell[52485, 1391, 108, 0, 70, "Subsubsection",ExpressionUUID->"95727a02-534b-4239-af29-5d272786be68"],
Cell[52596, 1393, 608, 9, 70, "Text",ExpressionUUID->"0af2edad-3d97-46fa-8c50-f0d2639d09c8"],
Cell[53207, 1404, 3555, 82, 70, "Code",ExpressionUUID->"dd09f829-6bd2-42aa-9f21-e74746cd65fd"]
}, Open  ]],
Cell[CellGroupData[{
Cell[56799, 1491, 97, 0, 70, "Subsubsection",ExpressionUUID->"cedc9130-8dee-4599-a78d-ba5b346a781b"],
Cell[56899, 1493, 272, 4, 70, "Text",ExpressionUUID->"07d330bf-f761-4a5e-8521-38e5fd653f0c"],
Cell[57174, 1499, 558, 15, 70, "Code",ExpressionUUID->"c6d51440-06ce-4850-ae25-fae674914e89"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[57781, 1520, 89, 0, 70, "Subsection",ExpressionUUID->"3608f823-eec3-42e1-b5dc-6262037d0ecc"],
Cell[CellGroupData[{
Cell[57895, 1524, 91, 0, 70, "Subsubsection",ExpressionUUID->"63920248-86bc-422e-aba1-622650e5f25a"],
Cell[57989, 1526, 192, 3, 70, "Text",ExpressionUUID->"50a98d42-4977-4590-9396-811b24df5e59"],
Cell[58184, 1531, 212, 3, 70, "Text",ExpressionUUID->"3daa71bf-356c-4526-8bdf-d06d1e7ffde7"],
Cell[58399, 1536, 10579, 246, 70, "Code",ExpressionUUID->"9d4fd02d-4056-468a-9286-3a9ca05aae4f"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[69027, 1788, 102, 0, 70, "Subsection",ExpressionUUID->"663a262e-2ee9-4681-b0b6-60e2fec84de8"],
Cell[CellGroupData[{
Cell[69154, 1792, 91, 0, 70, "Subsubsection",ExpressionUUID->"46b0dd82-f1a8-4ff0-8c33-c3a2a2212ffc"],
Cell[69248, 1794, 175, 3, 70, "Code",ExpressionUUID->"9cf82531-e7c5-4c07-9ab4-14f8ed189292"],
Cell[69426, 1799, 297, 7, 70, "Code",ExpressionUUID->"ebae7247-7a64-4368-9884-d41f04966b19"]
}, Open  ]],
Cell[CellGroupData[{
Cell[69760, 1811, 98, 0, 70, "Subsubsection",ExpressionUUID->"504f790c-b2b7-4003-b1f4-11a27c782702"],
Cell[69861, 1813, 509, 12, 70, "Code",ExpressionUUID->"bb35a9f5-27a2-4a33-a89c-d03e8b3ddf2a"]
}, Open  ]],
Cell[CellGroupData[{
Cell[70407, 1830, 94, 0, 70, "Subsubsection",ExpressionUUID->"9529be6e-22ff-4e8a-bcc2-d7232657ef3a"],
Cell[70504, 1832, 181, 3, 70, "Code",ExpressionUUID->"456b1da3-32d3-4557-98d6-4b9d16f92f69"],
Cell[70688, 1837, 776, 19, 70, "Code",ExpressionUUID->"1d4f6b15-00d4-4200-8438-a5801541d7f4"]
}, Open  ]],
Cell[CellGroupData[{
Cell[71501, 1861, 95, 0, 70, "Subsubsection",ExpressionUUID->"14d65746-2ab2-4afe-ae8a-990b9d240457"],
Cell[71599, 1863, 183, 3, 70, "Code",ExpressionUUID->"00c2d3ad-b029-41ad-a8e0-f17c94282776"],
Cell[71785, 1868, 324, 7, 70, "Code",ExpressionUUID->"950ba1c7-4460-48c1-adf2-bfce7790eb11"],
Cell[72112, 1877, 566, 14, 70, "Code",ExpressionUUID->"bb88eb8a-2e7b-4680-8c21-96be19bce2b8"]
}, Open  ]],
Cell[CellGroupData[{
Cell[72715, 1896, 98, 0, 70, "Subsubsection",ExpressionUUID->"918c8e5c-125d-4c84-abde-c97675355e96"],
Cell[72816, 1898, 510, 13, 70, "Code",ExpressionUUID->"e6ae6e55-e172-423b-b065-7528bf3423b6"]
}, Open  ]],
Cell[CellGroupData[{
Cell[73363, 1916, 101, 0, 70, "Subsubsection",ExpressionUUID->"78f85e70-be63-4277-a8a1-1407e74d6270"],
Cell[73467, 1918, 242, 5, 70, "Code",ExpressionUUID->"6698991c-0e1e-4420-9d7e-d4713c849dbc"]
}, Open  ]],
Cell[CellGroupData[{
Cell[73746, 1928, 105, 0, 70, "Subsubsection",ExpressionUUID->"7ac80d14-a1e4-4390-a3b7-7eedfcefe194"],
Cell[73854, 1930, 4930, 99, 70, "Code",ExpressionUUID->"afb06cd4-b32a-4cc0-9062-7995a45c63d6"]
}, Open  ]],
Cell[CellGroupData[{
Cell[78821, 2034, 91, 0, 70, "Subsubsection",ExpressionUUID->"0f8e9b37-d9ba-48e4-b51c-4a08a163388f"],
Cell[78915, 2036, 180, 3, 70, "Code",ExpressionUUID->"7b349e42-151e-4513-a5c1-61babfac3e19"],
Cell[79098, 2041, 968, 26, 70, "Code",ExpressionUUID->"5f6a73ce-2a0d-45a5-81c7-d02af09c6570"]
}, Open  ]],
Cell[CellGroupData[{
Cell[80103, 2072, 96, 0, 70, "Subsubsection",ExpressionUUID->"228667f4-fb65-4224-acfd-285f07a905fa"],
Cell[80202, 2074, 185, 3, 70, "Code",ExpressionUUID->"1cafdc02-bab8-4552-bfa8-ad076ea7e8f1"],
Cell[80390, 2079, 587, 13, 70, "Code",ExpressionUUID->"c5c90473-e3c5-4e34-b2fe-c814599a72ee"]
}, Open  ]],
Cell[CellGroupData[{
Cell[81014, 2097, 95, 0, 70, "Subsubsection",ExpressionUUID->"796ce6d9-d0f8-48ac-b769-e98ff24ab940"],
Cell[81112, 2099, 179, 3, 70, "Code",ExpressionUUID->"594e3f4f-afae-42a2-af91-21ca124a2a6d"],
Cell[81294, 2104, 638, 16, 70, "Code",ExpressionUUID->"11cbceae-d629-43f0-af0a-aa16df2e5296"]
}, Open  ]],
Cell[CellGroupData[{
Cell[81969, 2125, 99, 0, 70, "Subsubsection",ExpressionUUID->"7c71db2e-d708-4c7a-81cb-324e4a587a5a"],
Cell[82071, 2127, 341, 8, 70, "Code",ExpressionUUID->"006df0f7-e4c6-4ead-81c0-eff41c0cbd03"],
Cell[82415, 2137, 684, 16, 70, "Code",ExpressionUUID->"0cbc411a-ceb3-4d82-9740-0fe70b27cf0a"]
}, Open  ]],
Cell[CellGroupData[{
Cell[83136, 2158, 101, 0, 70, "Subsubsection",ExpressionUUID->"cc6117de-93ad-45ed-ba11-444cb8e25403"],
Cell[83240, 2160, 335, 7, 70, "Code",ExpressionUUID->"7eacfc54-9c85-47d6-9360-b4b4ffd768f8"],
Cell[83578, 2169, 686, 16, 70, "Code",ExpressionUUID->"af6c1951-a210-43f8-8f21-2ed8fb31973a"]
}, Open  ]],
Cell[CellGroupData[{
Cell[84301, 2190, 104, 0, 70, "Subsubsection",ExpressionUUID->"3345cfa1-2cf2-4ee0-b29b-bb868f36d0a3"],
Cell[84408, 2192, 617, 14, 70, "Code",ExpressionUUID->"079316d8-029a-4f4b-bc2c-c7e34be8c051"]
}, Open  ]],
Cell[CellGroupData[{
Cell[85062, 2211, 98, 0, 70, "Subsubsection",ExpressionUUID->"3e5b2c15-75ae-4e33-bcb1-6be23dcd0ac0"],
Cell[85163, 2213, 318, 6, 70, "Text",ExpressionUUID->"5b4d5272-176d-4ae5-b795-6fdc3d6705cb"],
Cell[85484, 2221, 947, 21, 70, "Code",ExpressionUUID->"b4c91986-9d58-49d6-8ae0-e5e788f229c4"],
Cell[86434, 2244, 1719, 41, 70, "Code",ExpressionUUID->"f2bcd6e7-ff1f-4bae-b963-cc7bfc6482e9"]
}, Open  ]],
Cell[CellGroupData[{
Cell[88190, 2290, 99, 0, 70, "Subsubsection",ExpressionUUID->"5a5fbabd-cd5b-4ea5-9ca5-5ab6f531f77d"],
Cell[88292, 2292, 1314, 30, 70, "Code",ExpressionUUID->"c31c2cd7-9910-4564-b8d4-01a99dbb74e7"]
}, Open  ]],
Cell[CellGroupData[{
Cell[89643, 2327, 101, 0, 70, "Subsubsection",ExpressionUUID->"1319ef49-4b6b-4f4f-96cb-2fc0af3c68cd"],
Cell[89747, 2329, 548, 12, 70, "Code",ExpressionUUID->"31cf9e99-efa7-4ee8-8c06-3cf42de78c3a"]
}, Open  ]],
Cell[CellGroupData[{
Cell[90332, 2346, 104, 0, 70, "Subsubsection",ExpressionUUID->"11acca66-af3e-4054-9551-f137c34d898f"],
Cell[90439, 2348, 806, 18, 70, "Code",ExpressionUUID->"c4ec5069-d253-4934-933e-9aedfe305f88"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[91294, 2372, 92, 0, 70, "Subsection",ExpressionUUID->"7e9f9822-f13f-4b7f-9bae-6b081857f74d"],
Cell[CellGroupData[{
Cell[91411, 2376, 94, 0, 70, "Subsubsection",ExpressionUUID->"3c8ee429-e079-41d6-b604-2b5d6f304f25"],
Cell[91508, 2378, 321, 7, 70, "Code",ExpressionUUID->"48ebbbc9-efa6-49f2-8848-744a5fd81937"],
Cell[91832, 2387, 181, 3, 70, "Code",ExpressionUUID->"594ea425-58a4-4cd1-861f-8db98e2e3181"],
Cell[92016, 2392, 660, 15, 70, "Code",ExpressionUUID->"cd403fdf-dd2e-4991-8c52-f4dca720072e"]
}, Open  ]],
Cell[CellGroupData[{
Cell[92713, 2412, 94, 0, 70, "Subsubsection",ExpressionUUID->"8b8711a9-89a4-4a50-b47e-7f88e7d3274f"],
Cell[92810, 2414, 1738, 41, 70, "Code",ExpressionUUID->"4fa7cfd4-da41-41f6-8e09-21454cb0428c"]
}, Open  ]],
Cell[CellGroupData[{
Cell[94585, 2460, 103, 0, 70, "Subsubsection",ExpressionUUID->"58cf41da-3af8-4cc7-8d02-201779de67e8"],
Cell[94691, 2462, 639, 13, 70, "Text",ExpressionUUID->"93076d49-865f-4e83-9999-85b9ea672747"],
Cell[95333, 2477, 979, 35, 70, "Text",ExpressionUUID->"4553b002-b469-4945-9bb6-51329097e408"],
Cell[96315, 2514, 431, 7, 70, "Text",ExpressionUUID->"2b21ed3d-f3e5-4324-bff5-e39642c262ca"],
Cell[96749, 2523, 4475, 113, 70, "Code",ExpressionUUID->"72616bb9-582f-4ef2-98eb-2e1114ace107"],
Cell[101227, 2638, 6534, 130, 70, "Code",ExpressionUUID->"0ca019b3-ea90-47c7-8a39-0308f9a32800"]
}, Open  ]],
Cell[CellGroupData[{
Cell[107798, 2773, 102, 0, 70, "Subsubsection",ExpressionUUID->"b1f422e9-4150-4ed0-a294-7721cdb6c603"],
Cell[107903, 2775, 186, 3, 70, "Text",ExpressionUUID->"8cc15f59-6e9d-4d2a-8cc7-3f4f1185c9d9"],
Cell[108092, 2780, 4989, 115, 70, "Code",ExpressionUUID->"9a380305-2c22-484c-84ff-b175503fb0c6"]
}, Open  ]],
Cell[CellGroupData[{
Cell[113118, 2900, 101, 0, 70, "Subsubsection",ExpressionUUID->"8bc3dc63-c52d-47ff-b5c2-0b5c20ade52f"],
Cell[113222, 2902, 349, 9, 70, "Code",ExpressionUUID->"1a394a8b-3eb2-4928-83c4-f15a638d2ac4"],
Cell[113574, 2913, 701, 16, 70, "Code",ExpressionUUID->"d4a61dbc-61b3-4120-a2ae-05a0c14fdd5d"],
Cell[114278, 2931, 1596, 39, 70, "Code",ExpressionUUID->"bbf17a85-d468-498e-80cf-efd05c24343b"]
}, Open  ]],
Cell[CellGroupData[{
Cell[115911, 2975, 98, 0, 70, "Subsubsection",ExpressionUUID->"61c53ffe-16c3-4854-bcad-55945cf319ae"],
Cell[116012, 2977, 1197, 28, 70, "Code",ExpressionUUID->"90f20fb2-1b5a-4525-b7a9-85a68b5b9fec"]
}, Open  ]],
Cell[CellGroupData[{
Cell[117246, 3010, 107, 0, 70, "Subsubsection",ExpressionUUID->"63629b75-70b4-45c9-a722-f573a0353e66"],
Cell[117356, 3012, 211, 4, 70, "Code",ExpressionUUID->"b3408bce-10fc-498d-96d9-c3b9bf19537e"],
Cell[117570, 3018, 4395, 105, 70, "Code",ExpressionUUID->"d744f786-b600-4ad4-8994-f097d613e13d"],
Cell[121968, 3125, 3102, 72, 70, "Code",ExpressionUUID->"1aa7db32-c6a7-4325-9a4f-56c820572b29"]
}, Open  ]],
Cell[CellGroupData[{
Cell[125107, 3202, 106, 0, 70, "Subsubsection",ExpressionUUID->"b40bc2e3-f0cd-4b0b-a2eb-ac7de46ef783"],
Cell[125216, 3204, 190, 3, 70, "Code",ExpressionUUID->"b276ed0f-ec25-437b-b1b4-1df7ef69cf04"],
Cell[125409, 3209, 959, 23, 70, "Code",ExpressionUUID->"6e8f686a-a09f-4edd-82bc-d3b2cbc87884"]
}, Open  ]],
Cell[CellGroupData[{
Cell[126405, 3237, 108, 0, 70, "Subsubsection",ExpressionUUID->"7bba14f6-9cc1-47e6-b33e-07b304d0fd85"],
Cell[126516, 3239, 194, 3, 70, "Code",ExpressionUUID->"8c31bdc6-1342-42a1-bb6e-ef123084b40e"],
Cell[126713, 3244, 1237, 33, 70, "Code",ExpressionUUID->"9f37e06a-bc45-42a3-b753-592aa536d5c4"],
Cell[127953, 3279, 1196, 29, 70, "Code",ExpressionUUID->"f7d6ce0f-9c0d-4a55-a20d-396c10040650"]
}, Open  ]],
Cell[CellGroupData[{
Cell[129186, 3313, 97, 0, 70, "Subsubsection",ExpressionUUID->"f8f3c47f-03ba-4982-90a8-b6f2e499b8e9"],
Cell[129286, 3315, 761, 20, 70, "Code",ExpressionUUID->"630d63c4-3ee5-4b69-b601-05958826c6f5"]
}, Open  ]],
Cell[CellGroupData[{
Cell[130084, 3340, 106, 0, 70, "Subsubsection",ExpressionUUID->"a2b4b3ee-9d1d-4e5a-9d08-2c153ead54a8"],
Cell[130193, 3342, 476, 11, 70, "Code",ExpressionUUID->"f8b8d5e1-7219-4462-853f-ac709599560e"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[130718, 3359, 89, 0, 70, "Subsection",ExpressionUUID->"f34baaf9-3918-4383-8154-b21d76770219"],
Cell[CellGroupData[{
Cell[130832, 3363, 98, 0, 70, "Subsubsection",ExpressionUUID->"13d87d8e-00d7-4b56-9f51-55b938a3cbba"],
Cell[130933, 3365, 538, 12, 70, "Code",ExpressionUUID->"393e3eb4-fbe3-4922-851d-5d8c66d453d7"]
}, Open  ]],
Cell[CellGroupData[{
Cell[131508, 3382, 99, 0, 70, "Subsubsection",ExpressionUUID->"0128bb40-5e89-431f-a828-84f12e472807"],
Cell[131610, 3384, 242, 5, 70, "Code",ExpressionUUID->"ad5fb33f-4e9f-432c-8166-4e9c48540668"]
}, Open  ]],
Cell[CellGroupData[{
Cell[131889, 3394, 101, 0, 70, "Subsubsection",ExpressionUUID->"a06b0370-81e2-4d5c-9819-c5394f387424"],
Cell[131993, 3396, 443, 10, 70, "Code",ExpressionUUID->"cd3c1151-d658-4430-8b3d-edccd582b6a4"]
}, Open  ]],
Cell[CellGroupData[{
Cell[132473, 3411, 108, 0, 70, "Subsubsection",ExpressionUUID->"1fa78a72-3412-457a-8daf-cf94c6170336"],
Cell[132584, 3413, 370, 9, 70, "Code",ExpressionUUID->"106dae15-0d0a-4b50-9e81-53c13be42427"]
}, Open  ]],
Cell[CellGroupData[{
Cell[132991, 3427, 110, 0, 70, "Subsubsection",ExpressionUUID->"5da6114d-0ecb-4067-8285-3910725ef543"],
Cell[133104, 3429, 223, 5, 70, "Code",ExpressionUUID->"264d9b8e-af68-4e95-872e-e37dc1559647"],
Cell[133330, 3436, 220, 5, 70, "Code",ExpressionUUID->"2e343610-ab6d-4ed3-b3df-0b4035eeff74"],
Cell[133553, 3443, 5133, 117, 70, "Code",ExpressionUUID->"aa206e11-5423-4893-81fe-2cf2177a25a5"],
Cell[138689, 3562, 915, 23, 70, "Code",ExpressionUUID->"02af1d23-865c-4798-8dce-9fedb7c6be88"]
}, Open  ]],
Cell[CellGroupData[{
Cell[139641, 3590, 109, 0, 70, "Subsubsection",ExpressionUUID->"611b62d0-edb9-4751-8fca-069fa61c5f25"],
Cell[139753, 3592, 225, 5, 70, "Code",ExpressionUUID->"5e964159-1201-4a15-af70-17667e7619dd"],
Cell[139981, 3599, 4820, 114, 70, "Code",ExpressionUUID->"56e2bd70-d553-4e00-b6f9-8851e0f8000a"],
Cell[144804, 3715, 813, 22, 70, "Code",ExpressionUUID->"828d2238-070e-4007-afbd-8b52c0b569b3"]
}, Open  ]],
Cell[CellGroupData[{
Cell[145654, 3742, 107, 0, 70, "Subsubsection",ExpressionUUID->"69eaee29-973f-47db-9739-98c815a96467"],
Cell[145764, 3744, 3088, 72, 70, "Code",ExpressionUUID->"d8c8498f-ca33-4918-9d38-8ca9ad748545"]
}, Open  ]],
Cell[CellGroupData[{
Cell[148889, 3821, 107, 0, 70, "Subsubsection",ExpressionUUID->"2575eb4c-f4d4-499f-b985-8fb51523048e"],
Cell[148999, 3823, 1427, 35, 70, "Code",ExpressionUUID->"ae4930ae-55bd-4192-a4d8-f9ad392b57ad"],
Cell[150429, 3860, 6116, 136, 70, "Code",ExpressionUUID->"1bafca60-2000-4082-a668-3588a033f364"]
}, Open  ]],
Cell[CellGroupData[{
Cell[156582, 4001, 109, 0, 70, "Subsubsection",ExpressionUUID->"6ca9fa1d-0d7d-4f41-a867-bb8d289f1349"],
Cell[156694, 4003, 2910, 66, 70, "Code",ExpressionUUID->"f8a6d46d-d6e3-4d67-a091-8488e57e7baa"]
}, Open  ]],
Cell[CellGroupData[{
Cell[159641, 4074, 105, 0, 70, "Subsubsection",ExpressionUUID->"15ae6653-9ca3-459f-bb56-76351e199012"],
Cell[159749, 4076, 333, 9, 70, "Code",ExpressionUUID->"2ab8dbe5-5ef1-4884-9a35-d352d1883455"]
}, Open  ]],
Cell[CellGroupData[{
Cell[160119, 4090, 105, 0, 70, "Subsubsection",ExpressionUUID->"0640c6e8-b8d9-441e-8043-5b30f5aeef3a"],
Cell[160227, 4092, 3688, 85, 70, "Code",ExpressionUUID->"22d46873-7b2c-4720-a6a8-2266159034ad"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[163964, 4183, 92, 0, 70, "Subsection",ExpressionUUID->"f2d3080b-8585-4dc9-ad68-6ba31892e2d6"],
Cell[CellGroupData[{
Cell[164081, 4187, 110, 0, 70, "Subsubsection",ExpressionUUID->"80389181-470c-43d1-8d5c-10d3fbdb43b1"],
Cell[164194, 4189, 393, 7, 70, "Text",ExpressionUUID->"73ca1ce5-1f43-4624-99e6-19f3768daae5"],
Cell[164590, 4198, 642, 14, 70, "Code",ExpressionUUID->"1e0a7cbd-ffae-4ae8-9223-df073183f61b"],
Cell[165235, 4214, 6748, 149, 70, "Code",ExpressionUUID->"9b12e49d-657a-48f9-a696-83477ab7a98b"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[172032, 4369, 88, 0, 70, "Subsection",ExpressionUUID->"02959476-e9ee-4531-8c98-2327a71deb41"],
Cell[172123, 4371, 123, 2, 70, "Code",ExpressionUUID->"1d136ea5-3c6b-4e7a-bb66-bd8407a12309"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[172295, 4379, 85, 0, 70, "Section",ExpressionUUID->"5c8a9b7e-0bce-4e9b-a315-2bc2e0559138"],
Cell[CellGroupData[{
Cell[172405, 4383, 87, 0, 70, "Subsection",ExpressionUUID->"e77f3094-86f4-45a3-b2f3-e72b420cf942"],
Cell[172495, 4385, 130, 2, 70, "Code",ExpressionUUID->"7bf69ae9-f5e3-4581-bf76-1dee1bfe4e4b"]
}, Open  ]]
}, Open  ]]
}, Open  ]]
}
]
*)

